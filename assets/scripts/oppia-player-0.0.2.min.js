(function(f,a){if(f.hasOwnProperty("OPPIA_EMBED_GLOBALS")){return}f.OPPIA_EMBED_GLOBALS={version:"0.0.2"};var g=function(i){if(console&&f.location.host.indexOf("localhost")===0){console.log(i)}};var e=function(i){if(console){console.log(i)}};var d=64;var b="";for(var c=0;c<d;c++){b+=String.fromCharCode(65+Math.floor(Math.random()*26))}var h=(function(){function k(l){if(l.tagName!=="OPPIA"){throw ("Error: expected OppiaEmbed to be defined using a node of type <oppia>, not "+l.tagName)}this.contentHasLoaded=false;this.targetDomain=null;this.oppiaNode=l;this.iframe=null}var j=10000;var i=("background-color: #ddd; border-radius: 5px; margin: 1px auto; max-width: 700px; padding: 30px; text-align: center");k.prototype.init=function(){if(this.contentHasLoaded){e("Error: tried to re-initialize Oppia node after its content was loaded.");return}if(this.iframe!==null){e("Error: tried to initialize Oppia node, but the exploration iframe is already loaded.");return}var s=this;if(!this.oppiaNode.getAttribute("oppia-id")){var q=a.createElement("strong");q.textContent="Warning: ";var u=a.createElement("span");u.textContent=("This Oppia exploration could not be loaded because no oppia-id attribute was specified in the HTML tag.");var m=a.createElement("div");m.appendChild(q);m.appendChild(u);m.setAttribute("style",i);this.oppiaNode.parentNode.replaceChild(m,this.oppiaNode);return}this.iframe=a.createElement("iframe");var t=f.location.protocol+"//"+f.location.host;this.targetDomain=this.oppiaNode.getAttribute("src")||t;var v=this.oppiaNode.getAttribute("locale")||"en";var y=this.oppiaNode.getAttribute("height");var o=this.oppiaNode.getAttribute("width");var r="false";var l="false";var A=(this.oppiaNode.getAttribute("exploration-version")||"");if(!y||y=="auto"){y="600px"}else{r="true"}if(!o||o=="auto"){o="700px"}else{l="true"}var n="version=";var x="secret=";var z=A?"&v="+A:"";this.iframe.src=encodeURI(this.targetDomain+"/embed/exploration/"+this.oppiaNode.getAttribute("oppia-id")+"?locale=en"+z+"#"+n+OPPIA_EMBED_GLOBALS.version+"&"+x+b);var p={seamless:"seamless",height:y,width:o,fixedheight:r,fixedwidth:l,frameborder:0};for(var w in p){this.iframe.setAttribute(w,p[w])}this.oppiaNode.parentNode.replaceChild(this.iframe,this.oppiaNode);f.addEventListener("message",function(C){if(C.origin!==s.targetDomain){return false}if(C.source!==s.iframe.contentWindow){return false}try{var E=JSON.parse(C.data);g(E)}catch(D){return false}var B=s.iframe;switch(E.title){case"explorationLoaded":s.explorationHasLoaded=true;f.OPPIA_PLAYER.onExplorationLoaded(B);break;case"heightChange":f.OPPIA_PLAYER.onHeightChange(B,E.payload.height,E.payload.scroll);break;case"stateTransition":f.OPPIA_PLAYER.onStateTransition(B,E.payload.oldStateName,E.payload.jsonAnswer,E.payload.newStateName);break;case"explorationReset":B.style.height="auto";f.OPPIA_PLAYER.onExplorationReset(B,E.payload.stateName);break;case"explorationCompleted":f.OPPIA_PLAYER.onExplorationCompleted(B);break;default:e("Error: event "+E.title+" not recognized.")}},false)};return k})();f.onload=function(){var m=a.getElementsByTagName("oppia");var k=[];for(var l=0;l<m.length;l++){k.push(m[l])}for(var l=0;l<k.length;l++){var j=new h(k[l]);j.init()}};f.OPPIA_PLAYER={onHeightChange:function(k,j,i){g("onHeightChange event triggered on "+k+" for "+j);k.style.height="";if(k.getAttribute("fixedheight")==="false"){k.height=j+"px"}if(i){k.scrollIntoView(false)}f.OPPIA_PLAYER.onHeightChangePostHook(k,j)},onExplorationLoaded:function(i){setTimeout(function(){i.style.position="inherit";i.style.visibility="inherit";i.style.top="inherit"},0);f.OPPIA_PLAYER.onExplorationLoadedPostHook(i)},onStateTransition:function(i,k,l,j){f.OPPIA_PLAYER.onStateTransitionPostHook(i,k,l,j)},onExplorationReset:function(i,j){f.OPPIA_PLAYER.onExplorationResetPostHook(i,j)},onExplorationCompleted:function(i){f.OPPIA_PLAYER.onExplorationCompletedPostHook(i)}}}(window,document));window.OPPIA_PLAYER.onHeightChangePostHook=function(b,a){};window.OPPIA_PLAYER.onExplorationLoadedPostHook=function(a){};window.OPPIA_PLAYER.onStateTransitionPostHook=function(a,c,d,b){};window.OPPIA_PLAYER.onExplorationResetPostHook=function(a,b){};window.OPPIA_PLAYER.onExplorationCompletedPostHook=function(a){};