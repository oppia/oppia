!function(t,e){if(!t.hasOwnProperty("OPPIA_EMBED_GLOBALS")){t.OPPIA_EMBED_GLOBALS={version:"0.0.3"};for(var o=function(e){console&&0===t.location.host.indexOf("localhost")&&console.log(e)},i=function(t){console&&console.log(t)},a="",n=0;n<64;n++)a+=String.fromCharCode(65+Math.floor(26*Math.random()));var r=function(){function n(t){if("OPPIA"!==t.tagName)throw"Error: expected OppiaEmbed to be defined using a node of type <oppia>, not "+t.tagName;this.contentHasLoaded=!1,this.targetDomain=null,this.oppiaNode=t,this.iframe=null}return n.prototype.init=function(){if(this.contentHasLoaded)i("Error: tried to re-initialize Oppia node after its content was loaded.");else if(null===this.iframe){var n=this;if(!this.oppiaNode.getAttribute("oppia-id")){var r=e.createElement("strong");r.textContent="Warning: ";var s=e.createElement("span");s.textContent="This Oppia exploration could not be loaded because no oppia-id attribute was specified in the HTML tag.";var d=e.createElement("div");return d.appendChild(r),d.appendChild(s),d.setAttribute("style","background-color: #ddd; border-radius: 5px; margin: 1px auto; max-width: 700px; padding: 30px; text-align: center"),void this.oppiaNode.parentNode.replaceChild(d,this.oppiaNode)}this.iframe=e.createElement("iframe");var p=t.location.protocol+"//"+t.location.host;this.targetDomain=this.oppiaNode.getAttribute("src")||p;this.oppiaNode.getAttribute("locale");var l=this.oppiaNode.getAttribute("height"),h=this.oppiaNode.getAttribute("width"),P="false",c="false",f=this.oppiaNode.getAttribute("exploration-version")||"";l&&"auto"!=l?P="true":l="600px",h&&"auto"!=h?c="true":h="700px";var u=f?"&v="+f:"";this.iframe.src=encodeURI(this.targetDomain+"/embed/exploration/"+this.oppiaNode.getAttribute("oppia-id")+"?locale=en"+u+"#version="+OPPIA_EMBED_GLOBALS.version+"&secret="+a);var g={seamless:"seamless",height:l,width:h,fixedheight:P,fixedwidth:c,frameborder:0};for(var A in g)this.iframe.setAttribute(A,g[A]);this.oppiaNode.parentNode.replaceChild(this.iframe,this.oppiaNode),t.addEventListener("message",function(e){if(e.origin!==n.targetDomain)return!1;if(e.source!==n.iframe.contentWindow)return!1;try{var a=JSON.parse(e.data);o(a)}catch(t){return!1}var r=n.iframe;switch(a.title){case"explorationLoaded":n.explorationHasLoaded=!0,t.OPPIA_PLAYER.onExplorationLoaded(r,a.payload.explorationTitle);break;case"heightChange":t.OPPIA_PLAYER.onHeightChange(r,a.payload.height,a.payload.scroll);break;case"stateTransition":t.OPPIA_PLAYER.onStateTransition(r,a.payload.oldStateName,a.payload.jsonAnswer,a.payload.newStateName);break;case"explorationReset":r.style.height="auto",t.OPPIA_PLAYER.onExplorationReset(r,a.payload.stateName);break;case"explorationCompleted":t.OPPIA_PLAYER.onExplorationCompleted(r);break;default:i("Error: event "+a.title+" not recognized.")}},!1)}else i("Error: tried to initialize Oppia node, but the exploration iframe is already loaded.")},n}();t.onload=function(){for(var t=e.getElementsByTagName("oppia"),o=[],i=0;i<t.length;i++)o.push(t[i]);for(i=0;i<o.length;i++)new r(o[i]).init()},t.OPPIA_PLAYER={onHeightChange:function(e,i,a){o("onHeightChange event triggered on "+e+" for "+i),e.style.height="","false"===e.getAttribute("fixedheight")&&(e.height=i+"px"),a&&e.scrollIntoView(!1),t.OPPIA_PLAYER.onHeightChangePostHook(e,i)},onExplorationLoaded:function(e,o){setTimeout(function(){e.style.position="inherit",e.style.visibility="inherit",e.style.top="inherit"},0),t.OPPIA_PLAYER.onExplorationLoadedPostHook(e,o)},onStateTransition:function(e,o,i,a){t.OPPIA_PLAYER.onStateTransitionPostHook(e,o,i,a)},onExplorationReset:function(e,o){t.OPPIA_PLAYER.onExplorationResetPostHook(e,o)},onExplorationCompleted:function(e){t.OPPIA_PLAYER.onExplorationCompletedPostHook(e)}}}}(window,document),window.OPPIA_PLAYER.onHeightChangePostHook=function(t,e){},window.OPPIA_PLAYER.onExplorationLoadedPostHook=function(t,e){},window.OPPIA_PLAYER.onStateTransitionPostHook=function(t,e,o,i){},window.OPPIA_PLAYER.onExplorationResetPostHook=function(t,e){},window.OPPIA_PLAYER.onExplorationCompletedPostHook=function(t){};