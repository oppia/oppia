(function(f,a){if(f.hasOwnProperty("OPPIA_EMBED_GLOBALS")){return}f.OPPIA_EMBED_GLOBALS={version:"0.0.1"};function g(i){if(console&&f.location.host.indexOf("localhost")===0){console.log(i)}}function e(i){if(console){console.log(i)}}var d=64;var b="";for(var c=0;c<d;c++){b+=String.fromCharCode(65+Math.floor(Math.random()*26))}var h=(function(){function k(l){if(l.tagName!=="OPPIA"){throw ("Error: expected OppiaEmbed to be defined using a node of type <oppia>, not "+l.tagName)}this.contentHasLoaded=false;this.targetDomain=null;this.oppiaNode=l;this.loadingDiv=null;this.iframe=null}var j=10000;var i=("background-color: #ddd; border-radius: 5px; margin: 1px auto; max-width: 700px; padding: 30px; text-align: center");k.prototype.init=function(){if(this.contentHasLoaded){e("Error: tried to re-initialize Oppia node after its content was loaded.");return}if(this.iframe!==null){e("Error: tried to initialize Oppia node, but the exploration iframe is already loaded.");return}var q=this;if(!this.oppiaNode.getAttribute("oppia-id")){var s=a.createElement("strong");s.textContent="Warning: ";var C=a.createElement("span");C.textContent=("This Oppia exploration could not be loaded because no oppia-id attribute was specified in the HTML tag.");var u=a.createElement("div");u.appendChild(s);u.appendChild(C);u.setAttribute("style",i);this.oppiaNode.parentNode.replaceChild(u,this.oppiaNode);return}var l=this.oppiaNode.getAttribute("autoload")||true;if(l&&l==="false"){var n=a.createElement("button");n.textContent="Load Exploration";n.onclick=function(){q.init()};var o=["background-color: rgb(95, 201, 95)","border-radius: 5px","color: white","font-size: 1.2em","height: 50px","padding: 10px","width: 700px"];n.setAttribute("style",o.join("; ")+";");var A=a.createElement("div");A.setAttribute("style","margin: 10px auto; text-align: center");A.appendChild(n);this.oppiaNode.appendChild(A);this.oppiaNode.setAttribute("autoload","true");return}this.iframe=a.createElement("iframe");var r=f.location.protocol+"//"+f.location.host;this.targetDomain=this.oppiaNode.getAttribute("src")||r;var y=this.oppiaNode.getAttribute("locale")||"en";var v=this.oppiaNode.getAttribute("height");var x=this.oppiaNode.getAttribute("width");var D="false";var B="false";var z=this.oppiaNode.getAttribute("exploration-version")||"";if(!v||v=="auto"){v="700px"}else{D="true"}if(!x||x=="auto"){x="98%"}else{B="true"}var t="version=";var w="secret=";var F=z?"&v="+z:"";this.iframe.src=encodeURI(this.targetDomain+"/explore/"+this.oppiaNode.getAttribute("oppia-id")+"?iframed=true&locale=en"+F+"#"+t+OPPIA_EMBED_GLOBALS.version+"&"+w+b);var E={seamless:"seamless",height:v,width:x,fixedheight:D,fixedwidth:B,frameborder:0,style:"margin: 10px; position: fixed; top: -9999px; visibility: hidden;"};for(var G in E){this.iframe.setAttribute(G,E[G])}this.oppiaNode.parentNode.replaceChild(this.iframe,this.oppiaNode);var p=a.createElement("span");p.style.fontSize="larger";p.textContent="Loading...";var m=a.createElement("div");m.setAttribute("style",i);m.appendChild(p);m.style.textAlign="center";this.loadingDiv=a.createElement("div");this.loadingDiv.appendChild(m);this.loadingDiv.appendChild(a.createElement("br"));this.loadingDiv.appendChild(a.createElement("br"));this.iframe.parentNode.insertBefore(this.loadingDiv,this.iframe);setTimeout(function(){if(!q.contentHasLoaded){var J=q.loadingDiv.firstChild;var I=J.firstChild;I.textContent="This exploration could not be loaded.";var H=a.createElement("div");H.textContent="Sorry about that.";J.setAttribute("style",i);J.appendChild(a.createElement("br"));J.appendChild(a.createElement("br"));J.appendChild(H)}},j);f.addEventListener("message",function(I){if(I.origin!==q.targetDomain){return false}if(I.source!==q.iframe.contentWindow){return false}try{var K=JSON.parse(I.data);g(K)}catch(J){return false}var H=q.iframe;switch(K.title){case"explorationLoaded":q.loadingDiv.parentNode.removeChild(q.loadingDiv);q.explorationHasLoaded=true;f.OPPIA_PLAYER.onExplorationLoaded(H);break;case"heightChange":f.OPPIA_PLAYER.onHeightChange(H,K.payload.height,K.payload.scroll);break;case"stateTransition":f.OPPIA_PLAYER.onStateTransition(H,K.payload.oldStateName,K.payload.jsonAnswer,K.payload.newStateName);break;case"explorationReset":H.style.height="auto";f.OPPIA_PLAYER.onExplorationReset(H,K.payload.stateName);break;case"explorationCompleted":f.OPPIA_PLAYER.onExplorationCompleted(H);break;default:e("Error: event "+K.title+" not recognized.")}},false)};return k})();f.onload=function(){var m=a.getElementsByTagName("oppia");var k=[];for(var l=0;l<m.length;l++){k.push(m[l])}for(var l=0;l<k.length;l++){var j=new h(k[l]);j.init()}};f.OPPIA_PLAYER={onHeightChange:function(k,j,i){g("onHeightChange event triggered on "+k+" for "+j);k.style.height="";if(k.getAttribute("fixedheight")==="false"){k.height=j+"px"}if(i){k.scrollIntoView(false)}f.OPPIA_PLAYER.onHeightChangePostHook(k,j)},onExplorationLoaded:function(i){setTimeout(function(){i.style.position="inherit";i.style.visibility="inherit";i.style.top="inherit"},0);f.OPPIA_PLAYER.onExplorationLoadedPostHook(i)},onStateTransition:function(i,k,l,j){f.OPPIA_PLAYER.onStateTransitionPostHook(i,k,l,j)},onExplorationReset:function(i,j){f.OPPIA_PLAYER.onExplorationResetPostHook(i,j)},onExplorationCompleted:function(i){f.OPPIA_PLAYER.onExplorationCompletedPostHook(i)}}}(window,document));window.OPPIA_PLAYER.onHeightChangePostHook=function(b,a){};window.OPPIA_PLAYER.onExplorationLoadedPostHook=function(a){};window.OPPIA_PLAYER.onStateTransitionPostHook=function(a,c,d,b){};window.OPPIA_PLAYER.onExplorationResetPostHook=function(a,b){};window.OPPIA_PLAYER.onExplorationCompletedPostHook=function(a){};
