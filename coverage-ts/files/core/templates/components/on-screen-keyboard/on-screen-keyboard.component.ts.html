
  <!DOCTYPE html>
  <html>
    <head>
      <title>on-screen-keyboard.component.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="negative"><td class="">core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts</td><td class="">77.33%</td><td class="">100%</td><td class="">172</td><td class="">133</td><td class="">39</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">// Copyright 2020 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an &quot;AS-IS&quot; BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileoverview Component for the on-screen keyboard used for math
 * interactions.
 */

import { Component } from &#x27;@angular/core&#x27;;
import { downgradeComponent } from &#x27;@angular/upgrade/static&#x27;;
import constants from &#x27;assets/constants&#x27;;
import { UrlInterpolationService } from &#x27;domain/utilities/url-interpolation.service&#x27;;
import { DeviceInfoService } from &#x27;services/contextual/device-info.service&#x27;;
import { GuppyInitializationService } from &#x27;services/guppy-initialization.service&#x27;;

@Component({
  selector: &#x27;oppia-on-screen-keyboard&#x27;,
  templateUrl: &#x27;./on-screen-keyboard.component.html&#x27;
})
export class OnScreenKeyboardComponent {
  engine;
  guppyInstance;
  functionsTab: string = constants.OSK_FUNCTIONS_TAB;
  lettersTab: string = constants.OSK_LETTERS_TAB;
  mainTab: string = constants.OSK_MAIN_TAB;
  greekSymbols: string[] = Object.values(
    constants.GREEK_LETTER_NAMES_TO_SYMBOLS);
  greekLetters: string[] = Object.keys(constants.GREEK_LETTER_NAMES_TO_SYMBOLS);
  currentTab: string = this.mainTab;
  lettersInKeyboardLayout: string[] = [&#x27;qwertyuiop&#x27;, &#x27;asdfghjkl&#x27;, &#x27;zxcvbnm&#x27;];
  functions: string[] = [
    &#x27;log&#x27;, &#x27;ln&#x27;, &#x27;sin&#x27;, &#x27;cos&#x27;, &#x27;tan&#x27;, &#x27;sec&#x27;, &#x27;csc&#x27;, &#x27;cot&#x27;, &#x27;arcsin&#x27;,
    &#x27;arccos&#x27;, &#x27;arctan&#x27;, &#x27;sinh&#x27;, &#x27;cosh&#x27;, &#x27;tanh&#x27;];
  interactionType: string;
  customLetters: string[];

  constructor(
    private deviceInfoService: DeviceInfoService,
    private guppyInitializationService: GuppyInitializationService,
    private urlInterpolationService: UrlInterpolationService
  ) {}

  activateGuppy(): void {
    this.guppyInstance.activate();
  }

  changeTab(newTab: string): void {
    this.currentTab = newTab;
    this.guppyInstance.activate();
  }

  getStaticImageUrl(imagePath: string): string {
    return this.urlInterpolationService.getStaticImageUrl(imagePath);
  }

  insertString(str: string): void {
    let index = this.greekSymbols.indexOf(str);
    if (index !== -1) {
      str = this.greekLetters[index];
    }
    this.engine.insert_string(str);
    this.guppyInstance.activate();
  }

  insertSymbol(symbol: string): void {
    this.engine.insert_symbol(symbol);
    this.guppyInstance.activate();
  }

  backspace(): void {
    this.engine.backspace();
    this.guppyInstance.activate();
  }

  left(): void {
    this.engine.left();
    this.guppyInstance.activate();
  }

  right(): void {
    this.engine.right();
    this.guppyInstance.activate();
  }

  exponent(value: string): void {
    this.engine.insert_string(&#x27;exp&#x27;);
    this.engine.insert_string(value);
    this.engine.right();
    this.guppyInstance.activate();
  }

  hideOSK(): void {
    this.guppyInitializationService.setShowOSK(false);
  }

  showOSK(): boolean {
    if (
      !this.deviceInfoService.isMobileUserAgent() ||
          !this.deviceInfoService.hasTouchEvents()) {
      return false;
    }
    let showOSK = this.guppyInitializationService.getShowOSK();
    let activeGuppyObject = (
      this.guppyInitializationService.findActiveGuppyObject());
    if (showOSK &amp;&amp; activeGuppyObject !== undefined) {
      this.guppyInstance = activeGuppyObject.guppyInstance;
      this.engine = this.guppyInstance.engine;
      this.interactionType = GuppyInitializationService.interactionType;
      this.customLetters =
        this.guppyInitializationService.getCustomOskLetters();
      return true;
    }
    return false;
  }
}

angular.module(&#x27;oppia&#x27;).directive(&#x27;oppiaOnScreenKeyboard&#x27;,
  downgradeComponent({ component: OnScreenKeyboardComponent }));
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:31,&quot;character&quot;:2,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:32,&quot;character&quot;:2,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:54,&quot;character&quot;:9,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:54,&quot;character&quot;:23,&quot;text&quot;:&quot;activate&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:59,&quot;character&quot;:9,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:59,&quot;character&quot;:23,&quot;text&quot;:&quot;activate&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:71,&quot;character&quot;:9,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:71,&quot;character&quot;:16,&quot;text&quot;:&quot;insert_string&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:72,&quot;character&quot;:9,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:72,&quot;character&quot;:23,&quot;text&quot;:&quot;activate&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:76,&quot;character&quot;:9,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:76,&quot;character&quot;:16,&quot;text&quot;:&quot;insert_symbol&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:77,&quot;character&quot;:9,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:77,&quot;character&quot;:23,&quot;text&quot;:&quot;activate&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:81,&quot;character&quot;:9,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:81,&quot;character&quot;:16,&quot;text&quot;:&quot;backspace&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:82,&quot;character&quot;:9,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:82,&quot;character&quot;:23,&quot;text&quot;:&quot;activate&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:86,&quot;character&quot;:9,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:86,&quot;character&quot;:16,&quot;text&quot;:&quot;left&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:87,&quot;character&quot;:9,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:87,&quot;character&quot;:23,&quot;text&quot;:&quot;activate&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:91,&quot;character&quot;:9,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:91,&quot;character&quot;:16,&quot;text&quot;:&quot;right&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:92,&quot;character&quot;:9,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:92,&quot;character&quot;:23,&quot;text&quot;:&quot;activate&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:96,&quot;character&quot;:9,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:96,&quot;character&quot;:16,&quot;text&quot;:&quot;insert_string&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:97,&quot;character&quot;:9,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:97,&quot;character&quot;:16,&quot;text&quot;:&quot;insert_string&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:98,&quot;character&quot;:9,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:98,&quot;character&quot;:16,&quot;text&quot;:&quot;right&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:99,&quot;character&quot;:9,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:99,&quot;character&quot;:23,&quot;text&quot;:&quot;activate&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:116,&quot;character&quot;:11,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:116,&quot;character&quot;:45,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:117,&quot;character&quot;:11,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:117,&quot;character&quot;:25,&quot;text&quot;:&quot;guppyInstance&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/components/on-screen-keyboard/on-screen-keyboard.component.ts&quot;,&quot;line&quot;:117,&quot;character&quot;:39,&quot;text&quot;:&quot;engine&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 17 Jun 2021 20:43:56 GMT</p>
    </body>
  </html>
  