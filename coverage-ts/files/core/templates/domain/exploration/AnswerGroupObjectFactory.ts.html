
  <!DOCTYPE html>
  <html>
    <head>
      <title>AnswerGroupObjectFactory.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">core/templates/domain/exploration/AnswerGroupObjectFactory.ts</td><td class="">100.00%</td><td class="">100%</td><td class="">118</td><td class="">118</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">// Copyright 2015 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an &quot;AS-IS&quot; BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileoverview Factory for creating new frontend instances of AnswerGroup
 * domain objects.
 */

import { downgradeInjectable } from &#x27;@angular/upgrade/static&#x27;;
import { Injectable } from &#x27;@angular/core&#x27;;

import { InteractionAnswer } from &#x27;interactions/answer-defs&#x27;;
import { Outcome, OutcomeBackendDict, OutcomeObjectFactory } from
  &#x27;domain/exploration/OutcomeObjectFactory&#x27;;
import { Rule, RuleBackendDict, RuleObjectFactory } from
  &#x27;domain/exploration/RuleObjectFactory&#x27;;

export interface AnswerGroupBackendDict {
  &#x27;rule_specs&#x27;: RuleBackendDict[];
  &#x27;outcome&#x27;: OutcomeBackendDict;
  &#x27;training_data&#x27;: readonly InteractionAnswer[];
  // Note: Here the type &#x27;null&#x27; comes from file
  // &#x27;add-answer-group-modal.controller.ts&#x27;. Property
  // &#x27;tmpTaggedSkillMisconceptionId&#x27; has been initialized
  // as &#x27;null&#x27; there.
  &#x27;tagged_skill_misconception_id&#x27;: string | null;
}

export class AnswerGroup {
  rules: Rule[];
  outcome: Outcome;
  trainingData: readonly InteractionAnswer[];
  taggedSkillMisconceptionId: string | null;
  constructor(
      rules: Rule[], outcome: Outcome,
      trainingData: readonly InteractionAnswer[],
      taggedSkillMisconceptionId: string | null) {
    this.rules = rules;
    this.outcome = outcome;
    this.trainingData = trainingData;
    this.taggedSkillMisconceptionId = taggedSkillMisconceptionId;
  }

  toBackendDict(): AnswerGroupBackendDict {
    return {
      rule_specs: this.rules.map(rule =&gt; rule.toBackendDict()),
      outcome: this.outcome.toBackendDict(),
      training_data: this.trainingData,
      tagged_skill_misconception_id: this.taggedSkillMisconceptionId
    };
  }
}

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class AnswerGroupObjectFactory {
  constructor(
    private outcomeObjectFactory: OutcomeObjectFactory,
    private ruleObjectFactory: RuleObjectFactory) {}

  generateRulesFromBackendDict(
      ruleBackendDicts: RuleBackendDict[],
      interactionId: string
  ): Rule[] {
    return ruleBackendDicts.map(
      ruleBackendDict =&gt; this.ruleObjectFactory.createFromBackendDict(
        ruleBackendDict, interactionId)
    );
  }

  createNew(
      rules: Rule[], outcome: Outcome,
      trainingData: readonly InteractionAnswer[],
      taggedSkillMisconceptionId: string | null): AnswerGroup {
    return new AnswerGroup(
      rules, outcome, trainingData, taggedSkillMisconceptionId);
  }

  createFromBackendDict(
      answerGroupBackendDict: AnswerGroupBackendDict,
      interactionId: string
  ): AnswerGroup {
    return new AnswerGroup(
      this.generateRulesFromBackendDict(
        answerGroupBackendDict.rule_specs, interactionId),
      this.outcomeObjectFactory.createFromBackendDict(
        answerGroupBackendDict.outcome),
      answerGroupBackendDict.training_data,
      answerGroupBackendDict.tagged_skill_misconception_id);
  }
}

angular.module(&#x27;oppia&#x27;).factory(
  &#x27;AnswerGroupObjectFactory&#x27;, downgradeInjectable(AnswerGroupObjectFactory));
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 17 Jun 2021 20:43:54 GMT</p>
    </body>
  </html>
  