
  <!DOCTYPE html>
  <html>
    <head>
      <title>change.model.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">core/templates/domain/editor/undo_redo/change.model.ts</td><td class="">100.00%</td><td class="">100%</td><td class="">267</td><td class="">267</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">// Copyright 2016 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an &quot;AS-IS&quot; BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileoverview Model class for creating and mutating instances of frontend
 * change domain objects. This frontend object represents both CollectionChange
 * and ExplorationChange backend domain objects.
 */

// TODO(bhenning): Consolidate the backend ExplorationChange and
// CollectionChange domain objects.

import cloneDeep from &#x27;lodash/cloneDeep&#x27;;

import { MisconceptionBackendDict } from
  &#x27;domain/skill/MisconceptionObjectFactory&#x27;;
import { RecordedVoiceOverBackendDict } from
  &#x27;domain/exploration/recorded-voiceovers.model&#x27;;
import { StateBackendDict } from
  &#x27;domain/state/StateObjectFactory&#x27;;
import { SubtitledHtmlBackendDict } from
  &#x27;domain/exploration/subtitled-html.model&#x27;;
import { WorkedExampleBackendDict } from
  &#x27;domain/skill/WorkedExampleObjectFactory&#x27;;
import { Collection } from &#x27;domain/collection/collection.model&#x27;;
import { Question } from &#x27;domain/question/QuestionObjectFactory&#x27;;
import { Skill } from &#x27;domain/skill/SkillObjectFactory&#x27;;
import { Story } from &#x27;domain/story/StoryObjectFactory&#x27;;
import { Topic } from &#x27;domain/topic/TopicObjectFactory&#x27;;
import { SubtopicPage } from &#x27;domain/topic/subtopic-page.model&#x27;;

interface CollectionTitleChange {
  &#x27;cmd&#x27;: &#x27;edit_collection_property&#x27;;
  &#x27;property_name&#x27;: &#x27;title&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface CollectionCategoryChange {
  &#x27;cmd&#x27;: &#x27;edit_collection_property&#x27;;
  &#x27;property_name&#x27;: &#x27;category&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface CollectionObjectiveChange {
  &#x27;cmd&#x27;: &#x27;edit_collection_property&#x27;;
  &#x27;property_name&#x27;: &#x27;objective&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface CollectionLanguageCodeChange {
  &#x27;cmd&#x27;: &#x27;edit_collection_property&#x27;;
  &#x27;property_name&#x27;: &#x27;language_code&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface CollectionTagsChange {
  &#x27;cmd&#x27;: &#x27;edit_collection_property&#x27;;
  &#x27;property_name&#x27;: &#x27;tags&#x27;;
  &#x27;new_value&#x27;: string[];
  &#x27;old_value&#x27;: string[];
}

type CollectionPropertyChange = (
  CollectionTitleChange |
  CollectionCategoryChange |
  CollectionObjectiveChange |
  CollectionLanguageCodeChange |
  CollectionTagsChange);

interface CollectionAddNodeChange {
  &#x27;cmd&#x27;: &#x27;add_collection_node&#x27;;
  &#x27;exploration_id&#x27;: string;
}

interface CollectionSwapNodeChange {
  &#x27;cmd&#x27;: &#x27;swap_nodes&#x27;;
  &#x27;first_index&#x27;: number;
  &#x27;second_index&#x27;: number;
}

interface CollectionDeleteNodeChange {
  &#x27;cmd&#x27;: &#x27;delete_collection_node&#x27;;
  &#x27;exploration_id&#x27;: string;
}

export type CollectionChange = (
  CollectionPropertyChange |
  CollectionAddNodeChange |
  CollectionSwapNodeChange |
  CollectionDeleteNodeChange);

interface QuestionLanguageCodeChange {
  &#x27;cmd&#x27;: &#x27;update_question_property&#x27;;
  &#x27;property_name&#x27;: &#x27;language_code&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface QuestionStateDataChange {
  &#x27;cmd&#x27;: &#x27;update_question_property&#x27;;
  &#x27;property_name&#x27;: &#x27;question_state_data&#x27;;
  &#x27;new_value&#x27;: StateBackendDict;
  &#x27;old_value&#x27;: StateBackendDict;
}

type QuestionPropertyChange = (
  QuestionLanguageCodeChange |
  QuestionStateDataChange);

type QuestionChange = QuestionPropertyChange;

interface SkillDescriptionChange {
  &#x27;cmd&#x27;: &#x27;update_skill_property&#x27;;
  &#x27;property_name&#x27;: &#x27;description&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

type SkillPropertyChange = SkillDescriptionChange;

interface SkillMisconceptionNameChange {
  &#x27;cmd&#x27;: &#x27;update_skill_misconceptions_property&#x27;;
  &#x27;property_name&#x27;: &#x27;name&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;misconception_id&#x27;: string;
}

interface SkillMisconceptionMustBeAddressedChange {
  &#x27;cmd&#x27;: &#x27;update_skill_misconceptions_property&#x27;;
  &#x27;property_name&#x27;: &#x27;must_be_addressed&#x27;;
  &#x27;new_value&#x27;: boolean;
  &#x27;old_value&#x27;: boolean;
  &#x27;misconception_id&#x27;: string;
}

interface SkillMisconceptionsNotesChange {
  &#x27;cmd&#x27;: &#x27;update_skill_misconceptions_property&#x27;;
  &#x27;property_name&#x27;: &#x27;notes&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;misconception_id&#x27;: string;
}

interface SkillMisconceptionsFeedbackChange {
  &#x27;cmd&#x27;: &#x27;update_skill_misconceptions_property&#x27;;
  &#x27;property_name&#x27;: &#x27;feedback&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;misconception_id&#x27;: string;
}

type SkillMisconceptionPropertyChange = (
  SkillMisconceptionNameChange |
  SkillMisconceptionMustBeAddressedChange |
  SkillMisconceptionsNotesChange |
  SkillMisconceptionsFeedbackChange);

interface SkillRubricsChange {
  &#x27;cmd&#x27;: &#x27;update_rubrics&#x27;;
  &#x27;difficulty&#x27;: string;
  &#x27;explanations&#x27;: string[];
}

interface SkillContentsExplanationChange {
  &#x27;cmd&#x27;: &#x27;update_skill_contents_property&#x27;;
  &#x27;property_name&#x27;: &#x27;explanation&#x27;;
  &#x27;new_value&#x27;: SubtitledHtmlBackendDict;
  &#x27;old_value&#x27;: SubtitledHtmlBackendDict;
}

export interface SkillContentsWorkedExamplesChange {
  &#x27;cmd&#x27;: &#x27;update_skill_contents_property&#x27;;
  &#x27;property_name&#x27;: &#x27;worked_examples&#x27;;
  &#x27;new_value&#x27;: WorkedExampleBackendDict[];
  &#x27;old_value&#x27;: WorkedExampleBackendDict[];
}

type SkillContentsChange = (
  SkillContentsExplanationChange |
  SkillContentsWorkedExamplesChange);

interface SkillAddMisconceptionChange {
  &#x27;cmd&#x27;: &#x27;add_skill_misconception&#x27;;
  &#x27;new_misconception_dict&#x27;: MisconceptionBackendDict;
}

interface SkillDeleteMisconceptionChange {
  &#x27;cmd&#x27;: &#x27;delete_skill_misconception&#x27;;
  &#x27;misconception_id&#x27;: string;
}

interface SkillAddPrerequisiteChange {
  &#x27;cmd&#x27;: &#x27;add_prerequisite_skill&#x27;;
  &#x27;skill_id&#x27;: string;
}

interface SkillDeletePrerequisiteChange {
  &#x27;cmd&#x27;: &#x27;delete_prerequisite_skill&#x27;;
  &#x27;skill_id&#x27;: string;
}

export type SkillChange = (
  SkillPropertyChange |
  SkillMisconceptionPropertyChange |
  SkillRubricsChange |
  SkillContentsChange |
  SkillAddMisconceptionChange |
  SkillDeleteMisconceptionChange |
  SkillAddPrerequisiteChange |
  SkillDeletePrerequisiteChange);

interface StoryTitleChange {
  &#x27;cmd&#x27;: &#x27;update_story_property&#x27;;
  &#x27;property_name&#x27;: &#x27;title&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface StoryUrlFragmentChange {
  &#x27;cmd&#x27;: &#x27;update_story_property&#x27;;
  &#x27;property_name&#x27;: &#x27;url_fragment&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface StoryThumbnailFilenameChange {
  &#x27;cmd&#x27;: &#x27;update_story_property&#x27;;
  &#x27;property_name&#x27;: &#x27;thumbnail_filename&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface StoryThumbnailBgColorChange {
  &#x27;cmd&#x27;: &#x27;update_story_property&#x27;;
  &#x27;property_name&#x27;: &#x27;thumbnail_bg_color&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface StoryDescriptionChange {
  &#x27;cmd&#x27;: &#x27;update_story_property&#x27;;
  &#x27;property_name&#x27;: &#x27;description&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface StoryNotesChange {
  &#x27;cmd&#x27;: &#x27;update_story_property&#x27;;
  &#x27;property_name&#x27;: &#x27;notes&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface StoryLanguageCodeChange {
  &#x27;cmd&#x27;: &#x27;update_story_property&#x27;;
  &#x27;property_name&#x27;: &#x27;language_code&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

type StoryPropertyChange = (
  StoryTitleChange |
  StoryUrlFragmentChange |
  StoryThumbnailFilenameChange |
  StoryThumbnailBgColorChange |
  StoryDescriptionChange |
  StoryNotesChange |
  StoryLanguageCodeChange);

interface StoryInitialNodeIdChange {
  &#x27;cmd&#x27;: &#x27;update_story_contents_property&#x27;;
  &#x27;property_name&#x27;: &#x27;initial_node_id&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface StoryNodesChange {
  &#x27;cmd&#x27;: &#x27;update_story_contents_property&#x27;;
  &#x27;property_name&#x27;: &#x27;node&#x27;;
  &#x27;new_value&#x27;: number;
  &#x27;old_value&#x27;: number;
}

type StoryContentsChange = (
  StoryInitialNodeIdChange |
  StoryNodesChange);

interface StoryNodeOutlineChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;outline&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;node_id&#x27;: string;
}

interface StoryNodeTitleChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;title&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;node_id&#x27;: string;
}

interface StoryNodeDescriptionChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;description&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;node_id&#x27;: string;
}

interface StoryNodeThumbnailFilenameChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;thumbnail_filename&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;node_id&#x27;: string;
}

interface StoryNodeThumbnailBgColorChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;thumbnail_bg_color&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;node_id&#x27;: string;
}

interface StoryNodeExplorationIdChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;exploration_id&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;node_id&#x27;: string;
}

interface StoryNodeDestinationIdsChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;destination_node_ids&#x27;;
  &#x27;new_value&#x27;: string[];
  &#x27;old_value&#x27;: string[];
  &#x27;node_id&#x27;: string;
}

interface StoryNodePrerequisiteSkillsChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;prerequisite_skill_ids&#x27;;
  &#x27;new_value&#x27;: string[];
  &#x27;old_value&#x27;: string[];
  &#x27;node_id&#x27;: string;
}

interface StoryNodeAcequiredSkillsChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_property&#x27;;
  &#x27;property_name&#x27;: &#x27;acquired_skill_ids&#x27;;
  &#x27;new_value&#x27;: string[];
  &#x27;old_value&#x27;: string[];
  &#x27;node_id&#x27;: string;
}

type StoryNodePropertyChange = (
  StoryNodeOutlineChange |
  StoryNodeTitleChange |
  StoryNodeDescriptionChange |
  StoryNodeThumbnailFilenameChange |
  StoryNodeThumbnailBgColorChange |
  StoryNodeExplorationIdChange |
  StoryNodeDestinationIdsChange |
  StoryNodePrerequisiteSkillsChange |
  StoryNodeAcequiredSkillsChange);

interface StoryAddNodeChange {
  &#x27;cmd&#x27;: &#x27;add_story_node&#x27;;
  &#x27;node_id&#x27;: string;
  &#x27;title&#x27;: string;
}

interface StoryDeleteNodeChange {
  &#x27;cmd&#x27;: &#x27;delete_story_node&#x27;;
  &#x27;node_id&#x27;: string;
}

interface StoryNodeOutlineStatusChange {
  &#x27;cmd&#x27;: &#x27;update_story_node_outline_status&#x27;;
  &#x27;node_id&#x27;: string;
  &#x27;old_value&#x27;: boolean;
  &#x27;new_value&#x27;: boolean;
}

export type StoryChange = (
  StoryPropertyChange |
  StoryContentsChange |
  StoryNodePropertyChange |
  StoryAddNodeChange |
  StoryDeleteNodeChange |
  StoryNodeOutlineStatusChange);

interface TopicNameChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;name&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface TopicAbbreviatedNameChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;abbreviated_name&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}
interface TopicPracticeTabChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;practice_tab_is_displayed&#x27;;
  &#x27;new_value&#x27;: boolean;
  &#x27;old_value&#x27;: boolean;
}

interface TopicThumbnailFilenameChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;thumbnail_filename&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface TopicThumbnailBgColorChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;thumbnail_bg_color&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface TopicDescriptionChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;description&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface TopicUrlFragmentChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;url_fragment&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface TopicMetaTagContentChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;meta_tag_content&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface TopicLanguageCodeChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;language_code&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

interface TopicPageTitleFragmentForWebChange {
  &#x27;cmd&#x27;: &#x27;update_topic_property&#x27;,
  &#x27;property_name&#x27;: &#x27;page_title_fragment_for_web&#x27;,
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
}

type TopicPropertyChange = (
  TopicNameChange |
  TopicAbbreviatedNameChange |
  TopicThumbnailFilenameChange |
  TopicThumbnailBgColorChange |
  TopicDescriptionChange |
  TopicPracticeTabChange |
  TopicUrlFragmentChange |
  TopicMetaTagContentChange |
  TopicLanguageCodeChange |
  TopicPageTitleFragmentForWebChange);

interface TopicSubtopicThumbnailFilenameChange {
  &#x27;cmd&#x27;: &#x27;update_subtopic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;thumbnail_filename&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;subtopic_id&#x27;: number;
}

interface TopicSubtopicThumbnailBgColorChange {
  &#x27;cmd&#x27;: &#x27;update_subtopic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;thumbnail_bg_color&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;subtopic_id&#x27;: number;
}

interface TopicSubtopicTitleChange {
  &#x27;cmd&#x27;: &#x27;update_subtopic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;title&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;subtopic_id&#x27;: number;
}

interface TopicSubtopicUrlFragmentChange {
  &#x27;cmd&#x27;: &#x27;update_subtopic_property&#x27;;
  &#x27;property_name&#x27;: &#x27;url_fragment&#x27;;
  &#x27;new_value&#x27;: string;
  &#x27;old_value&#x27;: string;
  &#x27;subtopic_id&#x27;: number;
}

export type TopicSubtopicPropertyChange = (
  TopicSubtopicThumbnailFilenameChange |
  TopicSubtopicThumbnailBgColorChange |
  TopicSubtopicTitleChange |
  TopicSubtopicUrlFragmentChange);

interface TopicSubtopicPageHtmlChange {
  &#x27;cmd&#x27;: &#x27;update_subtopic_page_property&#x27;;
  &#x27;property_name&#x27;: &#x27;page_contents_html&#x27;;
  &#x27;new_value&#x27;: SubtitledHtmlBackendDict;
  &#x27;old_value&#x27;: SubtitledHtmlBackendDict;
  &#x27;subtopic_id&#x27;: number;
}

interface TopicSubtopicPageAudioChange {
  &#x27;cmd&#x27;: &#x27;update_subtopic_page_property&#x27;;
  &#x27;property_name&#x27;: &#x27;page_contents_audio&#x27;;
  &#x27;new_value&#x27;: RecordedVoiceOverBackendDict;
  &#x27;old_value&#x27;: RecordedVoiceOverBackendDict;
  &#x27;subtopic_id&#x27;: number;
}

type TopicSubtopicPagePropertyChange = (
  TopicSubtopicPageHtmlChange |
  TopicSubtopicPageAudioChange);

interface TopicAddSubtopicChange {
  &#x27;cmd&#x27;: &#x27;add_subtopic&#x27;;
  &#x27;subtopic_id&#x27;: number;
  &#x27;title&#x27;: string;
}

interface TopicAddUncategorizedSkillId {
  &#x27;cmd&#x27;: &#x27;add_uncategorized_skill_id&#x27;,
  &#x27;new_uncategorized_skill_id&#x27;: string
}

interface TopicDeleteSubtopicChange {
  &#x27;cmd&#x27;: &#x27;delete_subtopic&#x27;;
  &#x27;subtopic_id&#x27;: number;
}

export interface TopicMoveSkillToSubtopicChange {
  &#x27;cmd&#x27;: &#x27;move_skill_id_to_subtopic&#x27;;
  &#x27;old_subtopic_id&#x27;: number;
  &#x27;new_subtopic_id&#x27;: number;
  &#x27;skill_id&#x27;: string;
}

export interface TopicRemoveSkillFromSubtopicChange {
  &#x27;cmd&#x27;: &#x27;remove_skill_id_from_subtopic&#x27;;
  &#x27;subtopic_id&#x27;: number;
  &#x27;skill_id&#x27;: string;
}

interface TopicDeleteAdditionalStoryChange {
  &#x27;cmd&#x27;: &#x27;delete_additional_story&#x27;;
  &#x27;story_id&#x27;: string;
}

interface TopicDeleteCanonicalStoryChange {
  &#x27;cmd&#x27;: &#x27;delete_canonical_story&#x27;;
  &#x27;story_id&#x27;: string;
}

interface TopicRearrangeCanonicalStoryChange {
  &#x27;cmd&#x27;: &#x27;rearrange_canonical_story&#x27;;
  &#x27;from_index&#x27;: number;
  &#x27;to_index&#x27;: number;
}

interface TopicRearrangeSkillInSubtopicChange {
  &#x27;cmd&#x27;: &#x27;rearrange_skill_in_subtopic&#x27;;
  &#x27;subtopic_id&#x27;: number;
  &#x27;from_index&#x27;: number;
  &#x27;to_index&#x27;: number;
}

interface TopicRearrangeSubtopicChange {
  &#x27;cmd&#x27;: &#x27;rearrange_subtopic&#x27;;
  &#x27;from_index&#x27;: number;
  &#x27;to_index&#x27;: number;
}

interface TopicRemoveUncategorizedSkillChange {
  &#x27;cmd&#x27;: &#x27;remove_uncategorized_skill_id&#x27;;
  &#x27;uncategorized_skill_id&#x27;: string;
}

export type TopicChange = (
  TopicPropertyChange |
  TopicSubtopicPropertyChange |
  TopicSubtopicPagePropertyChange |
  TopicAddSubtopicChange |
  TopicAddUncategorizedSkillId |
  TopicDeleteSubtopicChange |
  TopicMoveSkillToSubtopicChange |
  TopicRemoveSkillFromSubtopicChange |
  TopicDeleteAdditionalStoryChange |
  TopicDeleteCanonicalStoryChange |
  TopicRearrangeCanonicalStoryChange |
  TopicRearrangeSkillInSubtopicChange |
  TopicRearrangeSubtopicChange |
  TopicRemoveUncategorizedSkillChange);

export type BackendChangeObject = (
  CollectionChange |
  QuestionChange |
  SkillChange |
  StoryChange |
  TopicChange);

export type DomainObject = (
  Collection |
  Question |
  Skill |
  Story |
  Topic |
  SubtopicPage);

export class Change {
  _backendChangeObject: BackendChangeObject;
  _applyChangeToObject: (
    backendChangeObject: BackendChangeObject,
    domainObject: DomainObject) =&gt; void;
  _reverseChangeToObject: (
    backendChangeObject: BackendChangeObject,
    domainObject: DomainObject) =&gt; void;

  constructor(
      backendChangeObject: BackendChangeObject,
      applyChangeToObject: (
        backendChangeObject: BackendChangeObject,
        domainObject: DomainObject) =&gt; void,
      reverseChangeToObject: (
        backendChangeObject: BackendChangeObject,
        domainObject: DomainObject) =&gt; void) {
    this._backendChangeObject = cloneDeep(backendChangeObject);
    this._applyChangeToObject = applyChangeToObject;
    this._reverseChangeToObject = reverseChangeToObject;
  }

  // Returns the JSON object which represents a backend python dict of this
  // change. Changes to this object are not reflected in this domain object.
  getBackendChangeObject(): BackendChangeObject {
    return cloneDeep(this._backendChangeObject);
  }

  setBackendChangeObject(
      backendChangeObject: BackendChangeObject): BackendChangeObject {
    return this._backendChangeObject = cloneDeep(backendChangeObject);
  }

  // Applies this change to the related object (such as a frontend collection
  // domain object).
  applyChange(domainObject: DomainObject): void {
    this._applyChangeToObject(this._backendChangeObject, domainObject);
  }

  // Reverse-applies this change to the related object (such as a frontend
  // collection domain object). This method should only be used to reverse a
  // change that was previously applied by calling the applyChange() method.
  reverseChange(domainObject: DomainObject): void {
    this._reverseChangeToObject(this._backendChangeObject, domainObject);
  }
}
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 17 Jun 2021 20:43:55 GMT</p>
    </body>
  </html>
  