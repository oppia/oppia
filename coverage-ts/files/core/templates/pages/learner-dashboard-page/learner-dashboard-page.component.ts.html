
  <!DOCTYPE html>
  <html>
    <head>
      <title>learner-dashboard-page.component.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="negative"><td class="">core/templates/pages/learner-dashboard-page/learner-dashboard-page.component.ts</td><td class="">99.77%</td><td class="">100%</td><td class="">870</td><td class="">868</td><td class="">2</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">// Copyright 2021 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an &quot;AS-IS&quot; BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.


/**
 * @fileoverview Component for the learner dashboard.
 */

import { Component, OnInit } from &#x27;@angular/core&#x27;;
import { downgradeComponent } from &#x27;@angular/upgrade/static&#x27;;
import { SafeResourceUrl } from &#x27;@angular/platform-browser&#x27;;
import { trigger, state, style, transition,
  animate, group } from &#x27;@angular/animations&#x27;;

import { AppConstants } from &#x27;app.constants&#x27;;
import { LearnerExplorationSummary } from &#x27;domain/summary/learner-exploration-summary.model&#x27;;
import { CollectionSummary } from &#x27;domain/collection/collection-summary.model&#x27;;
import { FeedbackThreadSummary } from &#x27;domain/feedback_thread/feedback-thread-summary.model&#x27;;
import { ProfileSummary } from &#x27;domain/user/profile-summary.model&#x27;;
import { FeedbackMessageSummary } from &#x27;domain/feedback_message/feedback-message-summary.model&#x27;;
import { LearnerDashboardBackendApiService } from &#x27;domain/learner_dashboard/learner-dashboard-backend-api.service&#x27;;
import { LearnerDashboardActivityBackendApiService } from &#x27;domain/learner_dashboard/learner-dashboard-activity-backend-api.service&#x27;;
import { UrlInterpolationService } from &#x27;domain/utilities/url-interpolation.service&#x27;;
import { ThreadStatusDisplayService } from &#x27;pages/exploration-editor-page/feedback-tab/services/thread-status-display.service&#x27;;
import { SuggestionModalForLearnerDashboardService } from &#x27;pages/learner-dashboard-page/suggestion-modal/suggestion-modal-for-learner-dashboard.service&#x27;;
import { LearnerDashboardPageConstants } from &#x27;pages/learner-dashboard-page/learner-dashboard-page.constants&#x27;;
import { AlertsService } from &#x27;services/alerts.service&#x27;;
import { DeviceInfoService } from &#x27;services/contextual/device-info.service&#x27;;
import { DateTimeFormatService } from &#x27;services/date-time-format.service&#x27;;
import { LoaderService } from &#x27;services/loader.service&#x27;;
import { UserService } from &#x27;services/user.service&#x27;;
import { FocusManagerService } from &#x27;services/stateful/focus-manager.service&#x27;;


@Component({
  selector: &#x27;oppia-learner-dashboard-page&#x27;,
  templateUrl: &#x27;./learner-dashboard-page.component.html&#x27;,
  styleUrls: [],
  animations: [
    trigger(&#x27;slideInOut&#x27;, [
      state(&#x27;true&#x27;, style({
        &#x27;max-height&#x27;: &#x27;500px&#x27;, opacity: &#x27;1&#x27;, visibility: &#x27;visible&#x27;
      })),
      state(&#x27;false&#x27;, style({
        &#x27;max-height&#x27;: &#x27;0px&#x27;, opacity: &#x27;0&#x27;, visibility: &#x27;hidden&#x27;
      })),
      transition(&#x27;true =&gt; false&#x27;, [group([
        animate(&#x27;500ms ease-in-out&#x27;, style({
          opacity: &#x27;0&#x27;
        })),
        animate(&#x27;500ms ease-in-out&#x27;, style({
          &#x27;max-height&#x27;: &#x27;0px&#x27;
        })),
        animate(&#x27;500ms ease-in-out&#x27;, style({
          visibility: &#x27;hidden&#x27;
        }))
      ]
      )]),
      transition(&#x27;false =&gt; true&#x27;, [group([
        animate(&#x27;500ms ease-in-out&#x27;, style({
          visibility: &#x27;visible&#x27;
        })),
        animate(&#x27;500ms ease-in-out&#x27;, style({
          &#x27;max-height&#x27;: &#x27;500px&#x27;
        })),
        animate(&#x27;500ms ease-in-out&#x27;, style({
          opacity: &#x27;1&#x27;
        }))
      ]
      )])
    ])
  ]
})
export class LearnerDashboardPageComponent implements OnInit {
  threadIndex: number;

  EXPLORATIONS_SORT_BY_KEYS_AND_I18N_IDS = (
    LearnerDashboardPageConstants.EXPLORATIONS_SORT_BY_KEYS_AND_I18N_IDS);
  SUBSCRIPTION_SORT_BY_KEYS_AND_I18N_IDS = (
    LearnerDashboardPageConstants.SUBSCRIPTION_SORT_BY_KEYS_AND_I18N_IDS);
  FEEDBACK_THREADS_SORT_BY_KEYS_AND_I18N_IDS = (
    LearnerDashboardPageConstants.FEEDBACK_THREADS_SORT_BY_KEYS_AND_I18N_IDS);
  LEARNER_DASHBOARD_SECTION_I18N_IDS = (
    LearnerDashboardPageConstants.LEARNER_DASHBOARD_SECTION_I18N_IDS);
  LEARNER_DASHBOARD_SUBSECTION_I18N_IDS = (
    LearnerDashboardPageConstants.LEARNER_DASHBOARD_SUBSECTION_I18N_IDS);
  PAGE_SIZE = 8;
  Math = window.Math;
  username: string = &#x27;&#x27;;

  isCurrentExpSortDescending: boolean;
  isCurrentSubscriptionSortDescending: boolean;
  isCurrentFeedbackSortDescending: boolean;
  currentExpSortType: string;
  currentSubscribersSortType: string;
  currentFeedbackThreadsSortType: string;
  startIncompleteExpIndex: number;
  startCompletedExpIndex: number;
  startIncompleteCollectionIndex: number;
  startCompletedCollectionIndex: number;

  completedExplorationsList: LearnerExplorationSummary[];
  completedCollectionsList: CollectionSummary[];
  incompleteExplorationsList: LearnerExplorationSummary[];
  incompleteCollectionsList: CollectionSummary[];
  subscriptionsList: ProfileSummary[];

  numberNonexistentIncompleteExplorations: number;
  numberNonexistentIncompleteCollections: number;
  numberNonexistentCompletedExplorations: number;
  numberNonexistentCompletedCollections: number;
  numberNonexistentExplorationsFromPlaylist: number;
  numberNonexistentCollectionsFromPlaylist: number;
  completedToIncompleteCollections: string[];
  threadSummaries: FeedbackThreadSummary[];
  numberOfUnreadThreads: number;
  explorationPlaylist: LearnerExplorationSummary[];
  collectionPlaylist: CollectionSummary[];
  activeSection: string;
  activeSubsection: string;
  feedbackThreadActive: boolean;

  noExplorationActivity: boolean;
  noCollectionActivity: boolean;
  removeIconIsActive: boolean[];
  noActivity: boolean;
  messageSendingInProgress: boolean;
  profilePictureDataUrl: SafeResourceUrl;
  newMessage: {
    &#x27;text&#x27;: string
  };
  loadingFeedbacks: boolean;
  explorationTitle: string;
  threadStatus: string;
  explorationId: string;
  threadId: string;
  messageSummaries: FeedbackMessageSummary[];
  threadSummary: FeedbackThreadSummary;

  constructor(
    private alertsService: AlertsService,
    private deviceInfoService: DeviceInfoService,
    private dateTimeFormatService: DateTimeFormatService,
    private focusManagerService: FocusManagerService,
    private learnerDashboardBackendApiService:
      LearnerDashboardBackendApiService,
    private learnerDashboardActivityBackendApiService:
      LearnerDashboardActivityBackendApiService,
    private loaderService: LoaderService,
    private suggestionModalForLearnerDashboardService:
      SuggestionModalForLearnerDashboardService,
    private threadStatusDisplayService: ThreadStatusDisplayService,
    private urlInterpolationService: UrlInterpolationService,
    private userService: UserService,
  ) {}

  ngOnInit(): void {
    let userProfileImagePromise =
      this.userService.getProfileImageDataUrlAsync();
    userProfileImagePromise.then(
      dataUrl =&gt; {
        this.profilePictureDataUrl =
          decodeURIComponent(dataUrl);
      });

    this.loaderService.showLoadingScreen(&#x27;Loading&#x27;);

    let userInfoPromise = this.userService.getUserInfoAsync();
    userInfoPromise.then(userInfo =&gt; {
      this.username = userInfo.getUsername();
    });

    let dashboardDataPromise = (
      this.learnerDashboardBackendApiService.fetchLearnerDashboardDataAsync());
    dashboardDataPromise.then(
      responseData =&gt; {
        this.isCurrentExpSortDescending = true;
        this.isCurrentSubscriptionSortDescending = true;
        this.isCurrentFeedbackSortDescending = true;
        this.currentExpSortType = (
          LearnerDashboardPageConstants
            .EXPLORATIONS_SORT_BY_KEYS_AND_I18N_IDS.LAST_PLAYED.key);
        this.currentSubscribersSortType = (
          LearnerDashboardPageConstants
            .SUBSCRIPTION_SORT_BY_KEYS_AND_I18N_IDS.USERNAME.key);
        this.currentFeedbackThreadsSortType = (
          LearnerDashboardPageConstants
            .FEEDBACK_THREADS_SORT_BY_KEYS_AND_I18N_IDS.LAST_UPDATED.key);
        this.startIncompleteExpIndex = 0;
        this.startCompletedExpIndex = 0;
        this.startIncompleteCollectionIndex = 0;
        this.startCompletedCollectionIndex = 0;
        this.completedExplorationsList = (
          responseData.completedExplorationsList);
        this.completedCollectionsList = (
          responseData.completedCollectionsList);
        this.incompleteExplorationsList = (
          responseData.incompleteExplorationsList);
        this.incompleteCollectionsList = (
          responseData.incompleteCollectionsList);
        this.subscriptionsList = responseData.subscriptionList;
        this.numberNonexistentIncompleteExplorations = (
          responseData.numberOfNonexistentActivities
            .incompleteExplorations);
        this.numberNonexistentIncompleteCollections = (
          responseData.numberOfNonexistentActivities.incompleteCollections);
        this.numberNonexistentCompletedExplorations = (
          responseData.numberOfNonexistentActivities.completedExplorations);
        this.numberNonexistentCompletedCollections = (
          responseData.numberOfNonexistentActivities.completedCollections);
        this.numberNonexistentExplorationsFromPlaylist = (
          responseData.numberOfNonexistentActivities.explorationPlaylist);
        this.numberNonexistentCollectionsFromPlaylist = (
          responseData.numberOfNonexistentActivities.collectionPlaylist);
        this.completedToIncompleteCollections = (
          responseData.completedToIncompleteCollections);
        this.threadSummaries = responseData.threadSummaries;
        this.numberOfUnreadThreads =
          responseData.numberOfUnreadThreads;
        this.explorationPlaylist = responseData.explorationPlaylist;
        this.collectionPlaylist = responseData.collectionPlaylist;
        this.activeSection = (
          LearnerDashboardPageConstants
            .LEARNER_DASHBOARD_SECTION_I18N_IDS.INCOMPLETE);
        this.activeSubsection = (
          LearnerDashboardPageConstants
            .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.EXPLORATIONS);
        this.feedbackThreadActive = false;

        this.noExplorationActivity = (
          (this.completedExplorationsList.length === 0) &amp;&amp;
            (this.incompleteExplorationsList.length === 0));
        this.noCollectionActivity = (
          (this.completedCollectionsList.length === 0) &amp;&amp;
            (this.incompleteCollectionsList.length === 0));
        this.noActivity = (
          (this.noExplorationActivity) &amp;&amp; (this.noCollectionActivity) &amp;&amp;
          (this.explorationPlaylist.length === 0) &amp;&amp;
          (this.collectionPlaylist.length === 0));
      }, errorResponseStatus =&gt; {
        if (
          AppConstants.FATAL_ERROR_CODES.indexOf(errorResponseStatus) !== -1) {
          this.alertsService.addWarning(
            &#x27;Failed to get learner dashboard data&#x27;);
        }
      }
    );

    Promise.all([
      userInfoPromise,
      dashboardDataPromise,
    ]).then(() =&gt; {
      setTimeout(() =&gt; {
        this.loaderService.hideLoadingScreen();
        // So that focus is applied after the loading screen has dissapeared.
        this.focusManagerService.setFocusWithoutScroll(&#x27;ourLessonsBtn&#x27;);
      }, 0);
    }).catch(errorResponse =&gt; {
      // This is placed here in order to satisfy Unit tests.
    });

    this.loadingFeedbacks = false;

    this.newMessage = {
      text: &#x27;&#x27;
    };
  }

  getStaticImageUrl(imagePath: string): string {
    return this.urlInterpolationService.getStaticImageUrl(imagePath);
  }

  setActiveSection(newActiveSectionName: string): void {
    this.activeSection = newActiveSectionName;
    if (this.activeSection ===
      LearnerDashboardPageConstants
        .LEARNER_DASHBOARD_SECTION_I18N_IDS.FEEDBACK &amp;&amp;
      this.feedbackThreadActive === true) {
      this.feedbackThreadActive = false;
    }
  }

  setActiveSubsection(newActiveSubsectionName: string): void {
    this.activeSubsection = newActiveSubsectionName;
  }

  getExplorationUrl(explorationId?: string): string {
    return &#x27;/explore/&#x27; + explorationId;
  }

  getCollectionUrl(collectionId?: string): string {
    return &#x27;/collection/&#x27; + collectionId;
  }

  checkMobileView(): boolean {
    return this.deviceInfoService.isMobileDevice();
  }

  getVisibleExplorationList(
      startCompletedExpIndex: number): LearnerExplorationSummary[] {
    return this.completedExplorationsList.slice(
      startCompletedExpIndex, Math.min(
        startCompletedExpIndex + this.PAGE_SIZE,
        this.completedExplorationsList.length));
  }

  showUsernamePopover(subscriberUsername: string): string {
    // The popover on the subscription card is only shown if the length
    // of the subscriber username is greater than 10 and the user hovers
    // over the truncated username.
    if (subscriberUsername.length &gt; 10) {
      return &#x27;mouseenter&#x27;;
    } else {
      return &#x27;none&#x27;;
    }
  }

  goToPreviousPage(section: string, subsection: string): void {
    if (section === LearnerDashboardPageConstants
      .LEARNER_DASHBOARD_SECTION_I18N_IDS.INCOMPLETE) {
      if (subsection === (
        LearnerDashboardPageConstants
          .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.EXPLORATIONS)) {
        this.startIncompleteExpIndex = Math.max(
          this.startIncompleteExpIndex - this.PAGE_SIZE, 0);
      } else if (
        subsection === (
          LearnerDashboardPageConstants
            .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.COLLECTIONS)) {
        this.startIncompleteCollectionIndex = Math.max(
          this.startIncompleteCollectionIndex - this.PAGE_SIZE, 0);
      }
    } else if (
      section === LearnerDashboardPageConstants
        .LEARNER_DASHBOARD_SECTION_I18N_IDS.COMPLETED) {
      if (subsection === (
        LearnerDashboardPageConstants
          .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.EXPLORATIONS)) {
        this.startCompletedExpIndex = Math.max(
          this.startCompletedExpIndex - this.PAGE_SIZE, 0);
      } else if (
        subsection === (
          LearnerDashboardPageConstants
            .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.COLLECTIONS)) {
        this.startCompletedCollectionIndex = Math.max(
          this.startCompletedCollectionIndex - this.PAGE_SIZE, 0);
      }
    }
  }

  goToNextPage(section: string, subsection: string): void {
    if (section === LearnerDashboardPageConstants
      .LEARNER_DASHBOARD_SECTION_I18N_IDS.INCOMPLETE) {
      if (subsection === (
        LearnerDashboardPageConstants
          .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.EXPLORATIONS)) {
        if (this.startIncompleteExpIndex +
          this.PAGE_SIZE &lt;= this.incompleteExplorationsList.length) {
          this.startIncompleteExpIndex += this.PAGE_SIZE;
        }
      } else if (
        subsection === (
          LearnerDashboardPageConstants
            .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.COLLECTIONS)) {
        if (this.startIncompleteCollectionIndex +
          this.PAGE_SIZE &lt;=
            this.incompleteCollectionsList.length) {
          this.startIncompleteCollectionIndex += this.PAGE_SIZE;
        }
      }
    } else if (
      section === LearnerDashboardPageConstants
        .LEARNER_DASHBOARD_SECTION_I18N_IDS.COMPLETED) {
      if (subsection === (
        LearnerDashboardPageConstants
          .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.EXPLORATIONS)) {
        if (this.startCompletedExpIndex +
          this.PAGE_SIZE &lt;= this.completedExplorationsList.length) {
          this.startCompletedExpIndex += this.PAGE_SIZE;
        }
      } else if (
        subsection === (
          LearnerDashboardPageConstants
            .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.COLLECTIONS)) {
        if (this.startCompletedCollectionIndex +
          this.PAGE_SIZE &lt;= this.completedCollectionsList.length) {
          this.startCompletedCollectionIndex += this.PAGE_SIZE;
        }
      }
    }
  }

  setExplorationsSortingOptions(sortType: string): void {
    if (sortType === this.currentExpSortType) {
      this.isCurrentExpSortDescending =
        !this.isCurrentExpSortDescending;
    } else {
      this.currentExpSortType = sortType;
    }
  }

  setSubscriptionSortingOptions(sortType: string): void {
    if (sortType === this.currentSubscribersSortType) {
      this.isCurrentSubscriptionSortDescending = (
        !this.isCurrentSubscriptionSortDescending);
    } else {
      this.currentSubscribersSortType = sortType;
    }
  }

  setFeedbackSortingOptions(sortType: string): void {
    if (sortType === this.currentFeedbackThreadsSortType) {
      this.isCurrentFeedbackSortDescending = (
        !this.isCurrentFeedbackSortDescending);
    } else {
      this.currentFeedbackThreadsSortType = sortType;
    }
  }

  getValueOfExplorationSortKey(): string {
    // &#x27;Last Played&#x27; is the default sorting operation
    // so we will return &#x27;default&#x27; to SortByPipe when Last Played
    // option is selected in the drop down menu.
    if (this.currentExpSortType ===
      LearnerDashboardPageConstants
        .EXPLORATIONS_SORT_BY_KEYS_AND_I18N_IDS.LAST_PLAYED.key) {
      return &#x27;default&#x27;;
    } else {
      return this.currentExpSortType;
    }
  }

  getValueOfSubscriptionSortKey(): string {
    // &#x27;Username&#x27; is the default sorting operation
    // so we will return &#x27;username&#x27; to SortByPipe when Username
    // option is selected in the drop down menu.
    return this.currentSubscribersSortType;
  }

  getValueOfFeedbackThreadSortKey(): string {
    // &#x27;Last Updated&#x27; is the default sorting operation
    // so we will return &#x27;lastUpdatedMsecs&#x27; to SortByPipe when Last Updated
    // option is selected in the drop down menu.
    return this.currentFeedbackThreadsSortType;
  }

  onClickThread(
      threadStatus: string, explorationId: string,
      threadId: string, explorationTitle: string): void {
    this.loadingFeedbacks = true;
    let threadDataUrl = this.urlInterpolationService.interpolateUrl(
      &#x27;/learnerdashboardthreadhandler/&lt;threadId&gt;&#x27;, {
        threadId: threadId
      });
    this.explorationTitle = explorationTitle;
    this.feedbackThreadActive = true;
    this.threadStatus = threadStatus;
    this.explorationId = explorationId;
    this.threadId = threadId;

    for (let index = 0; index &lt; this.threadSummaries.length; index++) {
      if (this.threadSummaries[index].threadId === threadId) {
        this.threadIndex = index;
        let threadSummary = this.threadSummaries[index];
        if (!threadSummary.lastMessageIsRead) {
          this.numberOfUnreadThreads -= 1;
        }
        threadSummary.markTheLastTwoMessagesAsRead();
      }
    }

    this.learnerDashboardBackendApiService.onClickThreadAsync(threadDataUrl)
      .then((messageSummaryList) =&gt; {
        let messageSummaryDicts = messageSummaryList;
        this.messageSummaries = [];
        for (let index = 0; index &lt; messageSummaryDicts.length; index++) {
          this.messageSummaries.push(
            FeedbackMessageSummary.createFromBackendDict(
              messageSummaryDicts[index]));
        }
        this.loadingFeedbacks = false;
      });
  }

  showAllThreads(): void {
    this.feedbackThreadActive = false;
    this.threadIndex = null;
  }

  addNewMessage(threadId: string, newMessage: string): void {
    let url = this.urlInterpolationService.interpolateUrl(
      &#x27;/threadhandler/&lt;threadId&gt;&#x27;, {
        threadId: threadId
      });
    let payload = {
      updated_status: null,
      updated_subject: null,
      text: newMessage
    };
    this.messageSendingInProgress = true;
    this.learnerDashboardBackendApiService
      .addNewMessageAsync(url, payload).then(() =&gt; {
        this.threadSummary = this.threadSummaries[this.threadIndex];
        this.threadSummary.appendNewMessage(
          newMessage, this.username);
        this.messageSendingInProgress = false;
        this.newMessage.text = null;
        let newMessageSummary = (
          FeedbackMessageSummary.createNewMessage(
            this.threadSummary.totalMessageCount, newMessage,
            this.username, String(this.profilePictureDataUrl)));
        this.messageSummaries.push(newMessageSummary);
      });
  }

  showSuggestionModal(
      newContent: string, oldContent: string, description: string): void {
    this.suggestionModalForLearnerDashboardService.showSuggestionModal(
      &#x27;edit_exploration_state_content&#x27;,
      {
        newContent: newContent,
        oldContent: oldContent,
        description: description
      }
    );
  }

  openRemoveActivityModal(
      sectionNameI18nId: string, subsectionName: string,
      activity: LearnerExplorationSummary | CollectionSummary): void {
    this.learnerDashboardActivityBackendApiService.removeActivityModalAsync(
      sectionNameI18nId, subsectionName,
      activity.id, activity.title)
      .then(() =&gt; {
        if (sectionNameI18nId ===
          LearnerDashboardPageConstants
            .LEARNER_DASHBOARD_SECTION_I18N_IDS.INCOMPLETE) {
          if (subsectionName ===
            LearnerDashboardPageConstants
              .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.EXPLORATIONS) {
            let index = this.incompleteExplorationsList.findIndex(
              exp =&gt; exp.id === activity.id);
            if (index !== -1) {
              this.incompleteExplorationsList.splice(index, 1);
            }
          } else if (subsectionName ===
            LearnerDashboardPageConstants
              .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.COLLECTIONS) {
            let index = this.incompleteCollectionsList.findIndex(
              collection =&gt; collection.id === activity.id);
            if (index !== -1) {
              this.incompleteCollectionsList.splice(index, 1);
            }
          }
        } else if (sectionNameI18nId ===
          LearnerDashboardPageConstants
            .LEARNER_DASHBOARD_SECTION_I18N_IDS.PLAYLIST) {
          if (subsectionName ===
            LearnerDashboardPageConstants
              .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.EXPLORATIONS) {
            let index = this.explorationPlaylist.findIndex(
              exp =&gt; exp.id === activity.id);
            if (index !== -1) {
              this.explorationPlaylist.splice(index, 1);
            }
          } else if (subsectionName ===
            LearnerDashboardPageConstants
              .LEARNER_DASHBOARD_SUBSECTION_I18N_IDS.COLLECTIONS) {
            let index = this.collectionPlaylist.findIndex(
              collection =&gt; collection.id === activity.id);
            if (index !== -1) {
              this.collectionPlaylist.splice(index, 1);
            }
          }
        }
      });
  }

  getLabelClass(status: string): string {
    return this.threadStatusDisplayService.getLabelClass(status);
  }

  getHumanReadableStatus(status: string): string {
    return this.threadStatusDisplayService.getHumanReadableStatus(status);
  }

  getLocaleAbbreviatedDatetimeString(millisSinceEpoch: number): string {
    return this.dateTimeFormatService.getLocaleAbbreviatedDatetimeString(
      millisSinceEpoch);
  }

  decodePngURIData(base64ImageData: string): string {
    return decodeURIComponent(base64ImageData);
  }
}

angular.module(&#x27;oppia&#x27;).directive(
  &#x27;oppiaLearnerDashboardPage&#x27;, downgradeComponent(
    {component: LearnerDashboardPageComponent}));
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;core/templates/pages/learner-dashboard-page/learner-dashboard-page.component.ts&quot;,&quot;line&quot;:250,&quot;character&quot;:9,&quot;text&quot;:&quot;errorResponseStatus&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/learner-dashboard-page/learner-dashboard-page.component.ts&quot;,&quot;line&quot;:268,&quot;character&quot;:13,&quot;text&quot;:&quot;errorResponse&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 17 Jun 2021 20:43:58 GMT</p>
    </body>
  </html>
  