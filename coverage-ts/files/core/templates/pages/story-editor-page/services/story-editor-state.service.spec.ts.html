
  <!DOCTYPE html>
  <html>
    <head>
      <title>story-editor-state.service.spec.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="negative"><td class="">core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts</td><td class="">56.82%</td><td class="">100%</td><td class="">440</td><td class="">250</td><td class="">190</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">// Copyright 2018 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an &quot;AS-IS&quot; BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileoverview Unit tests for StoryEditorStateService.
 */

import { fakeAsync, TestBed, tick } from &#x27;@angular/core/testing&#x27;;

import { Subscription } from &#x27;rxjs&#x27;;

import { StoryObjectFactory } from &#x27;domain/story/StoryObjectFactory&#x27;;
import { EditableStoryBackendApiService } from &#x27;domain/story/editable-story-backend-api.service&#x27;;
import { StoryEditorStateService } from &#x27;pages/story-editor-page/services/story-editor-state.service&#x27;;
import { TranslatorProviderForTests } from &#x27;tests/test.extras&#x27;;
import { importAllAngularServices } from &#x27;tests/unit-test-utils&#x27;;

require(&#x27;domain/story/story-update.service.ts&#x27;);

class MockEditableStoryBackendApiService {
  newBackendStoryObject = null;
  failure = null;

  async fetchStoryAsync() {
    return new Promise((resolve, reject) =&gt; {
      if (!this.failure) {
        resolve({
          story: this.newBackendStoryObject,
          topicName: &#x27;Topic Name&#x27;,
          storyIsPublished: false,
          skillSummaries: [{
            id: &#x27;Skill 1&#x27;,
            description: &#x27;Skill Description&#x27;
          }]
        });
      } else {
        reject();
      }
    });
  }

  async updateStoryAsync() {
    return new Promise((resolve, reject) =&gt; {
      if (!this.failure) {
        resolve(this.newBackendStoryObject);
      } else {
        reject();
      }
    });
  }

  async changeStoryPublicationStatusAsync() {
    return new Promise((resolve, reject) =&gt; {
      if (!this.failure) {
        resolve({});
      } else {
        reject();
      }
    });
  }
}

describe(&#x27;Story editor state service&#x27;, () =&gt; {
  var storyEditorStateService = null;
  var storyObjectFactory = null;
  var storyUpdateService = null;
  var fakeEditableStoryBackendApiService = null;
  var secondBackendStoryObject = null;
  var testSubscriptions: Subscription;

  importAllAngularServices();

  const storyInitializedSpy = jasmine.createSpy(&#x27;storyInitialized&#x27;);
  const storyReinitializedSpy = jasmine.createSpy(&#x27;storyReinitialized&#x27;);

  beforeEach(
    angular.mock.module(&#x27;oppia&#x27;, TranslatorProviderForTests));

  beforeEach(() =&gt; {
    fakeEditableStoryBackendApiService = (
      new MockEditableStoryBackendApiService());

    fakeEditableStoryBackendApiService.newBackendStoryObject = {
      id: &#x27;storyId_0&#x27;,
      title: &#x27;Story title&#x27;,
      description: &#x27;Story Description&#x27;,
      notes: &#x27;&lt;p&gt;Notes/p&gt;&#x27;,
      story_contents: {
        initial_node_id: &#x27;node_1&#x27;,
        next_node_id: &#x27;node_2&#x27;,
        nodes: []
      },
      language_code: &#x27;en&#x27;,
      story_contents_schema_version: &#x27;1&#x27;,
      version: &#x27;1&#x27;,
      corresponding_topic_id: &#x27;topic_id&#x27;
    };

    secondBackendStoryObject = {
      id: &#x27;storyId_1&#x27;,
      title: &#x27;Story title  2&#x27;,
      description: &#x27;Story Description 2&#x27;,
      notes: &#x27;&lt;p&gt;Notes 2/p&gt;&#x27;,
      story_contents: {
        initial_node_id: &#x27;node_2&#x27;,
        next_node_id: &#x27;node_1&#x27;,
        nodes: []
      },
      language_code: &#x27;en&#x27;,
      story_contents_schema_version: &#x27;1&#x27;,
      version: &#x27;1&#x27;,
      corresponding_topic_id: &#x27;topic_id&#x27;
    };

    TestBed.configureTestingModule({
      providers: [
        {
          provide: EditableStoryBackendApiService,
          useValue: fakeEditableStoryBackendApiService
        }
      ]
    }).compileComponents();

    storyEditorStateService = TestBed.get(StoryEditorStateService);
    storyObjectFactory = TestBed.get(StoryObjectFactory);
  });

  beforeEach(() =&gt; {
    testSubscriptions = new Subscription();
    testSubscriptions.add(storyEditorStateService.onStoryInitialized.subscribe(
      storyInitializedSpy));
    testSubscriptions.add(
      storyEditorStateService.onStoryReinitialized.subscribe(
        storyReinitializedSpy));
  });

  beforeEach(angular.mock.inject(function($injector) {
    storyUpdateService = $injector.get(&#x27;StoryUpdateService&#x27;);
  }));

  afterEach(() =&gt; {
    testSubscriptions.unsubscribe();
  });

  it(&#x27;should request to load the story from the backend&#x27;, () =&gt; {
    spyOn(
      fakeEditableStoryBackendApiService, &#x27;fetchStoryAsync&#x27;).and.callThrough();

    storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
    expect(
      fakeEditableStoryBackendApiService.fetchStoryAsync).toHaveBeenCalled();
  });

  it(
    &#x27;should fire an init event and set the topic name after loading the &#x27; +
    &#x27;first story&#x27;, fakeAsync(() =&gt; {
      storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
      tick(1000);
      expect(storyEditorStateService.getTopicName()).toEqual(&#x27;Topic Name&#x27;);
      expect(storyInitializedSpy).toHaveBeenCalled();
    }));

  it(&#x27;should fire an update event after loading more stories&#x27;, fakeAsync(() =&gt; {
    // Load initial story.
    storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
    tick(1000);

    // Load a second story.
    storyEditorStateService.loadStory(&#x27;storyId_1&#x27;);
    tick(1000);
    expect(storyReinitializedSpy).toHaveBeenCalled();
  }));

  it(&#x27;should track whether it is currently loading the story&#x27;, fakeAsync(() =&gt; {
    expect(storyEditorStateService.isLoadingStory()).toBe(false);

    storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
    expect(storyEditorStateService.isLoadingStory()).toBe(true);

    tick(1000);
    expect(storyEditorStateService.isLoadingStory()).toBe(false);
  }));

  it(&#x27;should indicate a story is no longer loading after an error&#x27;,
    fakeAsync(() =&gt; {
      expect(storyEditorStateService.isLoadingStory()).toBe(false);
      fakeEditableStoryBackendApiService.failure = &#x27;Internal 500 error&#x27;;

      storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
      expect(storyEditorStateService.isLoadingStory()).toBe(true);

      tick(1000);
      expect(storyEditorStateService.isLoadingStory()).toBe(false);
    }));

  it(&#x27;should report that a story has loaded through loadStory()&#x27;,
    fakeAsync(() =&gt; {
      expect(storyEditorStateService.hasLoadedStory()).toBe(false);

      storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
      expect(storyEditorStateService.hasLoadedStory()).toBe(false);

      tick(1000);
      expect(storyEditorStateService.hasLoadedStory()).toBe(true);
    }));

  it(&#x27;should report that a story has loaded through setStory()&#x27;, () =&gt; {
    expect(storyEditorStateService.hasLoadedStory()).toBe(false);

    var newStory = storyObjectFactory.createFromBackendDict(
      secondBackendStoryObject);
    storyEditorStateService.setStory(newStory);
    expect(storyEditorStateService.hasLoadedStory()).toBe(true);
  });

  it(&#x27;should initially return an interstitial story&#x27;, () =&gt; {
    var story = storyEditorStateService.getStory();
    expect(story.getId()).toEqual(null);
    expect(story.getTitle()).toEqual(&#x27;Story title loading&#x27;);
    expect(story.getDescription()).toEqual(&#x27;Story description loading&#x27;);
    expect(story.getNotes()).toEqual(&#x27;Story notes loading&#x27;);
    expect(story.getStoryContents()).toEqual(null);
  });

  it(&#x27;should be able to set a new story with an in-place copy&#x27;, () =&gt; {
    var previousStory = storyEditorStateService.getStory();
    var expectedStory = storyObjectFactory.createFromBackendDict(
      secondBackendStoryObject);
    expect(previousStory).not.toEqual(expectedStory);

    storyEditorStateService.setStory(expectedStory);

    var actualStory = storyEditorStateService.getStory();
    expect(actualStory).toEqual(expectedStory);

    expect(actualStory).toBe(previousStory);
    expect(actualStory).not.toBe(expectedStory);
  });

  it(&#x27;should fail to save the story without first loading one&#x27;, () =&gt; {
    expect(() =&gt; {
      storyEditorStateService.saveStory(&#x27;Commit message&#x27;);
    }).toThrowError(&#x27;Cannot save a story before one is loaded.&#x27;);
  });

  it(&#x27;should not save the story if there are no pending changes&#x27;,
    fakeAsync(() =&gt; {
      storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
      tick(1000);

      expect(storyEditorStateService.saveStory(&#x27;Commit message&#x27;)).toBe(false);
    }));

  it(&#x27;should be able to save the story and pending changes&#x27;, fakeAsync(() =&gt; {
    spyOn(
      fakeEditableStoryBackendApiService,
      &#x27;updateStoryAsync&#x27;).and.callThrough();

    storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
    storyUpdateService.setStoryTitle(
      storyEditorStateService.getStory(), &#x27;New title&#x27;);
    tick(1000);

    expect(
      storyEditorStateService.saveStory(&#x27;Commit message&#x27;)
    ).toBe(true);
    tick(1000);

    var expectedId = &#x27;storyId_0&#x27;;
    var expectedVersion = &#x27;1&#x27;;
    var expectedCommitMessage = &#x27;Commit message&#x27;;
    var updateStorySpy = (
      fakeEditableStoryBackendApiService.updateStoryAsync);
    expect(updateStorySpy).toHaveBeenCalledWith(
      expectedId, expectedVersion,
      expectedCommitMessage, jasmine.any(Object));
  }));

  it(&#x27;should be able to publish the story&#x27;, fakeAsync(() =&gt; {
    spyOn(
      fakeEditableStoryBackendApiService,
      &#x27;changeStoryPublicationStatusAsync&#x27;).and.callThrough();

    storyEditorStateService.loadStory(&#x27;topicId_1&#x27;, &#x27;storyId_0&#x27;);
    tick(1000);

    expect(storyEditorStateService.isStoryPublished()).toBe(false);
    expect(
      storyEditorStateService.changeStoryPublicationStatus(true)
    ).toBe(true);
    tick(1000);

    var expectedId = &#x27;storyId_0&#x27;;
    var publishStorySpy = (
      fakeEditableStoryBackendApiService.changeStoryPublicationStatusAsync);
    expect(publishStorySpy).toHaveBeenCalledWith(
      expectedId, true);
    expect(storyEditorStateService.isStoryPublished()).toBe(true);
  }));

  it(&#x27;should fire an update event after saving the story&#x27;, fakeAsync(() =&gt; {
    storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
    storyUpdateService.setStoryTitle(
      storyEditorStateService.getStory(), &#x27;New title&#x27;);
    tick(1000);

    storyEditorStateService.saveStory(&#x27;Commit message&#x27;);
    tick(1000);
    expect(storyReinitializedSpy).toHaveBeenCalled();
  }));

  it(&#x27;should track whether it is currently saving the story&#x27;, fakeAsync(() =&gt; {
    storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
    storyUpdateService.setStoryTitle(
      storyEditorStateService.getStory(), &#x27;New title&#x27;);
    tick(1000);

    expect(storyEditorStateService.isSavingStory()).toBe(false);
    storyEditorStateService.saveStory(&#x27;Commit message&#x27;);
    expect(storyEditorStateService.isSavingStory()).toBe(true);

    tick(1000);
    expect(storyEditorStateService.isSavingStory()).toBe(false);
  }));

  it(&#x27;should indicate a story is no longer saving after an error&#x27;,
    fakeAsync(() =&gt; {
      storyEditorStateService.loadStory(&#x27;storyId_0&#x27;);
      storyUpdateService.setStoryTitle(
        storyEditorStateService.getStory(), &#x27;New title&#x27;);
      tick(1000);

      expect(storyEditorStateService.isSavingStory()).toBe(false);
      fakeEditableStoryBackendApiService.failure = &#x27;Internal 500 error&#x27;;

      storyEditorStateService.saveStory(&#x27;Commit message&#x27;);
      expect(storyEditorStateService.isSavingStory()).toBe(true);

      tick(1000);
      expect(storyEditorStateService.isSavingStory()).toBe(false);
    }));
});
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:31,&quot;character&quot;:2,&quot;text&quot;:&quot;newBackendStoryObject&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:32,&quot;character&quot;:2,&quot;text&quot;:&quot;failure&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:36,&quot;character&quot;:16,&quot;text&quot;:&quot;failure&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:10,&quot;text&quot;:&quot;story&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:22,&quot;text&quot;:&quot;newBackendStoryObject&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:54,&quot;character&quot;:16,&quot;text&quot;:&quot;failure&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:55,&quot;character&quot;:21,&quot;text&quot;:&quot;newBackendStoryObject&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:64,&quot;character&quot;:16,&quot;text&quot;:&quot;failure&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:74,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:75,&quot;character&quot;:6,&quot;text&quot;:&quot;storyObjectFactory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:76,&quot;character&quot;:6,&quot;text&quot;:&quot;storyUpdateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:77,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:78,&quot;character&quot;:6,&quot;text&quot;:&quot;secondBackendStoryObject&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:90,&quot;character&quot;:4,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:93,&quot;character&quot;:4,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:93,&quot;character&quot;:39,&quot;text&quot;:&quot;newBackendStoryObject&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:109,&quot;character&quot;:4,&quot;text&quot;:&quot;secondBackendStoryObject&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:129,&quot;character&quot;:10,&quot;text&quot;:&quot;useValue&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:129,&quot;character&quot;:20,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:134,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:135,&quot;character&quot;:4,&quot;text&quot;:&quot;storyObjectFactory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:140,&quot;character&quot;:26,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:140,&quot;character&quot;:50,&quot;text&quot;:&quot;onStoryInitialized&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:140,&quot;character&quot;:69,&quot;text&quot;:&quot;subscribe&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:143,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:143,&quot;character&quot;:30,&quot;text&quot;:&quot;onStoryReinitialized&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:143,&quot;character&quot;:51,&quot;text&quot;:&quot;subscribe&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:147,&quot;character&quot;:42,&quot;text&quot;:&quot;$injector&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:148,&quot;character&quot;:4,&quot;text&quot;:&quot;storyUpdateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:148,&quot;character&quot;:25,&quot;text&quot;:&quot;$injector&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:148,&quot;character&quot;:35,&quot;text&quot;:&quot;get&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:157,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:157,&quot;character&quot;:61,&quot;text&quot;:&quot;and&quot;,&quot;kind&quot;:2},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:159,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:159,&quot;character&quot;:28,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:161,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:161,&quot;character&quot;:41,&quot;text&quot;:&quot;fetchStoryAsync&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:167,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:167,&quot;character&quot;:30,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:169,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:169,&quot;character&quot;:37,&quot;text&quot;:&quot;getTopicName&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:175,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:175,&quot;character&quot;:28,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:179,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:179,&quot;character&quot;:28,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:185,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:185,&quot;character&quot;:35,&quot;text&quot;:&quot;isLoadingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:187,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:187,&quot;character&quot;:28,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:188,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:188,&quot;character&quot;:35,&quot;text&quot;:&quot;isLoadingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:191,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:191,&quot;character&quot;:35,&quot;text&quot;:&quot;isLoadingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:196,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:196,&quot;character&quot;:37,&quot;text&quot;:&quot;isLoadingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:197,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:197,&quot;character&quot;:41,&quot;text&quot;:&quot;failure&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:199,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:199,&quot;character&quot;:30,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:200,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:200,&quot;character&quot;:37,&quot;text&quot;:&quot;isLoadingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:203,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:203,&quot;character&quot;:37,&quot;text&quot;:&quot;isLoadingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:208,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:208,&quot;character&quot;:37,&quot;text&quot;:&quot;hasLoadedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:210,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:210,&quot;character&quot;:30,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:211,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:211,&quot;character&quot;:37,&quot;text&quot;:&quot;hasLoadedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:214,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:214,&quot;character&quot;:37,&quot;text&quot;:&quot;hasLoadedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:218,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:218,&quot;character&quot;:35,&quot;text&quot;:&quot;hasLoadedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:220,&quot;character&quot;:8,&quot;text&quot;:&quot;newStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:220,&quot;character&quot;:19,&quot;text&quot;:&quot;storyObjectFactory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:220,&quot;character&quot;:38,&quot;text&quot;:&quot;createFromBackendDict&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:221,&quot;character&quot;:6,&quot;text&quot;:&quot;secondBackendStoryObject&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:222,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:222,&quot;character&quot;:28,&quot;text&quot;:&quot;setStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:222,&quot;character&quot;:37,&quot;text&quot;:&quot;newStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:223,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:223,&quot;character&quot;:35,&quot;text&quot;:&quot;hasLoadedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:227,&quot;character&quot;:8,&quot;text&quot;:&quot;story&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:227,&quot;character&quot;:16,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:227,&quot;character&quot;:40,&quot;text&quot;:&quot;getStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:228,&quot;character&quot;:11,&quot;text&quot;:&quot;story&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:228,&quot;character&quot;:17,&quot;text&quot;:&quot;getId&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:229,&quot;character&quot;:11,&quot;text&quot;:&quot;story&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:229,&quot;character&quot;:17,&quot;text&quot;:&quot;getTitle&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:230,&quot;character&quot;:11,&quot;text&quot;:&quot;story&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:230,&quot;character&quot;:17,&quot;text&quot;:&quot;getDescription&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:231,&quot;character&quot;:11,&quot;text&quot;:&quot;story&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:231,&quot;character&quot;:17,&quot;text&quot;:&quot;getNotes&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:232,&quot;character&quot;:11,&quot;text&quot;:&quot;story&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:232,&quot;character&quot;:17,&quot;text&quot;:&quot;getStoryContents&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:236,&quot;character&quot;:8,&quot;text&quot;:&quot;previousStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:236,&quot;character&quot;:24,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:236,&quot;character&quot;:48,&quot;text&quot;:&quot;getStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:237,&quot;character&quot;:8,&quot;text&quot;:&quot;expectedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:237,&quot;character&quot;:24,&quot;text&quot;:&quot;storyObjectFactory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:237,&quot;character&quot;:43,&quot;text&quot;:&quot;createFromBackendDict&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:238,&quot;character&quot;:6,&quot;text&quot;:&quot;secondBackendStoryObject&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:239,&quot;character&quot;:11,&quot;text&quot;:&quot;previousStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:239,&quot;character&quot;:26,&quot;text&quot;:&quot;not&quot;,&quot;kind&quot;:2},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:239,&quot;character&quot;:38,&quot;text&quot;:&quot;expectedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:241,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:241,&quot;character&quot;:28,&quot;text&quot;:&quot;setStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:241,&quot;character&quot;:37,&quot;text&quot;:&quot;expectedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:243,&quot;character&quot;:8,&quot;text&quot;:&quot;actualStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:243,&quot;character&quot;:22,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:243,&quot;character&quot;:46,&quot;text&quot;:&quot;getStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:244,&quot;character&quot;:11,&quot;text&quot;:&quot;actualStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:244,&quot;character&quot;:32,&quot;text&quot;:&quot;expectedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:246,&quot;character&quot;:11,&quot;text&quot;:&quot;actualStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:246,&quot;character&quot;:29,&quot;text&quot;:&quot;previousStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:247,&quot;character&quot;:11,&quot;text&quot;:&quot;actualStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:247,&quot;character&quot;:24,&quot;text&quot;:&quot;not&quot;,&quot;kind&quot;:2},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:247,&quot;character&quot;:33,&quot;text&quot;:&quot;expectedStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:252,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:252,&quot;character&quot;:30,&quot;text&quot;:&quot;saveStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:258,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:258,&quot;character&quot;:30,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:261,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:261,&quot;character&quot;:37,&quot;text&quot;:&quot;saveStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:266,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:267,&quot;character&quot;:26,&quot;text&quot;:&quot;and&quot;,&quot;kind&quot;:2},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:269,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:269,&quot;character&quot;:28,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:270,&quot;character&quot;:4,&quot;text&quot;:&quot;storyUpdateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:270,&quot;character&quot;:23,&quot;text&quot;:&quot;setStoryTitle&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:271,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:271,&quot;character&quot;:30,&quot;text&quot;:&quot;getStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:275,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:275,&quot;character&quot;:30,&quot;text&quot;:&quot;saveStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:282,&quot;character&quot;:8,&quot;text&quot;:&quot;updateStorySpy&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:283,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:283,&quot;character&quot;:41,&quot;text&quot;:&quot;updateStoryAsync&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:284,&quot;character&quot;:11,&quot;text&quot;:&quot;updateStorySpy&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:291,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:292,&quot;character&quot;:43,&quot;text&quot;:&quot;and&quot;,&quot;kind&quot;:2},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:294,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:294,&quot;character&quot;:28,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:297,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:297,&quot;character&quot;:35,&quot;text&quot;:&quot;isStoryPublished&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:299,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:299,&quot;character&quot;:30,&quot;text&quot;:&quot;changeStoryPublicationStatus&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:304,&quot;character&quot;:8,&quot;text&quot;:&quot;publishStorySpy&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:305,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:305,&quot;character&quot;:41,&quot;text&quot;:&quot;changeStoryPublicationStatusAsync&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:306,&quot;character&quot;:11,&quot;text&quot;:&quot;publishStorySpy&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:308,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:308,&quot;character&quot;:35,&quot;text&quot;:&quot;isStoryPublished&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:312,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:312,&quot;character&quot;:28,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:313,&quot;character&quot;:4,&quot;text&quot;:&quot;storyUpdateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:313,&quot;character&quot;:23,&quot;text&quot;:&quot;setStoryTitle&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:314,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:314,&quot;character&quot;:30,&quot;text&quot;:&quot;getStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:317,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:317,&quot;character&quot;:28,&quot;text&quot;:&quot;saveStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:323,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:323,&quot;character&quot;:28,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:324,&quot;character&quot;:4,&quot;text&quot;:&quot;storyUpdateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:324,&quot;character&quot;:23,&quot;text&quot;:&quot;setStoryTitle&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:325,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:325,&quot;character&quot;:30,&quot;text&quot;:&quot;getStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:328,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:328,&quot;character&quot;:35,&quot;text&quot;:&quot;isSavingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:329,&quot;character&quot;:4,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:329,&quot;character&quot;:28,&quot;text&quot;:&quot;saveStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:330,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:330,&quot;character&quot;:35,&quot;text&quot;:&quot;isSavingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:333,&quot;character&quot;:11,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:333,&quot;character&quot;:35,&quot;text&quot;:&quot;isSavingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:338,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:338,&quot;character&quot;:30,&quot;text&quot;:&quot;loadStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:339,&quot;character&quot;:6,&quot;text&quot;:&quot;storyUpdateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:339,&quot;character&quot;:25,&quot;text&quot;:&quot;setStoryTitle&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:340,&quot;character&quot;:8,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:340,&quot;character&quot;:32,&quot;text&quot;:&quot;getStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:343,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:343,&quot;character&quot;:37,&quot;text&quot;:&quot;isSavingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:344,&quot;character&quot;:6,&quot;text&quot;:&quot;fakeEditableStoryBackendApiService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:344,&quot;character&quot;:41,&quot;text&quot;:&quot;failure&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:346,&quot;character&quot;:6,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:346,&quot;character&quot;:30,&quot;text&quot;:&quot;saveStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:347,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:347,&quot;character&quot;:37,&quot;text&quot;:&quot;isSavingStory&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:350,&quot;character&quot;:13,&quot;text&quot;:&quot;storyEditorStateService&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/templates/pages/story-editor-page/services/story-editor-state.service.spec.ts&quot;,&quot;line&quot;:350,&quot;character&quot;:37,&quot;text&quot;:&quot;isSavingStory&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 17 Jun 2021 20:43:59 GMT</p>
    </body>
  </html>
  