
  <!DOCTYPE html>
  <html>
    <head>
      <title>karma.conf.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="negative"><td class="">core/tests/karma.conf.ts</td><td class="">91.30%</td><td class="">100%</td><td class="">92</td><td class="">84</td><td class="">8</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">var argv = require(&#x27;yargs&#x27;).argv;
var generatedJs = &#x27;third_party/generated/js/third_party.js&#x27;;
if (argv.prodEnv) {
  generatedJs = (
    &#x27;third_party/generated/js/third_party.min.js&#x27;);
}

module.exports = function(config) {
  config.set({
    basePath: &#x27;../../&#x27;,
    frameworks: [&#x27;jasmine&#x27;],
    files: [
      // Constants must be loaded before everything else.
      // Since jquery, angular-mocks and math-expressions
      // are not bundled, they will be treated separately.
      &#x27;third_party/static/jquery-3.5.1/jquery.min.js&#x27;,
      &#x27;third_party/static/angularjs-1.8.2/angular.js&#x27;,
      &#x27;core/templates/karma.module.ts&#x27;,
      &#x27;third_party/static/angularjs-1.8.2/angular-mocks.js&#x27;,
      generatedJs,
      // Note that unexpected errors occur (&quot;Cannot read property &#x27;num&#x27; of
      // undefined&quot; in MusicNotesInput.js) if the order of core/templates/...
      // and extensions/... are switched. The test framework may be flaky.
      &#x27;core/templates/**/*_directive.html&#x27;,
      &#x27;core/templates/**/*.directive.html&#x27;,
      &#x27;core/templates/**/*.component.html&#x27;,
      &#x27;core/templates/**/*.template.html&#x27;,
      // This is a file that is generated on running the run_frontend_tests.py
      // script. This generated file is a combination of all the spec files
      // since Karma is unable to run tests on multiple files due to some
      // unknown reason.
      &#x27;core/templates/combined-tests.spec.ts&#x27;,
      {
        pattern: &#x27;extensions/**/*.png&#x27;,
        watched: false,
        served: true,
        included: false
      },
      &#x27;extensions/interactions/**/*.directive.html&#x27;,
      &#x27;extensions/interactions/**/*.component.html&#x27;,
      &#x27;extensions/interactions/*.json&#x27;,
      &#x27;core/tests/data/*.json&#x27;,
      {
        pattern: &#x27;assets/i18n/**/*.json&#x27;,
        watched: true,
        served: true,
        included: false
      }
    ],
    exclude: [
      &#x27;local_compiled_js/core/templates/**/*-e2e.js&#x27;,
      &#x27;local_compiled_js/extensions/**/protractor.js&#x27;,
      &#x27;backend_prod_files/extensions/**&#x27;,
      &#x27;extensions/classifiers/proto/*&#x27;
    ],
    proxies: {
      // Karma serves files under the /base directory.
      // We access files directly in our code, for example /folder/,
      // so we need to proxy the requests from /folder/ to /base/folder/.
      &#x27;/assets/&#x27;: &#x27;/base/assets/&#x27;,
      &#x27;/extensions/&#x27;: &#x27;/base/extensions/&#x27;
    },
    preprocessors: {
      &#x27;core/templates/*.ts&#x27;: [&#x27;webpack&#x27;],
      &#x27;core/templates/**/*.ts&#x27;: [&#x27;webpack&#x27;],
      &#x27;extensions/**/*.ts&#x27;: [&#x27;webpack&#x27;],
      // Note that these files should contain only directive templates, and no
      // Jinja expressions. They should also be specified within the &#x27;files&#x27;
      // list above.
      &#x27;core/templates/**/*_directive.html&#x27;: [&#x27;ng-html2js&#x27;],
      &#x27;core/templates/**/*.directive.html&#x27;: [&#x27;ng-html2js&#x27;],
      &#x27;core/templates/**/*.component.html&#x27;: [&#x27;ng-html2js&#x27;],
      &#x27;core/templates/**/*.template.html&#x27;: [&#x27;ng-html2js&#x27;],
      &#x27;extensions/interactions/**/*.directive.html&#x27;: [&#x27;ng-html2js&#x27;],
      &#x27;extensions/interactions/**/*.component.html&#x27;: [&#x27;ng-html2js&#x27;],
      &#x27;extensions/interactions/*.json&#x27;: [&#x27;json_fixtures&#x27;],
      &#x27;core/tests/data/*.json&#x27;: [&#x27;json_fixtures&#x27;]
    },
    reporters: [&#x27;coverage-istanbul&#x27;],
    coverageIstanbulReporter: {
      reports: [&#x27;html&#x27;, &#x27;json&#x27;, &#x27;lcovonly&#x27;],
      dir: &#x27;../karma_coverage_reports/&#x27;,
      fixWebpackSourcePaths: true,
      &#x27;report-config&#x27;: {
        html: { outdir: &#x27;html&#x27; }
      }
    },
    autoWatch: true,
    browsers: [&#x27;CI_Chrome&#x27;],
    // Kill the browser if it does not capture in the given timeout [ms].
    captureTimeout: 60000,
    browserNoActivityTimeout: 120000,
    browserDisconnectTimeout: 60000,
    browserDisconnectTolerance: 3,
    browserConsoleLogOptions: {
      // To print debugging information, use `console.error`. We don&#x27;t
      // output `log` level logs to avoid printing out success messages
      // for every passing spec.
      level: &#x27;error&#x27;,
      format: &#x27;%b %T: %m&#x27;,
      terminal: true
    },
    // Continue running in the background after running tests.
    singleRun: true,
    customLaunchers: {
      CI_Chrome: {
        base: &#x27;ChromeHeadless&#x27;,
        // Discussion of the necessity of extra flags can be found here:
        // https://github.com/karma-runner/karma-chrome-launcher/issues/154
        // https://github.com/karma-runner/karma-chrome-launcher/issues/180
        flags: [
          &#x27;--no-sandbox&#x27;,
          &#x27;--disable-gpu&#x27;,
          &#x27;--disable-dev-shm-usage&#x27;,
          &#x27;--js-flags=--max-old-space-size=2048&#x27;
        ]
      }
    },

    plugins: [
      &#x27;karma-coverage-istanbul-reporter&#x27;,
      &#x27;karma-jasmine&#x27;,
      &#x27;karma-chrome-launcher&#x27;,
      &#x27;karma-ng-html2js-preprocessor&#x27;,
      &#x27;karma-json-fixtures-preprocessor&#x27;,
      &#x27;karma-coverage&#x27;,
      &#x27;karma-webpack&#x27;
    ],
    ngHtml2JsPreprocessor: {
      moduleName: &#x27;directiveTemplates&#x27;,
      // Key ngHtml2JsPreprocessor adds the html inside $templateCache,
      // the key that we use for that cache needs to be exactly the same as
      // the templateUrl in directive JS. The stripPrefix and prependPrefix are
      // used for modifying the $templateCache keys.
      // If the key starts with core/ we need to get rid of that.
      stripPrefix: &#x27;core/&#x27;,
      // Every key must start with /.
      prependPrefix: &#x27;/&#x27;,
    },
    jsonFixturesPreprocessor: {
      variableName: &#x27;__fixtures__&#x27;
    },

    webpack: {
      mode: &#x27;development&#x27;,
      resolve: {
        modules: [
          &#x27;core/tests/data&#x27;,
          &#x27;assets&#x27;,
          &#x27;core/templates&#x27;,
          &#x27;extensions&#x27;,
          &#x27;node_modules&#x27;,
          &#x27;third_party&#x27;,
        ],
        extensions: [&#x27;.ts&#x27;, &#x27;.js&#x27;, &#x27;.json&#x27;, &#x27;.html&#x27;, &#x27;.svg&#x27;, &#x27;.png&#x27;],
        alias: {
          // These both are used so that we can refer to them in imports using
          // their full path: &#x27;assets/{{filename}}&#x27;.
          &#x27;assets/constants&#x27;: &#x27;constants.ts&#x27;,
          &#x27;assets/rich_text_components_definitions&#x27;:
            &#x27;rich_text_components_definitions.ts&#x27;
        }
      },
      devtool: &#x27;inline-cheap-source-map&#x27;,
      module: {
        rules: [
          {
            test: /\.ts$/,
            use: [
              &#x27;cache-loader&#x27;,
              {
                loader: &#x27;ts-loader&#x27;,
                options: {
                  // Typescript checks do the type checking.
                  transpileOnly: true
                }
              },
              {
                loader: &#x27;angular2-template-loader&#x27;
              }
            ]
          },
          {
            test: /\.html$/,
            exclude: /(directive|component)\.html$/,
            loader: &#x27;underscore-template-loader&#x27;
          },
          {
            test: /(directive|component)\.html$/,
            loader: &#x27;html-loader&#x27;,
            options: {
              attributes: false,
            },
          },
          {
            // Exclude all the spec files from the report.
            test: /^(?!.*(s|S)pec\.ts$).*\.ts$/,
            enforce: &#x27;post&#x27;,
            use: {
              loader: &#x27;istanbul-instrumenter-loader&#x27;,
              options: { esModules: true }
            }
          },
          {
            test: /\.css$/,
            use: [
              {
                loader: &#x27;style-loader&#x27;,
                options: {
                  esModule: false
                }
              },
              {
                loader: &#x27;css-loader&#x27;,
                options: {
                  url: false,
                }
              }
            ]
          }
        ]
      }
    }
  });
};
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;core/tests/karma.conf.ts&quot;,&quot;line&quot;:0,&quot;character&quot;:4,&quot;text&quot;:&quot;argv&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/tests/karma.conf.ts&quot;,&quot;line&quot;:0,&quot;character&quot;:28,&quot;text&quot;:&quot;argv&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/tests/karma.conf.ts&quot;,&quot;line&quot;:2,&quot;character&quot;:4,&quot;text&quot;:&quot;argv&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/tests/karma.conf.ts&quot;,&quot;line&quot;:2,&quot;character&quot;:9,&quot;text&quot;:&quot;prodEnv&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/tests/karma.conf.ts&quot;,&quot;line&quot;:7,&quot;character&quot;:7,&quot;text&quot;:&quot;exports&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/tests/karma.conf.ts&quot;,&quot;line&quot;:7,&quot;character&quot;:26,&quot;text&quot;:&quot;config&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/tests/karma.conf.ts&quot;,&quot;line&quot;:8,&quot;character&quot;:2,&quot;text&quot;:&quot;config&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;core/tests/karma.conf.ts&quot;,&quot;line&quot;:8,&quot;character&quot;:9,&quot;text&quot;:&quot;set&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 17 Jun 2021 20:43:53 GMT</p>
    </body>
  </html>
  