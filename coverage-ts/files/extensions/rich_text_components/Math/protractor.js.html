
  <!DOCTYPE html>
  <html>
    <head>
      <title>protractor.js</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="negative"><td class="">extensions/rich_text_components/Math/protractor.js</td><td class="">43.66%</td><td class="">100%</td><td class="">71</td><td class="">31</td><td class="">40</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">// Copyright 2014 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an &quot;AS-IS&quot; BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileoverview Utilities for using the Math component during
 * end-to-end testing with Protractor.js
 */

var objects = require(process.cwd() + &#x27;/extensions/objects/protractor.js&#x27;);
var waitFor = require(
  process.cwd() + &#x27;/core/tests/protractor_utils/waitFor.js&#x27;);
var request = require(&#x27;request&#x27;);

var customizeComponent = async function(modal, rawLatex) {
  await (objects.MathExpressionContentEditor(
    modal.element(by.tagName(&#x27;math-expression-content-editor&#x27;))
  ).setValue(rawLatex));
};

// This function is used to convert the escaped Json to unescaped object.
// This is required because the customizationArg value which we get initially
// from the Math rich text component is in escaped format and we need to
// convert it to unescaped format.
var escapedJsonToObj = function(json) {
  return (JSON.parse((
    json.toString())
    .replace(/&amp;quot;/g, &#x27;&quot;&#x27;)
    .replace(/&amp;#39;/g, &#x27;\&#x27;&#x27;)
    .replace(/&amp;lt;/g, &#x27;&lt;&#x27;)
    .replace(/&amp;gt;/g, &#x27;&gt;&#x27;)
    .replace(/&amp;amp;/g, &#x27;&amp;&#x27;)));
};
const SVGTAGS = {
  &#x27;x^2 + y^2&#x27;: (
    &#x27;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;7.485ex&quot; height=&quot;2.85ex&quot; &#x27; +
    &#x27;viewBox=&quot;0 -919.2 3222.8 1226.9&quot; focusable=&quot;false&quot; style=&quot;vertical-align&#x27; +
    &#x27;: -0.715ex;&quot;&gt;&lt;g stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-widt&#x27; +
    &#x27;h=&quot;0&quot; transform=&quot;matrix(1 0 0 -1 0 0)&quot;&gt;&lt;path stroke-width=&quot;10&quot; d=&quot;M52 2&#x27; +
    &#x27;89Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 4&#x27; +
    &#x27;42 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415&#x27; +
    &#x27; 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q29&#x27; +
    &#x27;0 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151&#x27; +
    &#x27;T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 &#x27; +
    &#x27;-11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q&#x27; +
    &#x27;142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132&#x27; +
    &#x27; 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 38&#x27; +
    &#x27;0 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284&#x27; +
    &#x27; 52 289Z&quot;/&gt;&lt;g transform=&quot;translate(577,362)&quot;&gt;&lt;path stroke-width=&quot;10&quot; tr&#x27; +
    &#x27;ansform=&quot;scale(0.707)&quot; d=&quot;M109 429Q82 429 66 447T50 491Q50 562 103 614T&#x27; +
    &#x27;235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210&#x27; +
    &#x27; 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183&#x27; +
    &#x27; 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 &#x27; +
    &#x27;174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343&#x27; +
    &#x27; 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 11&#x27; +
    &#x27;4 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z&quot;/&gt;&lt;/g&gt;&lt;g transfor&#x27; +
    &#x27;m=&quot;translate(1256,0)&quot;&gt;&lt;path stroke-width=&quot;10&quot; d=&quot;M56 237T56 250T70 270H3&#x27; +
    &#x27;69V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T7&#x27; +
    &#x27;07 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 &#x27; +
    &#x27;250Z&quot;/&gt;&lt;/g&gt;&lt;g transform=&quot;translate(2261,0)&quot;&gt;&lt;path stroke-width=&quot;10&quot; d=&quot;M&#x27; +
    &#x27;21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247&#x27; +
    &#x27; 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T&#x27; +
    &#x27;312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q43&#x27; +
    &#x27;2 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q36&#x27; +
    &#x27;3 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T8&#x27; +
    &#x27;9 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -14&#x27; +
    &#x27;8Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290&#x27; +
    &#x27; -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 15&#x27; +
    &#x27;0 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 3&#x27; +
    &#x27;90 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 2&#x27; +
    &#x27;78 41 278H27Q21 284 21 287Z&quot;/&gt;&lt;g transform=&quot;translate(504,362)&quot;&gt;&lt;path st&#x27; +
    &#x27;roke-width=&quot;10&quot; transform=&quot;scale(0.707)&quot; d=&quot;M109 429Q82 429 66 447T50 49&#x27; +
    &#x27;1Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315&#x27; +
    &#x27;T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H&#x27; +
    &#x27;449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 13&#x27; +
    &#x27;7Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 40&#x27; +
    &#x27;1T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 55&#x27; +
    &#x27;0Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z&quot;/&gt;&lt;/g&#x27; +
    &#x27;&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&#x27;)
};

var expectComponentDetailsToMatch = async function(elem, rawLatex) {
  // TODO(Jacob): Check that the actual latex being displayed is correct.
  var mathComponent = await elem.getAttribute(&#x27;math_content-with-value&#x27;);
  expect(escapedJsonToObj(mathComponent).raw_latex).toBe(rawLatex);
  var mathSvgImage = elem.element(by.css(&#x27;.protractor-test-math-svg&#x27;));
  await waitFor.visibilityOf(
    mathSvgImage,
    &#x27;Math SVG takes too long to load.&#x27;);
  var src = await mathSvgImage.getAttribute(&#x27;src&#x27;);
  await request(src, function(error, response, body) {
    expect(body).toBe(SVGTAGS[rawLatex]);
  });
};

exports.customizeComponent = customizeComponent;
exports.expectComponentDetailsToMatch = expectComponentDetailsToMatch;
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:19,&quot;character&quot;:4,&quot;text&quot;:&quot;objects&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:20,&quot;character&quot;:4,&quot;text&quot;:&quot;waitFor&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:24,&quot;character&quot;:40,&quot;text&quot;:&quot;modal&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:24,&quot;character&quot;:47,&quot;text&quot;:&quot;rawLatex&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:25,&quot;character&quot;:9,&quot;text&quot;:&quot;objects&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:25,&quot;character&quot;:17,&quot;text&quot;:&quot;MathExpressionContentEditor&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:26,&quot;character&quot;:4,&quot;text&quot;:&quot;modal&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:26,&quot;character&quot;:10,&quot;text&quot;:&quot;element&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:27,&quot;character&quot;:4,&quot;text&quot;:&quot;setValue&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:27,&quot;character&quot;:13,&quot;text&quot;:&quot;rawLatex&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:34,&quot;character&quot;:32,&quot;text&quot;:&quot;json&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:36,&quot;character&quot;:4,&quot;text&quot;:&quot;json&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:37,&quot;character&quot;:5,&quot;text&quot;:&quot;replace&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:38,&quot;character&quot;:5,&quot;text&quot;:&quot;replace&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:39,&quot;character&quot;:5,&quot;text&quot;:&quot;replace&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:40,&quot;character&quot;:5,&quot;text&quot;:&quot;replace&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:41,&quot;character&quot;:5,&quot;text&quot;:&quot;replace&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:91,&quot;character&quot;:51,&quot;text&quot;:&quot;elem&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:91,&quot;character&quot;:57,&quot;text&quot;:&quot;rawLatex&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:93,&quot;character&quot;:6,&quot;text&quot;:&quot;mathComponent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:93,&quot;character&quot;:28,&quot;text&quot;:&quot;elem&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:93,&quot;character&quot;:33,&quot;text&quot;:&quot;getAttribute&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:94,&quot;character&quot;:26,&quot;text&quot;:&quot;mathComponent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:94,&quot;character&quot;:41,&quot;text&quot;:&quot;raw_latex&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:94,&quot;character&quot;:57,&quot;text&quot;:&quot;rawLatex&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:95,&quot;character&quot;:6,&quot;text&quot;:&quot;mathSvgImage&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:95,&quot;character&quot;:21,&quot;text&quot;:&quot;elem&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:95,&quot;character&quot;:26,&quot;text&quot;:&quot;element&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:96,&quot;character&quot;:8,&quot;text&quot;:&quot;waitFor&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:96,&quot;character&quot;:16,&quot;text&quot;:&quot;visibilityOf&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:97,&quot;character&quot;:4,&quot;text&quot;:&quot;mathSvgImage&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:99,&quot;character&quot;:6,&quot;text&quot;:&quot;src&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:99,&quot;character&quot;:18,&quot;text&quot;:&quot;mathSvgImage&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:99,&quot;character&quot;:31,&quot;text&quot;:&quot;getAttribute&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:100,&quot;character&quot;:16,&quot;text&quot;:&quot;src&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:100,&quot;character&quot;:30,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:100,&quot;character&quot;:37,&quot;text&quot;:&quot;response&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:100,&quot;character&quot;:47,&quot;text&quot;:&quot;body&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:101,&quot;character&quot;:11,&quot;text&quot;:&quot;body&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;extensions/rich_text_components/Math/protractor.js&quot;,&quot;line&quot;:101,&quot;character&quot;:30,&quot;text&quot;:&quot;rawLatex&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 17 Jun 2021 20:44:00 GMT</p>
    </body>
  </html>
  