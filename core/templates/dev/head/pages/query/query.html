{% extends 'pages/base.html' %}

{% block maintitle %}
  Query - Oppia
{% endblock maintitle %}

{% block header_js %}
  {{ super() }}
  <style>
    html, body {
      background-color: #f2f2ee;
    }

    .form-warning {
      color:  #ff0000;
    }

    .oppia-query-form {
      text-align: center;
    }
  </style>
{% endblock header_js %}

{% block navbar_breadcrumb %}
  <ul class="nav navbar-nav oppia-navbar-breadcrumb">
    <li>
      <span class="oppia-navbar-breadcrumb-separator"></span>
      Query
    </li>
  </ul>
{% endblock navbar_breadcrumb %}

{% block content %}
  <div class="oppia-query-form" ng-controller="Query">
    <p class="form-warning" ng-if="showWarning">*Please enter numeric data only.</p>
    <form class="form">
      Has not logged in for n days: <input type="text" ng-model="has_not_logged_in_for_n_days">
      <br/>
      Inactive in last n days: <input type="text" ng-model="inactive_in_last_n_days">
      <br/>
      Has created at least n exps: <input type="text" ng-model="created_at_least_n_exps">
      <br/>
      Has created fewer than n exps: <input type="text" ng-model="created_fewer_than_n_exps">
      <br/>
      Has edited at least n exps: <input type="text" ng-model="edited_at_least_n_exps">
      <br/>
      Has edited fewer than n exps: <input type="text" ng-model="edited_fewer_than_n_exps">
      <br/>
      <input type="button" value="submit query" ng-click="submitQuery()">
      <p ng-if="showSuccessMessage">Query has been submitted. Please reload recent queries to see its status.</p>
      <div class="oppia-recent-queries">
        <p>Recent queries:</p>
        <table class="table" ng-if="displayRecentQueries > 0">
          <thead>
            <tr>
              <td>Query id</td>
              <td>Submitted on</td>
              <td>Submitted by</td>
              <td>Status</td>
              <td>No. of qualified users</td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="q in recentQueries">
              <td><[q.id]></td>
              <td><[q.created_on]></td>
              <td><[q.submitter_id]></td>
              <td><[q.status]></td>
              <td><[q.qualified_users]></td>
            </tr>
          </tbody>
        </table>
        <button ng-if="recentQueryOffset!=0" ng-click="previousRecentQueries()">Previous</button>
        <button ng-click="refreshRecentQueries()">Reload</button>
        <button ng-click="nextRecentQueries()">Next</button>
      </div>
    </form>
  </div>
{% endblock %}

{% block footer %}
{% endblock %}

{% block footer_js %}
  {{ super() }}
  <script src="{{TEMPLATE_DIR_PREFIX}}/pages/query/Query.js"></script>
{% endblock footer_js %}
