{% extends 'pages/base.html' %}

{% block maintitle %}
  {% if title %}
    {{ title }} - Oppia Editor
  {% else %}
    Untitled Collection - Oppia Editor
  {% endif %}
{% endblock maintitle %}

{% block header_js %}
  {{ super() }}
  <script type="text/javascript">
    GLOBALS.collectionId = JSON.parse('{{collection_id|js_string}}');
    GLOBALS.TAG_REGEX = JSON.parse('{{TAG_REGEX|js_string}}');
  </script>
{% endblock header_js %}

{% block navbar_breadcrumb %}
  <collection-editor-navbar-breadcrumb>
  </collection-editor-navbar-breadcrumb>
{% endblock navbar_breadcrumb %}

{% block local_top_nav_options %}
  <collection-editor-navbar>
  </collection-editor-navbar>
{% endblock local_top_nav_options %}

{% block content %}
  <div ng-controller="CollectionEditor">
    <div ng-if="getActiveTabName() === 'main'">
      <collection-editor-tab></collection-editor-tab>
    </div>

    <div ng-show="getActiveTabName() === 'settings'">
      <collection-settings-tab></collection-settings-tab>
    </div>

    <div ng-show="getActiveTabName() === 'history'">
      <collection-history-tab></collection-history-tab>
    </div>

    <div ng-show="getActiveTabName() === 'stats'">
      <collection-statistics-tab></collection-statistics-tab>
    </div>
  </div>

{% endblock content %}

{% block footer_js %}
  {{ super() }}
  <script src="/templates/dev/head/filters/string-utility-filters/camel-case-to-hyphens.filter.js"></script>
  <script src="/templates/dev/head/filters/string-utility-filters/convert-to-plain-text.filter.js"></script>
  <script src="/templates/dev/head/filters/string-utility-filters/normalize-whitespace.filter.js"></script>
  <script src="/templates/dev/head/filters/string-utility-filters/normalize-whitespace-punctuation-and-case.filter.js"></script>
  <script src="/templates/dev/head/filters/string-utility-filters/truncate-at-first-line.filter.js"></script>
  <script src="/templates/dev/head/filters/string-utility-filters/underscores-to-camel-case.filter.js"></script>

  <script src="/templates/dev/head/expressions/ExpressionSyntaxTreeService.js"></script>
  <script src="/templates/dev/head/expressions/ExpressionEvaluatorService.js"></script>
  <script src="/templates/dev/head/expressions/ExpressionParserService.js"></script>
  <script src="/templates/dev/head/expressions/ExpressionInterpolationService.js"></script>

  <script src="/templates/dev/head/pages/collection_editor/CollectionEditor.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/CollectionEditorNavbarBreadcrumbDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/CollectionEditorNavbarDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/CollectionEditorStateService.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/editor_tab/CollectionEditorTabDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/editor_tab/CollectionLinearizerService.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/editor_tab/CollectionNodeCreatorDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/editor_tab/CollectionNodeEditorDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/history_tab/CollectionHistoryTabDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/settings_tab/CollectionDetailsEditorDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/settings_tab/CollectionPermissionsCardDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/settings_tab/CollectionSettingsTabDirective.js"></script>
  <script src="/templates/dev/head/pages/collection_editor/statistics_tab/CollectionStatisticsTabDirective.js"></script>

  <script src="/templates/dev/head/domain/collection/CollectionNodeObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/collection/CollectionObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/collection/CollectionRightsBackendApiService.js"></script>
  <script src="/templates/dev/head/domain/collection/CollectionRightsObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/collection/CollectionUpdateService.js"></script>
  <script src="/templates/dev/head/domain/collection/CollectionValidationService.js"></script>
  <script src="/templates/dev/head/domain/collection/EditableCollectionBackendApiService.js"></script>
  <script src="/templates/dev/head/domain/collection/ReadOnlyCollectionBackendApiService.js"></script>
  <script src="/templates/dev/head/domain/collection/SearchExplorationsBackendApiService.js"></script>
  <script src="/templates/dev/head/domain/editor/undo_redo/ChangeObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/editor/undo_redo/UndoRedoService.js"></script>
  <script src="/templates/dev/head/domain/editor/undo_redo/QuestionUndoRedoService.js"></script>
  <script src="/templates/dev/head/domain/editor/undo_redo/BaseUndoRedoService.js"></script>
  <script src="/templates/dev/head/domain/exploration/AudioTranslationObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/VoiceoverObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/state/StateObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/InteractionObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/objects/FractionObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/objects/NumberWithUnitsObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/objects/UnitsObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/AnswerGroupObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/RecordedVoiceoversObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/WrittenTranslationObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/WrittenTranslationsObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/SubtitledHtmlObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/EditableExplorationBackendApiService.js"></script>
  <script src="/templates/dev/head/domain/exploration/ReadOnlyExplorationBackendApiService.js"></script>
  <script src="/templates/dev/head/domain/exploration/RuleObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/HintObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/SolutionObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/StatesObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/OutcomeObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/ParamChangeObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/ParamChangesObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/ParamSpecObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/ParamSpecsObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/ParamTypeObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/exploration/ExplorationDraftObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/summary/ExplorationSummaryBackendApiService.js"></script>
  <script src="/templates/dev/head/domain/utilities/BrowserCheckerService.js"></script>

  <script src="/templates/dev/head/pages/exploration_player/AnswerClassificationService.js"></script>
  <script src="/templates/dev/head/pages/exploration_player/LearnerParamsService.js"></script>

  <script src="/templates/dev/head/domain/utilities/LanguageUtilService.js"></script>
  <script src="/templates/dev/head/domain/utilities/AudioLanguageObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/utilities/AutogeneratedAudioLanguageObjectFactory.js"></script>

  <script src="/templates/dev/head/components/forms/forms-unicode-filters/convert-unicode-with-params-to-html.filter.js"></script>
  <script src="/templates/dev/head/components/forms/forms-unicode-filters/convert-html-to-unicode.filter.js"></script>
  <script src="/templates/dev/head/components/forms/forms-unicode-filters/convert-unicode-to-html.filter.js"></script>
  <script src="/templates/dev/head/components/forms/forms-validators/is-at-least.filter.js"></script>
  <script src="/templates/dev/head/components/forms/forms-validators/is-at-most.filter.js"></script>
  <script src="/templates/dev/head/components/forms/forms-validators/is-float.filter.js"></script>
  <script src="/templates/dev/head/components/forms/forms-validators/is-integer.filter.js"></script>
  <script src="/templates/dev/head/components/forms/forms-validators/is-nonempty.filter.js"></script>




  {# TODO(bhenning): Remove these once RouterServices is decoupled from the exploration editor #}
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-property.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-automatic-text-to-speech.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-category.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-correctness-feedback.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-init-state-name.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-language-code.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-objective.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-param-changes.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-param-specs.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-states/exploration-states.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-tags.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-title.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/change-list.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/autosave-info-modals.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/exploration-data/exploration-data.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/angular-name/angular-name.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page.controller.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/router.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-page-services/changes-in-human-readable-form.service.js"></script>

  <script src="/templates/dev/head/services/ExplorationFeaturesService.js"></script>
  <script src="/templates/dev/head/services/ExplorationHtmlFormatterService.js"></script>
  <script src="/templates/dev/head/services/ExtensionTagAssemblerService.js"></script>
  <script src="/templates/dev/head/services/GenerateContentIdService.js"></script>
  <script src="/templates/dev/head/services/HtmlEscaperService.js"></script>
  <script src="/templates/dev/head/services/IdGenerationService.js"></script>
  <script src="/templates/dev/head/services/LocalStorageService.js"></script>
  <script src="/templates/dev/head/services/SiteAnalyticsService.js"></script>
  <script src="/templates/dev/head/services/ValidatorsService.js"></script>

  <script src="/templates/dev/head/pages/state-editor/state-editor-properties-services/state-editor/state-editor.service.js"></script>

  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-tab/exploration-editor-tab-services/solution-verification/solution-verification.service.js"></script>
  <script src="/templates/dev/head/pages/exploration-editor-page/exploration-editor-tab/exploration-editor-tab-services/solution-validity/solution-validity.service.js"></script>
  <script src="/templates/dev/head/domain/classifier/AnswerClassificationResultObjectFactory.js"></script>
  <script src="/templates/dev/head/domain/classifier/ClassifierObjectFactory.js"></script>
  <script src="/templates/dev/head/pages/exploration_player/PredictionAlgorithmRegistryService.js"></script>
  <script src="/templates/dev/head/pages/exploration_player/StateClassifierMappingService.js"></script>
{% endblock footer_js %}
