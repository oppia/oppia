<div  class="oppia-drop-area" ng-if="dropAreaIsAccessible">
  <div class="oppia-blur-background"></div>
  <div class="oppia-drop-area-message" >Drop your file here!</div>
</div>
<div  class="oppia-drop-area" ng-if="userIsGuest">
  <div class="oppia-blur-background"></div>
  <div class="oppia-drop-area-message-for-guest-users">Please log in to upload audio files.</div>
</div>
<div class="oppia-audio-recording-bar" ng-show="(!isAudioAvailable || audioIsUpdating) && !selectedRecording">
  <div class="oppia-content-wrapper">
    <button class="btn oppia-audio-button oppia-audio-bar-button-transition" disabled>
      <i class="material-icons">play_arrow</i>
    </button>
  </div>
  <div class="oppia-content-wrapper oppia-audio-bar-info">
    <div ng-if="!cannotRecord && !checkingMicrophonePermission">
      No audio recorded.<span ng-if="canTranslate"> Press <i class="material-icons">mic</i>  to start recording.</span>
    </div>
    <div ng-if="checkingMicrophonePermission">
      Loading microphone.<loading-dots></loading-dots>
    </div>
    <div ng-if="recordingPermissionDenied && cannotRecord">
      You need to grant permission for this application to use your microphone.
    </div>
    <div ng-if="unsupportedBrowser && cannotRecord">
      Sorry, your browser does not support recording feature.
    </div>
  </div>
  <div class="oppia-content-wrapper">
    <button class="btn oppia-audio-button oppia-audio-bar-button-transition protractor-test-accessibility-translation-start-record"
            uib-tooltip="Record"
            tooltip-placement="above"
            ng-click="checkAndStartRecording()"
            ng-disabled="!canTranslate || cannotRecord"
            aria-label="Start recording"
            for="Recording">
      <i class="material-icons">&#xE029;</i>
    </button>
  </div>
  <div class="oppia-content-wrapper">
    <button class="btn oppia-audio-button oppia-audio-bar-button-transition protractor-test-accessibility-translation-upload-audio protractor-test-upload-audio-button"
            uib-tooltip="Upload"
            tooltip-placement="above"
            ng-click="openAddAudioTranslationModal()"
            ng-disabled="!canTranslate"
            aria-label="Upload translated file">
      <i class="material-icons">&#xE2C6;</i>
    </button>
  </div>
</div>
<div class="oppia-audio-recording-bar" ng-show="selectedRecording  && !audioIsCurrentlyBeingSaved">
  <ng-audio-recorder id="<[RECORDER_ID]>"
                     on-record-start="onRecordStart()"
                     on-conversion-complete="onConversionComplete()"
                     audio-model="audioBlob"
                     time-limit="recordingTimeLimit">
    <div class="oppia-content-wrapper">
      <button class="btn oppia-audio-button oppia-audio-bar-button-transition protractor-test-accessibility-translation-play-recorded-audio"
              ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()"
              ng-disabled="recorder.status.isRecording || !recorder.audioModel"
              aria-label="Play recorded audio">
        <i class="material-icons">
          {{recorder.status.isStopped || recorder.status.isPaused ? 'play_arrow' : 'pause']>
        </i>
      </button>
    </div>
    <div class="oppia-content-wrapper oppia-flex-1-wrapper">
      <div class="oppia-audio-visualiser">
        <div class="oppia-mp3-converting" ng-if="recorder.status.isConverting">
          Converting to mp3<loading-dots></loading-dots>
        </div>
        <canvas-sizer id="analyser">
          <div class="oppia-recoding-analyzer" ng-show="recorder.isHtml5 && recorder.status.isRecording && !audioIsCurrentlyBeingSaved">
            <ng-audio-recorder-analyzer height="66" wave-color="black" ></ng-audio-recorder-analyzer>
          </div>
          <div class="oppia-audio-wave-view" ng-show="!recorder.status.isRecording && recorder.audioModel && !audioIsCurrentlyBeingSaved">
            <ng-audio-recorder-wave-view wave-color="#009688" progress-color="#ccc" height="38"></ng-audio-recorder-wave-view>
          </div>
        </canvas-sizer>
      </div>
    </div>
    <div class="oppia-content-wrapper" ng-if="recorder.status.isRecording">
      <div class="oppia-recording-timer">
        <[recorder.elapsedTime | formatTimer]> / <[recorder.timeLimit | formatTimer]>
      </div>
    </div>
    <div class="oppia-content-wrapper" ng-if="recorder.status.isRecording">
      <button class="btn oppia-audio-button oppia-audio-bar-button-transition"
              uib-tooltip="Stop"
              tooltip-placement="above"
              ng-click="recorder.stopRecord()"
              aria-label="Stop recording">
        <i class="material-icons">stop</i>
      </button>
    </div>
  </ng-audio-recorder>
  <div class="oppia-content-wrapper">
    <button class="btn oppia-audio-action-button oppia-audio-bar-button-transition"
            ng-if="!recorder.status.isRecording && audioBlob"
            ng-click="reRecord()"
            aria-label="Record again">
      Re-take
    </button>
  </div>
  <div class="oppia-content-wrapper" ng-if="!recorder.status.isRecording && audioBlob">
    <button class="btn oppia-audio-action-button oppia-audio-bar-button-transition"
            ng-click="saveRecordedAudio()"
            aria-label="Save the recorded audio">
      Confirm
    </button>
  </div>
  <div class="oppia-content-wrapper" ng-if="!recorder.status.isRecording && audioBlob">
    <button class="btn oppia-cancel-button oppia-audio-bar-button-transition"
            ng-click="cancelRecording()"
            aria-label="Cancel the recorded audio">
      Cancel
    </button>
  </div>
</div>
<div class="oppia-audio-recording-bar" ng-if="audioIsCurrentlyBeingSaved">
  <div class="oppia-content-wrapper">
    <button class="btn oppia-audio-button oppia-audio-bar-button-transition" disabled>
      <i class="material-icons">play_arrow</i>
    </button>
  </div>
  <div class="oppia-content-wrapper oppia-flex-1-wrapper">
    <div class="oppia-audio-bar-info">
      <div>Saving<loading-dots></loading-dots></div>
    </div>
  </div>
</div>
<div ng-if="isAudioAvailable && !audioIsUpdating" class="oppia-audio-recording-bar">
  <div class="oppia-content-wrapper">
    <button class="btn oppia-audio-button oppia-audio-bar-button-transition"
            ng-click="playPauseUploadedAudioTranslation()">
      <i class="material-icons"><[isPlayingUploadedAudio() ? 'pause' : 'play_arrow']></i>
    </button>
  </div>
  <div class="oppia-slider-section oppia-content-wrapper">
    <div ng-if="audioLoadingIndicatorIsShown">
      <md-progress-linear md-mode="indeterminate"></md-progress-linear>
    </div>
    <div ng-if="!audioLoadingIndicatorIsShown">
      <md-slider ng-model="track.progress" ng-model-options="{getterSetter: true}" aria-label="audio-slider">
      </md-slider>
    </div>
  </div>
  <div class="oppia-content-wrapper oppia-recording-timer">
    <div ng-if="audioTimerIsShown">
      <[getUploadedAudioTimer()]>
    </div>
  </div>
  <div class="oppia-content-wrapper">
    <button class="btn oppia-audio-button oppia-audio-bar-button-transition protractor-test-upload-audio-button"
            uib-tooltip="Upload audio"
            tooltip-placement="above"
            ng-disabled="!canTranslate"
            ng-click="openAddAudioTranslationModal()">
      <i class="material-icons">&#xE2C6;</i>
    </button>
  </div>
  <div class="oppia-content-wrapper">
    <button class="btn oppia-audio-button oppia-audio-bar-button-transition"
            uib-tooltip="Delete"
            tooltip-placement="above"
            ng-disabled="!canTranslate"
            ng-click="openDeleteAudioTranslationModal()">
      <i class="material-icons">&#xE872;</i>
    </button>
  </div>
  <div class="oppia-content-wrapper" ng-if="!audioNeedsUpdate">
    <button class="btn oppia-audio-button oppia-audio-bar-button-transition"
            uib-tooltip="Audio needs update"
            tooltip-placement="above"
            ng-disabled="!canTranslate"
            ng-click="toggleAudioNeedsUpdate()">
      <i class="material-icons">warning</i>
    </button>
  </div>
  <div class="oppia-content-wrapper" ng-if="audioNeedsUpdate">
    <button class="btn oppia-audio-button audio-update-needed-button oppia-audio-bar-button-transition"
            uib-tooltip="Audio does not need update"
            tooltip-placement="top"
            ng-disabled="!canTranslate"
            ng-click="toggleAudioNeedsUpdate()">
      <i class="material-icons">warning</i>
    </button>
  </div>
</div>
<div class="oppia-translation-bottom-right-container" ng-if="showRecorderWarning">
  <span>
    <strong>Warning: </strong>Don't navigate to other tabs of this page before saving recorded audio, otherwise the recorded audio will be lost.
  </span>
</div>
<div class="oppia-translation-bottom-proTip" ng-if="!showRecorderWarning && !audioBlob && !isAudioAvailable">
  <span>
    <strong>ProTip: </strong>Use key "R" to start/stop recording
  </span>
</div>
<style>
  .oppia-drop-area {
    border: 3px dashed #aaa;
    height: 80%;
    position: absolute;
    top: 10%;
    width: 100%;
    z-index: 100;
  }
  .oppia-blur-background {
    background-color: #fff;
    height: 100%;
    opacity: 0.8;
    position: absolute;
    width: 100%;
  }
  .oppia-drop-area-message {
    font-size: 36px;
    height: 100%;
    padding: 20%;
    position: absolute;
    text-align: center;
    width: 100%;
  }
  .oppia-drop-area-message-for-guest-users {
    color: #aaa;
    font-size: 36px;
    height: 100%;
    padding: 20%;
    position: absolute;
    text-align: center;
    width: 100%;
  }
  .oppia-audio-recording-bar {
    align-items: center;
    background-color: #f7f7f7;
    display: flex;
    height: 100%;
    padding: 0px 10px;
    width: 100%;
  }
  .audioRecorder {
    align-items: center;
    display: flex;
  }
  .audioRecorder > div:first-child {
    width: 0 !important;
  }
  .oppia-content-wrapper {
    margin: 0 10px;
  }
  .oppia-audio-bar-info {
    background-color: #009688;
    border-radius: 3px;
    color: white;
    flex: 1;
    font-size: 12px;
    height: 38px;
    line-height: 27px;
    padding: 5px 40px;
    text-align: center;
  }
  .oppia-audio-button {
    background-color: #009688;
    border-radius: 20px;
    color: white;
    padding-left: 6px;
    width: 38px;
  }
  .oppia-audio-bar-button-transition {
    -moz-transition: background-color .2s cubic-bezier(.35,0,.25,1);
    -o-transition: background-color .2s cubic-bezier(.35,0,.25,1);
    transition: background-color .2s cubic-bezier(.35,0,.25,1);
    -webkit-transition: background-color .2s cubic-bezier(.35,0,.25,1);
  }
  .oppia-audio-action-button {
    background-color: #009688;
    border-radius: 3px;
    color: white;
    padding-left: 6px;
    width: 63px;
  }
  .oppia-cancel-button {
    background-color: #009688;
    border-radius: 3px;
    color: white;
    padding-left: 6px;
    width: 57px;
  }
  .oppia-audio-button:hover, .oppia-audio-action-button:hover, .oppia-cancel-button:hover {
    background-color: #01675d;
    color: white;
  }
  .oppia-audio-button[disabled] {
    background-color: #009688;
    pointer-events: auto;
  }
  .oppia-audio-button:focus {
    color: white;
  }
  .oppia-audio-visualiser {
    flex: 1;
    height: 38px;
  }
  .oppia-flex-1-wrapper {
    flex: 1;
  }
  .oppia-mp3-converting {
    background-color: #009688;
    border-radius: 3px;
    color: white;
    flex: 1;
    font-size: 12px;
    height: 38px;
    line-height: 27px;
    padding: 5px 40px;
    text-align: center;
  }
  .oppia-recording-timer {
    font-size: 14px;
    text-align: center;
    width: 83px;
  }
  .oppia-slider-section {
    background-color: #009688;
    border-radius: 3px;
    color: white;
    flex: 1;
    font-size: 12px;
    height: 38px;
    padding: 0 15px;
    text-align: center;
  }
  .oppia-translation-bottom-right-container {
    color: #ce133b;
    font-size: 12px;
    letter-spacing: 0.5px;
    position: relative;
    text-align: center;
    top: 10px;
  }
  .oppia-translation-bottom-proTip {
    color: #000000;
    font-size: 12px;
    letter-spacing: 0.5px;
    position: relative;
    text-align: center;
    top: 10px;
  }
  audio-translation-bar .audio-update-needed-button {
    background-color: red;
  }
  ng-audio-recorder {
    width: 100%;
  }
  audio-translation-bar .tooltip-inner {
  max-width: none;
  white-space: nowrap;
  }
  audio-translation-bar md-progress-linear {
    height: 38px;
    padding-top: 12px;
  }
  audio-translation-bar md-progress-linear.md-default-theme .md-container {
    background-color: #f8f8f8;
  }
  audio-translation-bar md-progress-linear.md-default-theme .md-bar {
    background-color: #009688;
  }
  audio-translation-bar md-slider {
    height: 38px;
  }
  audio-translation-bar md-slider .md-track-container {
    height: 1px;
    top: 18px !important;
  }
  audio-translation-bar md-slider .md-track {
    background-color: #f8f8f8;
  }
  audio-translation-bar md-slider.md-default-theme .md-track-fill {
    background-color: #009688;
  }
  audio-translation-bar .md-thumb-container {
    left: 4px;
    top: -5px;
  }
  audio-translation-bar md-slider.md-default-theme .md-thumb:after {
    background-color: #009688;
    border-color: #ccc;
  }
  audio-translation-bar canvas {
    background: #e4e1d1;
    border-radius: 3px;
    max-width: unset;
  }
</style>
