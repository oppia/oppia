<div ng-controller="StateSolution">
  <div ng-if="!isCurrentInteractionLinear() &&
              stateHintsService.displayed.length > 0 &&
              currentInteractionCanHaveSolution">
    <div class="oppia-editor-header">
      <strong>Solution</strong>
    </div>
    <md-card class="oppia-editor-card-with-avatar">
      <div class="oppia-editor-card-body">
        <ul class="nav oppia-option-list nav-stacked nav-pills" role="tablist"
            ng-if="stateSolutionService.savedMemento &&
                   stateSolutionService.savedMemento.explanation">
          <li ng-class="!inlineSolutionEditorIsActive"
              class="oppia-rule-block oppia-sortable-hint oppia-prevent-selection"
              style="margin-top: 0;">
            <a ng-click="toggleInlineSolutionEditorIsActive()"
               class="oppia-rule-tab protractor-test-oppia-solution-tab">
              <div class="oppia-response-header-block">
                <div class="oppia-response-header">
                  <span angular-html-bind="getSolutionSummary()"></span>
                  <span class="pull-right oppia-transition-200"
                        ng-click="deleteSolution($event)"
                        style="cursor: pointer; opacity: 0.5;">
                    <i class="material-icons md-18">&#xE5CD;</i>
                  </span>
                </div>
              </div>
            </a>

            <div ng-if="inlineSolutionEditorIsActive">
              <div class="oppia-editor-card-section protractor-test-oppia-solution-body">
                <solution-editor solution="stateSolutionService.savedMemento"
                                 object-type="objectType"
                                 interaction-html="interactionHtml"
                                 rule-description-choices="ruleDescriptionChoices"
                                 on-save="onComponentSave">
                </solution-editor>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </md-card>

    <md-card style="margin: 0; padding: 0;">
      <div ng-if="editabilityService.isEditableOutsideTutorialMode()">
        <button type="button"
                class="btn btn-default btn-lg oppia-add-hint-button protractor-test-oppia-add-solution-button"
                ng-click="openAddSolutionModal()">
          + <[stateSolutionService.savedMemento ? 'Change Solution' : 'Add Solution']>
        </button>
      </div>
    </md-card>
  </div>
</div>
