<style type="text/css">
  .oppia-editor-dropdown {
    position: absolute;
    right: 100px;
    top: 10px;
  }
  .oppia-editor-dropdown .oppia-dropdown-toggle {
    background-color: #009b8c;
    color: #ffffff;
  }
  .oppia-editor-dropdown .oppia-dropdown-menu {
    min-width: 100px;
  }
  .oppia-editor-dropdown .oppia-dropdown-menu .oppia-dropdown-btngroup {
    width: 100%;
  }
  .oppia-editor-dropdown .oppia-dropdown-menu .oppia-dropdown-btngroup .oppia-editor-PublishSave-button{
    text-decoration: none;
    color: #000000;
    width: 100%;
  }
  .oppia-editor-dropdown .oppia-dropdown-element {
    padding-left: 12px;
  }
  .oppia-editor-dropdown .oppia-dropdown-btn-divide {
    padding-left: 4px;
    border-bottom: 1px solid grey;
  }
  .oppia-editor-dropdown .oppia-dropdown-btn {
    padding-left: 12px;
    border: none;
    border-radius: 0;
  }
  .oppia-editor-dropdown .oppia-dropdown-btn .oppia-dropdown-btn-text {
    padding: 3px 3px 3px 3px;
  }
  .oppia-editor-dropdown .oppia-dropdown-element .oppia-dropdown-inner {
    padding-left: 10px;
  }
  .oppia-editor-dropdown .oppia-dropdown-btn .oppia-dropdown-list-length {
    opacity: 0.5;
  }
</style>

<div class="dropdown hidden-lg hidden-md ng-cloak oppia-editor-dropdown">
  <a class="btn dropdown-toggle oppia-dropdown-toggle" type="button" data-toggle="dropdown">Options
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu oppia-dropdown-menu">
    <li ng-if="showPublishButton()">
      <div class="btn-group oppia-dropdown-btngroup"
           uib-tooltip="<[getPublishExplorationButtonTooltip()]>"
           tooltip-placement="bottom"
           ng-class="{'oppia-disabled-link': isExplorationLockedForEditing() || countWarnings(),'btn-success': !isExplorationLockedForEditing() && !countWarnings()}">
        <a class="oppia-editor-PublishSave-button oppia-dropdown-btn protractor-test-publish-exploration"
                ng-click="showPublishExplorationModal()"
                ng-disabled="isExplorationLockedForEditing() || countWarnings()"
                ng-class="{'btn-success': !isExplorationLockedForEditing() && !countWarnings()}">
          <span ng-if="!publishIsInProcess" class="oppia-dropdown-btn-text">
            <span>Publish</span>
          </span>
          <span ng-if="publishIsInProcess">
            <i class="oppia-save-publish-loading oppia-save-publish-button-icon"
               alt="Publish to Oppia Library">
              <loading-dots ng-show="loadingDotsAreShown"></loading-dots>
            </i>
            <span class="oppia-save-publish-button-label">
                Publishing
              <loading-dots ng-show="loadingDotsAreShown"></loading-dots>
            </span>
          </span>
        </a>
      </div>
    </li>
    <li ng-if="isEditableOutsideTutorialMode()">
      <div class="btn-group oppia-dropdown-btngroup"
           title="<[getSaveButtonTooltip()]>" ng-class="{'oppia-disabled-link': !isExplorationSaveable(),'btn-success': isExplorationSaveable()}">
        <a id="tutorialSaveButton" class="oppia-dropdown-btn protractor-test-save-changes oppia-editor-PublishSave-button" ng-class="{'oppia-save-draft-button-padding': getChangeListLength() && !isPrivate(),'btn-success': isExplorationSaveable()}" ng-click="saveChanges()" ng-disabled="!isExplorationSaveable()">
          <span ng-if="!saveIsInProcess" class="oppia-dropdown-btn-text">
            <span ng-if="isPrivate()">
              <span>Save Draft</span>
              <span ng-if="getChangeListLength()" class="oppia-dropdown-list-length">(<[getChangeListLength()]>)</span>
            </span>
            <span ng-if="!isPrivate()" title="Publish Changes">
              <i class="material-icons md-18 md-dark oppia-save-publish-button-icon"
                 alt="Publish Changes">
                 &#xE2C3;
              </i>
              <span class="oppia-save-publish-button-label">Publish Changes</span>
              <span class="hidden-sm hidden-xs oppia-dropdown-list-length" ng-if="getChangeListLength()">(<[getChangeListLength()]>)</span>
            </span>
          </span>
          <span ng-if="saveIsInProcess">
            <span ng-if="isPrivate()" class="oppia-save-publish-button-label">
              Saving
            </span>
            <span ng-if="!isPrivate()" class="oppia-save-publish-button-label">
              Publishing
            </span>
            <loading-dots ng-show="loadingDotsAreShown"></loading-dots>
          </span>
        </a>
      </div>
    </li>
    <li title="Discard all pending changes" class="oppia-dropdown-btn-divide"><a ng-click="discardChanges()" ng-class="{'oppia-disabled-link': !getChangeListLength()}" class=" oppia-dropdown-element protractor-test-discard-changes">Discard Draft</a></li>
    <li ng-class="{'uib-dropdown': countWarnings()}" ng-attr-uib-dropdown="<[countWarnings()]>">
      <a href="#" uib-tooltip="Editor" tooltip-placement="<[countWarnings() ? 'left' : 'bottom']>" ng-click="selectMainTab()"
         class="oppia-dropdown-element protractor-test-main-tab">
        <i class="material-icons">&#xE254;</i>
        <span class="oppia-dropdown-inner">Editor</span>
      </a>
      <div ng-show="countWarnings()" class="oppia-editor-warnings-indicator" ng-click="selectMainTab()" ng-class="{'oppia-editor-warnings-critical-color': hasCriticalWarnings(), 'oppia-editor-warnings-error-color': !hasCriticalWarnings()}">
        <span class="oppia-editor-warnings-count">
          <[countWarnings()]>
        </span>
      </div>
      <ul uib-dropdown-menu class="uib-dropdown-menu oppia-editor-warnings-box">
        <span class="oppia-editor-warnings-header">Warnings</span>
        <li class="oppia-editor-warnings-text" ng-repeat="warning in getWarnings() track by $index">
          <hr class="oppia-editor-warnings-separator">
          <span ng-if="warning.type === 'critical'">
            <strong><[warning.message]></strong>
          </span>
          <span ng-if="warning.type !== 'critical'">
            <[warning.message]>
          </span>
        </li>
      </ul>
    </li>
    <li ng-if="userIsLoggedIn" id="tutorialTranslationTab" ng-class="{'active': getActiveTabName() === 'translation'}">
      <a href="#" uib-tooltip="Translations and Voiceovers" tooltip-placement="bottom" ng-click="selectTranslationTab()"
         class="oppia-dropdown-element protractor-test-translation-tab">
        <i class="material-icons">&#xE029;</i>
        <span class="oppia-dropdown-inner">Translations</span>
      </a>
    </li>
    <li ng-if="userIsLoggedIn" id="tutorialPreviewTab" ng-class="{'active': getActiveTabName() === 'preview'}">
      <a href="#" uib-tooltip="Preview" tooltip-placement="bottom" ng-click="selectPreviewTab()"
         class="oppia-dropdown-element protractor-test-preview-tab">
        <i class="material-icons">&#xE037;</i>
        <span class="oppia-dropdown-inner">Preview</span>
      </a>
    </li>
    <li ng-class="{'active': getActiveTabName() === 'settings'}">
      <a href="#" uib-tooltip="Settings" tooltip-placement="bottom" ng-click="selectSettingsTab()"
         class="oppia-dropdown-element protractor-test-settings-tab">
        <i class="material-icons">&#xE8B8;</i>
        <span class="oppia-dropdown-inner">Settings</span>
      </a>
    </li>
    <li ng-if="userIsLoggedIn" ng-class="{'active': getActiveTabName() === 'stats'}">
      <a href="#" uib-tooltip="Statistics" tooltip-placement="bottom" ng-click="selectStatsTab()"
         class="oppia-dropdown-element protractor-test-stats-tab">
        <i class="material-icons">&#xE24B;</i>
        <span class="oppia-dropdown-inner">Statistics</span>
      </a>
    </li>
    <li ng-if="isImprovementsTabEnabled()" ng-class="{'active': getActiveTabName() === 'improvements'}" ng-click="selectImprovementsTab()">
      <a href="#" uib-tooltip="Improvements" tooltip-placement="bottom"
         class="oppia-dropdown-element protractor-test-improvements-tab">
        <i class="material-icons">trending_up</i>
        <span class="oppia-dropdown-inner">Improvements</span>
      </a>
    </li>
    <li ng-class="{'active': getActiveTabName() === 'history'}">
      <a href="#" uib-tooltip="History" tooltip-placement="bottom" ng-click="selectHistoryTab()"
         disabled="ExplorationRightsService.isCloned()"
         class="oppia-dropdown-element protractor-test-history-tab">
        <i class="material-icons">&#xE192;</i>
        <span class="oppia-dropdown-inner">History</span>
      </a>
    </li>
    <li ng-if="isFeedbackTabEnabled()" ng-class="{'active': getActiveTabName() === 'feedback'}" ng-click="selectFeedbackTab()">
      <a href="#" uib-tooltip="Feedback" tooltip-placement="bottom"
         class="oppia-dropdown-element protractor-test-feedback-tab">
        <i class="material-icons">&#xE87F;</i>
        <span class="oppia-dropdown-inner">Feedback</span>
      </a>
      <div ng-show="getOpenThreadsCount()" class="oppia-exploration-open-threads-indicator oppia-exploration-open-threads-color">
        <span class="oppia-exploration-open-threads-count">
            <[getOpenThreadsCount()]>&nbsp;open
        </span>
      </div>
    </li>
    <li ng-if="userIsLoggedIn" uib-dropdown class="uib-dropdown uib-popover ng-cloak" popover-is-open="popoverControlObject.postTutorialHelpPopoverIsShown"
        popover-placement="bottom" popover-trigger="'none'"
        uib-popover="To get help in the future, click here!">
      <a href="#" uib-tooltip="Help" tooltip-placement="bottom"
         ng-click="showUserHelpModal()" class="oppia-dropdown-element">
        <i class="material-icons">&#xE887;</i>
        <span class="oppia-dropdown-inner">Help</span>
      </a>
    </li>
  </ul>
</div>
<style>
  /* Overwrite the Bootstrap defaults. */
  .nav > li > a.oppia-editor-navbar-tab-anchor {
    padding: 15px 11px;
  }
  editor-navigation .oppia-exploration-open-threads-count {
    bottom: 8px;
    color: white;
    font-size: 9px;
    position: relative;
  }
  editor-navigation .oppia-exploration-open-threads-color {
    background-color: #4078C0;
    border: 1px solid rgb(243, 243, 243);
  }
  editor-navigation .oppia-exploration-open-threads-indicator {
    border-radius: 10%;
    bottom: 5px;
    height: 15px;
    position: absolute;
    right: 3px;
    text-align: center;
  }
</style>
<ul class="nav navbar-nav oppia-navbar-nav pull-right ng-cloak hidden-xs hidden-sm" style="margin-left: 20px;">
  <li ng-class="{'active': getActiveTabName() === 'main', 'uib-dropdown': countWarnings()}" ng-attr-uib-dropdown="<[countWarnings()]>">
    <a href="#" uib-tooltip="Editor" tooltip-placement="<[countWarnings() ? 'left' : 'bottom']>" ng-click="selectMainTab()"
       class="oppia-editor-navbar-tab-anchor protractor-test-main-tab">
      <i class="material-icons">&#xE254;</i>
    </a>
    <div ng-show="countWarnings()" class="oppia-editor-warnings-indicator" ng-click="selectMainTab()" ng-class="{'oppia-editor-warnings-critical-color': hasCriticalWarnings(), 'oppia-editor-warnings-error-color': !hasCriticalWarnings()}">
      <span class="oppia-editor-warnings-count">
        <[countWarnings()]>
      </span>
    </div>
    <ul uib-dropdown-menu class="uib-dropdown-menu oppia-editor-warnings-box">
      <span class="oppia-editor-warnings-header">Warnings</span>
      <li class="oppia-editor-warnings-text" ng-repeat="warning in getWarnings() track by $index">
        <hr class="oppia-editor-warnings-separator">
        <span ng-if="warning.type === 'critical'">
          <strong><[warning.message]></strong>
        </span>
        <span ng-if="warning.type !== 'critical'">
          <[warning.message]>
        </span>
      </li>
    </ul>
  </li>
  <li ng-if="userIsLoggedIn" id="tutorialTranslationTab" ng-class="{'active': getActiveTabName() === 'translation'}">
    <a href="#" uib-tooltip="Translations and Voiceovers" tooltip-placement="bottom" ng-click="selectTranslationTab()"
       class="oppia-editor-navbar-tab-anchor protractor-test-translation-tab">
      <i class="material-icons">&#xE029;</i>
    </a>
  </li>
  <li ng-if="userIsLoggedIn" id="tutorialPreviewTab" ng-class="{'active': getActiveTabName() === 'preview'}">
    <a href="#" uib-tooltip="Preview" tooltip-placement="bottom" ng-click="selectPreviewTab()"
       class="oppia-editor-navbar-tab-anchor protractor-test-preview-tab">
      <i class="material-icons">&#xE037;</i>
    </a>
  </li>
  <li ng-class="{'active': getActiveTabName() === 'settings'}">
    <a href="#" uib-tooltip="Settings" tooltip-placement="bottom" ng-click="selectSettingsTab()"
       class="oppia-editor-navbar-tab-anchor protractor-test-settings-tab">
      <i class="material-icons">&#xE8B8;</i>
    </a>
  </li>
  <li ng-if="userIsLoggedIn" ng-class="{'active': getActiveTabName() === 'stats'}">
    <a href="#" uib-tooltip="Statistics" tooltip-placement="bottom" ng-click="selectStatsTab()"
       class="oppia-editor-navbar-tab-anchor protractor-test-stats-tab">
      <i class="material-icons">&#xE24B;</i>
    </a>
  </li>
  <li ng-if="isImprovementsTabEnabled()" ng-class="{'active': getActiveTabName() === 'improvements'}" ng-click="selectImprovementsTab()">
    <a href="#" uib-tooltip="Improvements" tooltip-placement="bottom"
       class="oppia-editor-navbar-tab-anchor protractor-test-improvements-tab">
      <i class="material-icons">trending_up</i>
    </a>
  </li>
  <li ng-class="{'active': getActiveTabName() === 'history'}">
    <a href="#" uib-tooltip="History" tooltip-placement="bottom" ng-click="selectHistoryTab()"
       disabled="ExplorationRightsService.isCloned()"
       class="oppia-editor-navbar-tab-anchor protractor-test-history-tab">
      <i class="material-icons">&#xE192;</i>
    </a>
  </li>
  <li ng-if="isFeedbackTabEnabled()" ng-class="{'active': getActiveTabName() === 'feedback'}" ng-click="selectFeedbackTab()">
    <a href="#" uib-tooltip="Feedback" tooltip-placement="bottom"
       class="oppia-editor-navbar-tab-anchor protractor-test-feedback-tab">
      <i class="material-icons">&#xE87F;</i>
    </a>
    <div ng-show="getOpenThreadsCount()" class="oppia-exploration-open-threads-indicator oppia-exploration-open-threads-color">
      <span class="oppia-exploration-open-threads-count">
        <[getOpenThreadsCount()]>&nbsp;open
      </span>
    </div>
  </li>
  <div ng-if="userIsLoggedIn" class="nav navbar-nav oppia-navbar-nav oppia-help-dropdown pull-right ng-cloak">
    <li uib-dropdown class="uib-dropdown uib-popover" popover-is-open="popoverControlObject.postTutorialHelpPopoverIsShown"
        popover-placement="bottom" popover-trigger="'none'"
        uib-popover="To get help in the future, click here!">
      <a href="#" uib-tooltip="Help" tooltip-placement="bottom"
         class="oppia-editor-navbar-tab-anchor" ng-click="showUserHelpModal()">
        <i class="material-icons">&#xE887;</i>
      </a>
    </li>
  </div>
</ul>
<style type="text/css">
  .oppia-help-dropdown .uib-popover {
    color: white;
    font-size: 14px;
    max-width: 200px;
    text-align: center;
  }
  .oppia-help-dropdown .popover-inner {
    max-width: 140px;
  }
  .oppia-help-dropdown .uib-popover.bottom > .arrow {
    border-bottom-color: #000;
  }
  .oppia-help-dropdown .uib-popover.bottom > .arrow:after {
    border-bottom-color: #000;
  }
</style>
