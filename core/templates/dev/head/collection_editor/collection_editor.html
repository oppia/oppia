{% extends "base.html" %}

{% block maintitle %}
  Oppia Editor
{% endblock maintitle %}

{% block subtitle %}
  {{ title }}
{% endblock subtitle %}

{% block header_js %}
  {{ super() }}
  <script type="text/javascript">
    GLOBALS.collectionId = JSON.parse('{{collection_id|js_string}}');
    GLOBALS.isPublic = JSON.parse('{{is_public|js_string}}');
    GLOBALS.canEdit = JSON.parse('{{can_edit|js_string}}');
  </script>

  <style>
    html, body {
      background-color: #eee;
    }
  </style>

  {{dependencies_html}}
{% endblock header_js %}

{% block navbar_breadcrumb %}
  <div ng-controller="CollectionEditor">
    <collection-editor-navbar-breadcrumb-directive collection="collection">
    </collection-editor-navbar-breadcrumb-directive>
  </div>
{% endblock navbar_breadcrumb %}

{% block local_top_nav_options %}
  <collection-editor-navbar-directive>
  </collection-editor-navbar-directive>
{% endblock local_top_nav_options %}

{% block content %}
  <div ng-controller="CollectionEditor">
    <div ng-if="getTabStatuses().active === 'main'">
      {% include 'collection_editor/editor_tab/collection_main.html' %}
    </div>

    <div ng-if="getTabStatuses().active === 'preview'">
      {% include 'collection_editor/preview_tab/collection_preview.html' %}
    </div>

    <div ng-show="getTabStatuses().active === 'settings'">
      {% include 'collection_editor/settings_tab/collection_settings.html' %}
    </div>

    <div ng-show="getTabStatuses().active === 'history'">
      {% include 'collection_editor/history_tab/collection_history.html' %}
    </div>

    <div ng-show="getTabStatuses().active === 'feedback'">
      {% include 'collection_editor/feedback_tab/collection_feedback.html' %}
    </div>

    <div ng-show="getTabStatuses().active === 'stats'">
      {% include 'collection_editor/statistics_tab/collection_statistics.html' %}
    </div>
  </div>

  {% include 'collection_editor/editor_tab/collection_details_editor_directive.html' %}
  {% include 'collection_editor/navbar/collection_editor_navbar_breadcrumb_directive.html' %}
  {% include 'collection_editor/navbar/collection_editor_navbar_directive.html' %}
  {% include 'collection_editor/editor_tab/collection_node_editor_directive.html' %}
  {% include 'collection_editor/editor_tab/collection_skill_list_directive.html' %}
{% endblock content %}

{% block footer_js %}
  {{ super() }}
  <script>
    {{ include_js_file(
      'collection_editor/editor_tab/CollectionDetailsEditorDirective.js') }}
    {{ include_js_file('collection_editor/CollectionEditor.js') }}
    {{ include_js_file(
      'collection_editor/editor_tab/CollectionNodeEditorDirective.js') }}
    {{ include_js_file(
      'collection_editor/editor_tab/CollectionSkillListDirective.js') }}
    {{ include_js_file(
      'collection_editor/navbar/CollectionEditorNavbarBreadcrumbDirective.js') }}
    {{ include_js_file(
      'collection_editor/navbar/CollectionEditorNavbarDirective.js') }}

    {{ include_js_file('collection_editor/feedback_tab/CollectionFeedback.js') }}
    {{ include_js_file('collection_editor/history_tab/CollectionHistory.js') }}
    {{ include_js_file('collection_editor/editor_tab/CollectionMain.js') }}
    {{ include_js_file('collection_editor/preview_tab/CollectionPreview.js') }}
    {{ include_js_file('collection_editor/settings_tab/CollectionSettings.js') }}
    {{ include_js_file('collection_editor/statistics_tab/CollectionStatistics.js') }}

    {{ include_js_file('domain/collection/CollectionBackendApiService.js') }}
    {{ include_js_file('domain/collection/CollectionNodeObjectFactory.js') }}
    {{ include_js_file('domain/collection/CollectionObjectFactory.js') }}
    {{ include_js_file('domain/collection/CollectionRightsBackendApiService.js') }}
    {{ include_js_file('domain/collection/CollectionUpdateService.js') }}
    {{ include_js_file('domain/collection/SkillListObjectFactory.js') }}
    {{ include_js_file('domain/collection/WritableCollectionBackendApiService.js') }}
    {{ include_js_file('domain/editor/ChangeObjectFactory.js') }}
    {{ include_js_file('domain/editor/UndoRedoService.js') }}
    {{ include_js_file('domain/utilities/UrlInterpolationService.js') }}

    {{ include_js_file('editor/EditorServices.js') }}
    {{ include_js_file('editor/ExplorationEditor.js') }}
    {{ include_js_file('editor/GadgetValidationService.js') }}
    {{ include_js_file('editor/RouterServices.js') }}

    {{ include_js_file('expressions/expressionInterpolationService.js') }}
  </script>
{% endblock footer_js %}
