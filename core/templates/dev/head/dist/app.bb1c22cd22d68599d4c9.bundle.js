!function(e){function t(t){for(var r,a,c=t[0],s=t[1],l=t[2],p=0,f=[];p<c.length;p++)a=c[p],o[a]&&f.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);f.length;)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={2:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([5,0]),n()}([function(e,t){oppia.factory("WindowDimensionsService",["$window",function(e){var t=[];return angular.element(e).bind("resize",function(){t.forEach(function(e){e()})}),{getWidth:function(){return e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},registerOnResizeHook:function(e){t.push(e)},isWindowNarrow:function(){return this.getWidth()<=768}}}])},function(e,t){oppia.factory("SiteAnalyticsService",["$window",function(e){var t=constants.CAN_SEND_ANALYTICS_EVENTS,n=function(n,r,o){e.ga&&t&&e.ga("send","event",n,r,o)},r=function(n,r,o){e.ga&&t&&e.ga("send","social",n,r,o)};return{registerStartLoginEvent:function(t){n("LoginButton","click",e.location.pathname+" "+t)},registerNewSignupEvent:function(){n("SignupButton","click","")},registerClickBrowseLibraryButtonEvent:function(){n("BrowseLibraryButton","click",e.location.pathname)},registerGoToDonationSiteEvent:function(e){n("GoToDonationSite","click",e)},registerApplyToTeachWithOppiaEvent:function(){n("ApplyToTeachWithOppia","click","")},registerClickCreateExplorationButtonEvent:function(){n("CreateExplorationButton","click",e.location.pathname)},registerCreateNewExplorationEvent:function(e){n("NewExploration","create",e)},registerCreateNewExplorationInCollectionEvent:function(e){n("NewExplorationFromCollection","create",e)},registerCreateNewCollectionEvent:function(e){n("NewCollection","create",e)},registerCommitChangesToPrivateExplorationEvent:function(e){n("CommitToPrivateExploration","click",e)},registerShareExplorationEvent:function(t){r(t,"share",e.location.pathname)},registerShareCollectionEvent:function(t){r(t,"share",e.location.pathname)},registerOpenEmbedInfoEvent:function(e){n("EmbedInfoModal","open",e)},registerCommitChangesToPublicExplorationEvent:function(e){n("CommitToPublicExploration","click",e)},registerTutorialModalOpenEvent:function(e){n("TutorialModalOpen","open",e)},registerDeclineTutorialModalEvent:function(e){n("DeclineTutorialModal","click",e)},registerAcceptTutorialModalEvent:function(e){n("AcceptTutorialModal","click",e)},registerClickHelpButtonEvent:function(e){n("ClickHelpButton","click",e)},registerVisitHelpCenterEvent:function(e){n("VisitHelpCenter","click",e)},registerOpenTutorialFromHelpCenterEvent:function(e){n("OpenTutorialFromHelpCenter","click",e)},registerSkipTutorialEvent:function(e){n("SkipTutorial","click",e)},registerFinishTutorialEvent:function(e){n("FinishTutorial","click",e)},registerEditorFirstEntryEvent:function(e){n("FirstEnterEditor","open",e)},registerFirstOpenContentBoxEvent:function(e){n("FirstOpenContentBox","open",e)},registerFirstSaveContentEvent:function(e){n("FirstSaveContent","click",e)},registerFirstClickAddInteractionEvent:function(e){n("FirstClickAddInteraction","click",e)},registerFirstSelectInteractionTypeEvent:function(e){n("FirstSelectInteractionType","click",e)},registerFirstSaveInteractionEvent:function(e){n("FirstSaveInteraction","click",e)},registerFirstSaveRuleEvent:function(e){n("FirstSaveRule","click",e)},registerFirstCreateSecondStateEvent:function(e){n("FirstCreateSecondState","create",e)},registerSavePlayableExplorationEvent:function(e){n("SavePlayableExploration","save",e)},registerOpenPublishExplorationModalEvent:function(e){n("PublishExplorationModal","open",e)},registerPublishExplorationEvent:function(e){n("PublishExploration","click",e)},registerVisitOppiaFromIframeEvent:function(e){n("VisitOppiaFromIframe","click",e)},registerNewCard:function(e){(e<=10||e%10==0)&&n("PlayerNewCard","click",e)},registerFinishExploration:function(){n("PlayerFinishExploration","click","")},registerOpenFractionsFromLandingPageEvent:function(e){n("OpenFractionsFromLandingPage","click",e)},registerStewardsLandingPageEvent:function(e,t){n("ClickButtonOnStewardsPage","click",e+":"+t)}}}])},,,,function(e,t,n){for(var r in n(6),n(7),n(8),n(9),n(3),n(10),n(4),n(11),n(12),n(13),n(14),n(15),n(0),n(16),n(1),n(17),n(20),n(21),n(22),n(23),n(24),n(25),n(2),constants)oppia.constant(r,constants[r]);var o;oppia.constant("EXPLORATION_SUMMARY_DATA_URL_TEMPLATE","/explorationsummarieshandler/data"),oppia.constant("EXPLORATION_AND_SKILL_ID_PATTERN",/^[a-zA-Z0-9_-]+$/),oppia.constant("PLACEHOLDER_OUTCOME_DEST","/"),oppia.constant("INTERACTION_DISPLAY_MODE_INLINE","inline"),oppia.constant("LOADING_INDICATOR_URL","/activity/loadingIndicator.gif"),oppia.constant("OBJECT_EDITOR_URL_PREFIX","/object_editor_template/"),oppia.constant("ENABLE_ML_CLASSIFIERS",!1),oppia.constant("INFO_MESSAGE_SOLUTION_IS_INVALID_FOR_EXPLORATION","The current solution does not lead to another card."),oppia.constant("INFO_MESSAGE_SOLUTION_IS_INVALID_FOR_QUESTION","The current solution does not correspond to a correct answer."),oppia.constant("INFO_MESSAGE_SOLUTION_IS_VALID","The solution is now valid!"),oppia.constant("INFO_MESSAGE_SOLUTION_IS_INVALID_FOR_CURRENT_RULE","The current solution is no longer valid."),oppia.constant("PARAMETER_TYPES",{REAL:"Real",UNICODE_STRING:"UnicodeString"}),oppia.constant("ACTION_ACCEPT_SUGGESTION","accept"),oppia.constant("ACTION_REJECT_SUGGESTION","reject"),oppia.constant("MAX_NODES_PER_ROW",4),oppia.constant("MAX_NODE_LABEL_LENGTH",15),oppia.constant("FATAL_ERROR_CODES",[400,401,404,500]),oppia.constant("COMPONENT_NAME_CONTENT","content"),oppia.constant("COMPONENT_NAME_HINT","hint"),oppia.constant("COMPONENT_NAME_SOLUTION","solution"),oppia.constant("COMPONENT_NAME_FEEDBACK","feedback"),oppia.constant("COMPONENT_NAME_DEFAULT_OUTCOME","default_outcome"),oppia.constant("COMPONENT_NAME_EXPLANATION","explanation"),oppia.constant("COMPONENT_NAME_WORKED_EXAMPLE","worked_example"),oppia.constant("CURRENT_ACTION_SCHEMA_VERSION",1),oppia.constant("CURRENT_ISSUE_SCHEMA_VERSION",1),oppia.constant("EARLY_QUIT_THRESHOLD_IN_SECS",45),oppia.constant("NUM_INCORRECT_ANSWERS_THRESHOLD",3),oppia.constant("NUM_REPEATED_CYCLES_THRESHOLD",3),oppia.constant("MAX_PLAYTHROUGHS_FOR_ISSUE",5),oppia.constant("ACTION_TYPE_EXPLORATION_START","ExplorationStart"),oppia.constant("ACTION_TYPE_ANSWER_SUBMIT","AnswerSubmit"),oppia.constant("ACTION_TYPE_EXPLORATION_QUIT","ExplorationQuit"),oppia.constant("ISSUE_TYPE_EARLY_QUIT","EarlyQuit"),oppia.constant("ISSUE_TYPE_MULTIPLE_INCORRECT_SUBMISSIONS","MultipleIncorrectSubmissions"),oppia.constant("ISSUE_TYPE_CYCLIC_STATE_TRANSITIONS","CyclicStateTransitions"),oppia.constant("SITE_NAME","Oppia.org"),oppia.constant("DEFAULT_PROFILE_IMAGE_PATH","/avatar/user_blue_72px.png"),oppia.config(["$compileProvider","$httpProvider","$interpolateProvider","$locationProvider","$cookiesProvider",function(e,t,n,r,o){e.debugInfoEnabled(!1),n.startSymbol("<["),n.endSymbol("]>"),r.html5Mode(!1),"/search/find"===window.location.pathname&&r.html5Mode(!0),o.defaults.path="/",t.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"},t.defaults.headers.put={"Content-Type":"application/x-www-form-urlencoded"},t.interceptors.push(["$q","$log","AlertsService",function(e,t,n){return{request:function(e){return e.data&&(e.data=$.param({csrf_token:GLOBALS.csrf_token,payload:JSON.stringify(e.data),source:document.URL},!0)),e},responseError:function(r){if(-1!==r.status){t.error(r.data);var o="Error communicating with server.";r.data&&r.data.error&&(o=r.data.error),n.addWarning(o)}return e.reject(r)}}}])}]),oppia.config(["$provide",function(e){e.decorator("$log",["$delegate","DEV_MODE",function(e,t){var n=e.error;return t||(e.log=function(){},e.info=function(){},e.warn=function(){},e.error=function(e){-1===String(e).indexOf("$digest already in progress")&&n(e)},e.error.logs=[]),e}])}]),oppia.config(["toastrConfig",function(e){angular.extend(e,{allowHtml:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},positionClass:"toast-bottom-right",messageClass:"toast-message",progressBar:!1,tapToDismiss:!0,titleClass:"toast-title"})}]),oppia.config(["recorderServiceProvider",function(e){e.forceSwf(!1),e.withMp3Conversion(!0,{bitRate:128})}]),oppia.factory("$exceptionHandler",["$log",function(e){var t=Date.now()-5e3;return function(n,r){var o=["","Cause: "+r,n.message,String(n.stack),"    at URL: "+window.location.href].join("\n");if(Date.now()-t>5e3)try{$.ajax({type:"POST",url:"/frontend_errors",data:$.param({csrf_token:GLOBALS.csrf_token,payload:JSON.stringify({error:o}),source:document.URL},!0),contentType:"application/x-www-form-urlencoded",dataType:"text",async:!0}),t=Date.now()}catch(t){e.warn("Error logging failed.")}e.error.apply(e,arguments)}}]),oppia.constant("LABEL_FOR_CLEARING_FOCUS","labelForClearingFocus"),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"function"!=typeof Object.create&&(o=function(){},Object.create=function(e){if(arguments.length>1)throw Error("Second argument for Object.create() is not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");return o.prototype=e,new o}),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}},function(e,t){oppia.directive("angularHtmlBind",["$compile",function(e){return{restrict:"E",link:function(t,n,r){var o;t.$watch(r.htmlData,function(r){o&&o.$destroy(),n.empty(),o=t.$new(),n.html(r),e(n.contents())(o)})}}}]),oppia.directive("mathjaxBind",[function(){return{restrict:"E",controller:["$scope","$element","$attrs",function(e,t,n){e.$watch(n.mathjaxData,function(e){var n=angular.element('<script type="math/tex">').html(void 0===e?"":e);t.html(""),t.append(n),MathJax.Hub.Queue(["Reprocess",MathJax.Hub,t[0]])})}]}}]),oppia.directive("selectOnClick",[function(){return{restrict:"E",link:function(e,t){t.bind("click",function(){this.select()})}}}]),oppia.directive("customPopover",["UrlInterpolationService","$sce",function(e,t){return{restrict:"E",templateUrl:e.getDirectiveTemplateUrl("/custom_popover_directive.html"),link:function(e,n,r){e.label=r.popoverLabel,$(n).popover({trigger:"hover",html:!0,content:t.getTrustedHtml('<pre class="oppia-pre-wrapped-text">'+r.popoverText+"</pre>"),placement:r.popoverPlacement})},controller:["$scope","$element",function(e,t){e.isShown=!1,t.on("shown.bs.popover",function(){e.isShown=!0}),t.on("hidden.bs.popover",function(){e.isShown=!1}),e.showPopover=function(){e.isShown||t.popover("show")}}]}}]),oppia.directive("focusOn",["LABEL_FOR_CLEARING_FOCUS",function(e){return function(t,n,r){t.$on("focusOn",function(t,o){o===r.focusOn&&n[0].focus(),o===e&&n[0].blur()})}}]),oppia.directive("mobileFriendlyTooltip",["$timeout",function(e){return{restrict:"E",scope:{},controller:["$scope","DeviceInfoService",function(e,t){e.opened=!1,e.deviceHasTouchEvents=t.hasTouchEvents()}],link:function(t,n){t.deviceHasTouchEvents?(n.on("touchstart",function(){t.opened=!0,t.$apply()}),n.on("touchend",function(){e(function(){t.opened=!1},1e3)})):(n.on("mouseenter",function(){t.opened=!0,t.$apply()}),n.on("mouseleave",function(){t.opened=!1,t.$apply()}))}}}])},function(e,t){oppia.constant("RULE_SUMMARY_WRAP_CHARACTER_COUNT",30),oppia.constant("FEEDBACK_SUBJECT_MAX_CHAR_LIMIT",constants.FEEDBACK_SUBJECT_MAX_CHAR_LIMIT),oppia.filter("spacesToUnderscores",[function(){return function(e){return e.trim().replace(/ /g,"_")}}]),oppia.filter("underscoresToCamelCase",[function(){return function(e){return e.replace(/_+(.)/g,function(e,t){return t.toUpperCase()})}}]),oppia.filter("camelCaseToHyphens",[function(){return function(e){var t=e.replace(/([a-z])?([A-Z])/g,"$1-$2").toLowerCase();return"-"===t[0]&&(t=t.substring(1)),t}}]),oppia.filter("truncate",["$filter",function(e){return function(t,n,r){return t?(isNaN(n)&&(n=70),void 0===r&&(r="..."),angular.isString(t)||(t=String(t)),(t=e("convertToPlainText")(t)).length<=n?t:t.substring(0,n-r.length)+r):""}}]),oppia.filter("truncateAtFirstLine",[function(){return function(e){if(!e)return e;for(var t=e.replace(/(\r\n|[\n\v\f\r\x85\u2028\u2029])/g,"\n").split("\n"),n=-1,r=!1,o=0;o<t.length;o++)if(t[o].length>0){if(-1!==n){r=!0;break}n=o}var i=r?"...":"";return-1!==n?t[n]+i:""}}]),oppia.filter("truncateInputBasedOnInteractionAnswerType",["$filter","INTERACTION_SPECS",function(e,t){return function(n,r,o){var i=t[r].answer_type,a="";if("NormalizedString"===i)a=n;else{if("CodeEvaluation"!==i)throw Error("Unknown interaction answer type");a=n.code}return e("truncate")(a,o)}}]),oppia.filter("round1",[function(){return function(e){return Math.round(10*e)/10}}]),oppia.filter("replaceInputsWithEllipses",[function(){var e=/\{\{\s*(\w+)\s*(\|\s*\w+\s*)?\}\}/g;return function(t){return t?t.replace(e,"..."):""}}]),oppia.filter("truncateAtFirstEllipsis",[function(){var e=/\.\.\./g;return function(t){if(!t)return"";var n=t.search(e);return-1===n?t:t.substring(0,n)}}]),oppia.filter("wrapTextWithEllipsis",["$filter","UtilsService",function(e,t){return function(n,r){return t.isString(n)?(n=e("normalizeWhitespace")(n)).length<=r||r<3?n:n.substr(0,r-3).trim()+"...":n}}]),oppia.filter("parameterizeRuleDescription",["$filter","INTERACTION_SPECS","FractionObjectFactory","NumberWithUnitsObjectFactory",function(e,t,n,r){return function(o,i,a){if(!o)return"";if(!t.hasOwnProperty(i))return console.error("Cannot find interaction with id "+i),"";var c=t[i].rule_descriptions[o.type];if(!c)return console.error("Cannot find description for rule "+o.type+" for interaction "+i),"";for(var s=o.inputs,l=c,u=/\{\{\s*(\w+)\s*(\|\s*\w+\s*)?\}\}/,p=0;c.match(u)&&100!==p;){p++;var f=c.match(u)[1],d=c.match(u)[2];d&&(d=d.substring(1));var g="[INVALID]";if(a)if("SetOfHtmlString"===d){g="[";for(var _=s[f],S=0;S<_.length;S++)g+=e("formatRtePreview")(_[S]),S<_.length-1&&(g+=",");g+="]"}else if("ListOfSetsOfHtmlStrings"===d){g="[";for(_=s[f],S=0;S<_.length;S++){g+="[";for(var m=0;m<_[S].length;m++)g+=e("formatRtePreview")(_[S][m]),m<_[S].length-1&&(g+=",");g+="]",S<_.length-1&&(g+=",")}g+="]"}else if("DragAndDropPositiveInt"===d)g=s[f]+"";else for(S=0;S<a.length;S++){if(a[S].val===s[f])g="'"+e("formatRtePreview")(a[S].label)+"'"}else if("MusicPhrase"===d){g="[";for(S=0;S<s[f].length;S++)0!==S&&(g+=", "),g+=s[f][S].readableNoteName;g+="]"}else if("CoordTwoDim"===d){var E=s[f][0]||0,v=s[f][1]||0;g="(",g+=s[f][0]>=0?E.toFixed(2)+"째N":-E.toFixed(2)+"째S",g+=", ",g+=s[f][1]>=0?v.toFixed(2)+"째E":-v.toFixed(2)+"째W",g+=")"}else if("NormalizedString"===d)g='"'+s[f]+'"';else if("Graph"===d)g="[reference graph]";else if("Fraction"===d)g=n.fromDict(s[f]).toString();else if("NumberWithUnits"===d)g=r.fromDict(s[f]).toString();else if("SetOfUnicodeString"===d||"SetOfNormalizedString"===d){g="[";for(S=0;S<s[f].length;S++)0!==S&&(g+=", "),g+=s[f][S];g+="]"}else if("Real"===d||"NonnegativeInt"===d||"Int"===d)g=s[f]+"";else if("CodeString"===d||"UnicodeString"===d||"LogicErrorCategory"===d||"NormalizedString"===d)g=s[f];else{if("ListOfCodeEvaluation"!==d)throw Error("Unknown variable type in rule description");g="[";for(S=0;S<s[f].length;S++)0!==S&&(g+=", "),g+=s[f][S].code;g+="]"}g=g.split("$").join("$$"),c=c.replace(u," "),l=l.replace(u,g)}return l}}]),oppia.filter("normalizeWhitespace",["UtilsService",function(e){return function(t){return e.isString(t)?t=(t=t.trim()).replace(/\s{2,}/g," "):t}}]),oppia.filter("normalizeWhitespacePunctuationAndCase",[function(){return function(e){if("string"==typeof e||e instanceof String){for(var t=function(e){return-1!=="qwertyuiopasdfghjklzxcvbnm0123456789".indexOf(e.toLowerCase())},n=(e=e.trim()).split("\n"),r=[],o=0;o<n.length;o++){for(var i="",a=n[o].trim().replace(/\s{2,}/g," "),c=0;c<a.length;c++){var s=a.charAt(c).toLowerCase();" "===s?c>0&&c<a.length-1&&t(a.charAt(c-1))&&t(a.charAt(c+1))&&(i+=s):i+=s}i&&r.push(i)}return r.join("\n")}return e}}]),oppia.filter("convertToPlainText",[function(){return function(e){var t=e.replace(/(<([^>]+)>)/gi,""),n=(t=(t=t.replace(/&nbsp;/gi," ")).replace(/&quot;/gi,"")).trim();return 0===n.length?t:n}}]),oppia.filter("summarizeNonnegativeNumber",[function(){return function(e){return(e=Number(e))>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e}}]),oppia.filter("truncateAndCapitalize",[function(){return function(e,t){if(!e)return e;for(var n=e.trim().match(/\S+/g),r=n[0].charAt(0).toUpperCase()+n[0].slice(1),o=1;o<n.length;o++){if(t&&!(r.length+1+n[o].length<=t)){r+="...";break}r+=" ",r+=n[o]}return r}}]),oppia.filter("capitalize",[function(){return function(e){if(!e)return e;var t=e.trim();return t.charAt(0).toUpperCase()+t.slice(1)}}]),oppia.filter("removeDuplicatesInArray",[function(){return function(e){return e.filter(function(t,n){return e.indexOf(t)===n})}}]),oppia.filter("stripFormatting",[function(){return function(e,t){var n=new RegExp(' style="[^"]+"',"gm"),r=new RegExp('(?!<img.*class=".*('+t.join("|")+').*".*>)(?!<b>|</b>|<i>|</i>|<p>|</p>|<br>)<[^>]+>',"gm"),o=e?String(e).replace(n,""):"";return o=o?String(o).replace(r,""):""}}]),oppia.filter("getAbbreviatedText",[function(){return function(e,t){if(e.length>t){var n=e.substr(0,t);return-1!==n.indexOf(" ")&&(n=n.split(" ").slice(0,-1).join(" ")),n.concat("...")}return e}}]),oppia.filter("formatRtePreview",["$filter",function(e){return function(t){return(t=(t=(t=t.replace(/&nbsp;/gi," ")).replace(/&quot;/gi,"")).replace(/<(?!oppia-noninteractive\s*?)[^>]+>/g,"")).replace(/(<([^>]+)>)/g,function(t){var n=e("capitalize")(t.split("-")[2].split(" ")[0]);return">"===n[n.length-1]&&(n=n.slice(0,-1))," ["+n+"] "}).trim()}}]),oppia.filter("formatTimer",[function(){return function(e){var t=function(e){return(e<10?"0":"")+e},n=e%60;return t(Math.floor(e/60))+":"+t(n)}}])},function(e,t){oppia.constant("DEFAULT_TRANSLATIONS",{I18N_LIBRARY_PAGE_TITLE:"Library",I18N_LIBRARY_LOADING:"Loading",I18N_SIGNUP_PAGE_SUBTITLE:"Registration",I18N_SIGNUP_PAGE_TITLE:"Oppia",I18N_LIBRARY_SEARCH_PLACEHOLDER:"What are you curious about?",I18N_LIBRARY_ALL_LANGUAGES:"All Languages",I18N_LIBRARY_LANGUAGES_EN:"English",I18N_LIBRARY_ALL_CATEGORIES:"All Categories",I18N_TOPNAV_SIGN_IN:"Sign in",I18N_SPLASH_PAGE_TITLE:"Oppia: Teach, Learn, Explore",I18N_SIGNUP_REGISTRATION:"Registration",I18N_SIGNUP_LOADING:"Loading"}),oppia.controller("I18nFooter",["$http","$rootScope","$scope","$translate","$timeout","$cookies","UserService",function(e,t,n,r,o,i,a){n.supportedSiteLanguages=constants.SUPPORTED_SITE_LANGUAGES,o(function(){n.currentLanguageCode=r.use()||r.proposedLanguage()},50),n.changeLanguage=function(){r.use(n.currentLanguageCode),a.getUserInfoAsync().then(function(t){t.isLoggedIn()&&e.put("/save_site_language",{site_language_code:n.currentLanguageCode})})}}]),oppia.config(["$translateProvider","DEFAULT_TRANSLATIONS",function(e,t){var n=[],r={};constants.SUPPORTED_SITE_LANGUAGES.forEach(function(e){n.push(e.id),r[e.id+"*"]=e.id}),r["*"]="en",e.registerAvailableLanguageKeys(n,r).useLoader("TranslationFileHashLoaderService",{prefix:"/i18n/",suffix:".json"}).translations("en",t).fallbackLanguage("en").determinePreferredLanguage().useCookieStorage().addInterpolation("$translateMessageFormatInterpolation").useSanitizeValueStrategy("sanitizeParameters").forceAsyncReload(!0)}])},function(e,t){oppia.controller("Base",["$scope","$rootScope","$document","AlertsService","BackgroundMaskService","SidebarStatusService","SITE_NAME","DEV_MODE",function(e,t,n,r,o,i,a,c){e.siteName=a,e.AlertsService=r,e.currentLang="en",e.iframed=GLOBALS.iframed,e.siteFeedbackFormUrl=GLOBALS.SITE_FEEDBACK_FORM_URL,e.promoBarIsEnabled=GLOBALS.PROMO_BAR_IS_ENABLED,e.promoBarMessage=GLOBALS.PROMO_BAR_MESSAGE,t.DEV_MODE=c,t.loadingMessage="",e.isSidebarShown=i.isSidebarShown,e.closeSidebarOnSwipe=i.closeSidebar,e.isBackgroundMaskActive=o.isMaskActive,t.$on("$translateChangeSuccess",function(t,n){e.currentLang=n.language}),n.on("click",function(){i.onDocumentClick(),e.$apply()}),e.skipToMainContent=function(){var e=document.getElementById("oppia-main-content");if(!e)throw Error("Variable mainContentElement is undefined.");e.tabIndex=-1,e.scrollIntoView(),e.focus()}}])},function(e,t){oppia.factory("NavigationService",[function(){var e={activeMenuName:"",ACTION_OPEN:"open",ACTION_CLOSE:"close",KEYBOARD_EVENT_TO_KEY_CODES:{enter:{shiftKeyIsPressed:!1,keyCode:13},tab:{shiftKeyIsPressed:!1,keyCode:9},shiftTab:{shiftKeyIsPressed:!0,keyCode:9}},openSubmenu:function(t,n){e.activeMenuName=n,angular.element(t.currentTarget).focus()},closeSubmenu:function(t){e.activeMenuName="",angular.element(t.currentTarget).closest("li").find("a").blur()},onMenuKeypress:function(t,n,r){for(var o=Object.keys(r),i=0;i<o.length;i++){var a=e.KEYBOARD_EVENT_TO_KEY_CODES[o[i]];if(a.keyCode===t.keyCode&&t.shiftKey===a.shiftKeyIsPressed)if(r[o[i]]===e.ACTION_OPEN)e.openSubmenu(t,n);else{if(r[o[i]]!==e.ACTION_CLOSE)throw Error("Invalid action type.");e.closeSubmenu(t)}}}};return e}])},function(e,t){oppia.factory("DebouncerService",[function(){return{debounce:function(e,t){var n,r,o,i=this,a=arguments,c=function(){var s=(new Date).getTime()-r;s<t?n=setTimeout(c,t-s):(n=null,o=e.apply(i,a),n||(i=null,a=null))};return function(){return i=this,a=arguments,r=(new Date).getTime(),n||(n=setTimeout(c,t)),o}}}}])},function(e,t){oppia.factory("TranslationFileHashLoaderService",["$http","$q","UrlInterpolationService",function(e,t,n){return function(r){var o=[r.prefix,r.key,r.suffix].join("");return e.get(n.getStaticAssetUrl(o)).then(function(e){return e.data},function(){return t.reject(r.key)})}}])},function(e,t){oppia.factory("UserService",["$http","$q","$window","UrlInterpolationService","UserInfoObjectFactory","DEFAULT_PROFILE_IMAGE_PATH",function(e,t,n,r,o,i){var a=null;return{getProfileImageDataUrlAsync:function(){var n=r.getStaticImageUrl(i);return GLOBALS.userIsLoggedIn?e.get("/preferenceshandler/profile_picture").then(function(e){return e.data.profile_picture_data_url&&(n=e.data.profile_picture_data_url),n}):t.resolve(n)},setProfileImageDataUrlAsync:function(t){return e.put("/preferenceshandler/data",{update_type:"profile_picture_data_url",data:t})},getLoginAndLogoutUrls:function(){var t={current_url:n.location.href};return e.get("/url_handler",{params:t}).then(function(e){return{login_url:e.data.login_url}})},getUserInfoAsync:function(){return GLOBALS.userIsLoggedIn?a?t.resolve(a):e.get("/userinfohandler").then(function(e){return a=o.createFromBackendDict(e.data)}):t.resolve(o.createDefault())}}}])},function(e,t){oppia.factory("DeviceInfoService",["$window",function(e){return{isMobileDevice:function(){return Boolean(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},isMobileUserAgent:function(){return/Mobi/.test(navigator.userAgent)},hasTouchEvents:function(){return"ontouchstart"in e}}}])},function(e,t){oppia.factory("UrlService",["$window",function(e){return{getCurrentLocation:function(){return e.location},getCurrentQueryString:function(){return this.getCurrentLocation().search},getUrlParams:function(){var e={};this.getCurrentQueryString().replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,r){e[decodeURIComponent(n)]=decodeURIComponent(r)});return e},isIframed:function(){return"embed"===this.getPathname().split("/")[1]},getPathname:function(){return this.getCurrentLocation().pathname},getTopicIdFromUrl:function(){var e=this.getPathname();if(e.match(/\/(story|topic)_editor\/(\w|-){12}/g))return e.split("/")[2];throw Error("Invalid topic id url")},getTopicNameFromLearnerUrl:function(){var e=this.getPathname();if(e.match(/\/(story|topic)/g))return decodeURIComponent(e.split("/")[2]);throw Error("Invalid URL for topic")},getStoryIdFromUrl:function(){var e=this.getPathname();if(e.match(/\/story_editor(\/(\w|-){12}){2}/g))return e.split("/")[3];throw Error("Invalid story id url")},getStoryIdInPlayer:function(){var e=this.getCurrentQueryString();return e.match(/\?story_id=((\w|-){12})/g)?e.split("=")[1]:null},getSkillIdFromUrl:function(){var e=this.getPathname().split("/")[2];if(12!==e.length)throw Error("Invalid Skill Id");return e},getQueryFieldValuesAsList:function(e){var t=[];if(this.getCurrentQueryString().indexOf("?")>-1)for(var n=this.getCurrentQueryString().slice(this.getCurrentQueryString().indexOf("?")+1).split("&"),r=0;r<n.length;r++){var o=decodeURIComponent(n[r].split("=")[0]),i=decodeURIComponent(n[r].split("=")[1]);o===e&&t.push(i)}return t},addField:function(e,t,n){var r=encodeURIComponent(n),o=encodeURIComponent(t);return e+(-1!==e.indexOf("?")?"&":"?")+o+"="+r},getHash:function(){return this.getCurrentLocation().hash}}}])},function(e,t){oppia.factory("BackgroundMaskService",[function(){var e=!1;return{isMaskActive:function(){return e},activateMask:function(){e=!0},deactivateMask:function(){e=!1}}}])},function(e,t,n){n(18),n(19),oppia.directive("createActivityButton",["UrlInterpolationService",function(e){return{restrict:"E",templateUrl:e.getDirectiveTemplateUrl("/components/create_button/create_activity_button_directive.html"),controller:["$scope","$timeout","$window","$uibModal","ExplorationCreationService","CollectionCreationService","SiteAnalyticsService","UrlService","UserService","ALLOW_YAML_FILE_UPLOAD",function(t,n,r,o,i,a,c,s,l,u){t.creationInProgress=!1,t.allowYamlFileUpload=u,t.canCreateCollections=null,t.userIsLoggedIn=null,l.getUserInfoAsync().then(function(e){t.canCreateCollections=e.canCreateCollections(),t.userIsLoggedIn=e.isLoggedIn()}),t.showUploadExplorationModal=i.showUploadExplorationModal,t.onRedirectToLogin=function(e){return c.registerStartLoginEvent("createActivityButton"),n(function(){r.location=e},150),!1},t.initCreationProcess=function(){t.creationInProgress||(t.creationInProgress=!0,t.canCreateCollections?"/creator_dashboard"!==s.getPathname()?r.location.replace("/creator_dashboard?mode=create"):o.open({templateUrl:e.getDirectiveTemplateUrl("/pages/creator_dashboard/create_activity_modal_directive.html"),backdrop:!0,controller:["$scope","$uibModalInstance",function(t,n){l.getUserInfoAsync().then(function(e){t.canCreateCollections=e.canCreateCollections()}),t.chooseExploration=function(){i.createNewExploration(),n.close()},t.chooseCollection=function(){a.createNewCollection(),n.close()},t.cancel=function(){n.dismiss("cancel")},t.explorationImgUrl=e.getStaticImageUrl("/activity/exploration.svg"),t.collectionImgUrl=e.getStaticImageUrl("/activity/collection.svg")}],windowClass:"oppia-creation-modal"}).result.then(function(){},function(){t.creationInProgress=!1}):i.createNewExploration())},"create"===s.getUrlParams().mode&&(t.canCreateCollections?t.initCreationProcess():i.createNewExploration())}]}}])},function(e,t){oppia.factory("CollectionCreationService",["$http","$window","$rootScope","$timeout","AlertsService","UrlInterpolationService","SiteAnalyticsService",function(e,t,n,r,o,i,a){var c=!1;return{createNewCollection:function(){c||(c=!0,o.clearWarnings(),n.loadingMessage="Creating collection",e.post("/collection_editor_handler/create_new",{}).then(function(e){a.registerCreateNewCollectionEvent(e.data.collectionId),r(function(){t.location=i.interpolateUrl("/collection_editor/create/<collection_id>",{collection_id:e.data.collectionId})},150)},function(){n.loadingMessage=""}))}}}])},function(e,t){oppia.factory("ExplorationCreationService",["$http","$uibModal","$timeout","$rootScope","$window","AlertsService","SiteAnalyticsService","UrlInterpolationService",function(e,t,n,r,o,i,a,c){var s=!1;return{createNewExploration:function(){s||(s=!0,i.clearWarnings(),r.loadingMessage="Creating exploration",e.post("/contributehandler/create_new",{}).then(function(e){return a.registerCreateNewExplorationEvent(e.data.explorationId),n(function(){o.location=c.interpolateUrl("/create/<exploration_id>",{exploration_id:e.data.explorationId})},150),!1},function(){r.loadingMessage="",s=!1}))},showUploadExplorationModal:function(){i.clearWarnings(),t.open({backdrop:!0,templateUrl:c.getDirectiveTemplateUrl("/pages/creator_dashboard/upload_activity_modal_directive.html"),controller:["$scope","$uibModalInstance",function(e,t){e.save=function(){var e={},n=document.getElementById("newFileInput").files[0];n&&n.size?(e.yamlFile=n,t.close(e)):i.addWarning("Empty file detected.")},e.cancel=function(){t.dismiss("cancel"),i.clearWarnings()}}]}).result.then(function(e){var t=e.yamlFile;r.loadingMessage="Creating exploration";var n=new FormData;n.append("yaml_file",t),n.append("payload",JSON.stringify({})),n.append("csrf_token",GLOBALS.csrf_token),$.ajax({contentType:!1,data:n,dataFilter:function(e){return JSON.parse(e.substring(5))},dataType:"text",processData:!1,type:"POST",url:"contributehandler/upload"}).done(function(e){o.location=c.interpolateUrl("/create/<exploration_id>",{exploration_id:e.explorationId})}).fail(function(e){var t=e.responseText.substring(5),n=JSON.parse(t);i.addWarning(n.error||"Error communicating with server."),r.loadingMessage="",$scope.$apply()})})}}}])},function(e,t){oppia.directive("promoBar",["UrlInterpolationService",function(e){return{restrict:"E",scope:{getPromoMessage:"&promoMessage"},templateUrl:e.getDirectiveTemplateUrl("/components/promo/promo_bar_directive.html"),controller:["$scope",function(e){e.promoIsVisible=!angular.fromJson(sessionStorage.promoIsDismissed),e.dismissPromo=function(){var t;e.promoIsVisible=!1,t=!0,sessionStorage.promoIsDismissed=angular.toJson(t)}}]}}])},function(e,t){oppia.directive("sideNavigationBar",["UrlInterpolationService",function(e){return{restrict:"E",scope:{},templateUrl:e.getDirectiveTemplateUrl("/components/side_navigation_bar/side_navigation_bar_directive.html"),controller:["$scope","$timeout",function(t,n){t.currentUrl=window.location.pathname,t.getStaticImageUrl=e.getStaticImageUrl}]}}])},function(e,t){oppia.directive("socialButtons",["UrlInterpolationService",function(e){return{restrict:"E",scope:{},templateUrl:e.getDirectiveTemplateUrl("/components/social_buttons/social_buttons_directive.html"),controller:["$scope",function(t){t.getStaticImageUrl=e.getStaticImageUrl}]}}])},function(e,t){oppia.directive("topNavigationBar",["UrlInterpolationService",function(e){return{restrict:"E",scope:{},templateUrl:e.getDirectiveTemplateUrl("/components/top_navigation_bar/top_navigation_bar_directive.html"),controller:["$scope","$http","$window","$timeout","$translate","SidebarStatusService","LABEL_FOR_CLEARING_FOCUS","UserService","SiteAnalyticsService","NavigationService","WindowDimensionsService","DebouncerService","DeviceInfoService",function(t,n,r,o,i,a,c,s,l,u,p,f,d){t.isModerator=null,t.isAdmin=null,t.isSuperAdmin=null,t.userIsLoggedIn=null,t.username="",s.getUserInfoAsync().then(function(o){o.getPreferredSiteLanguageCode()&&i.use(o.getPreferredSiteLanguageCode()),t.isModerator=o.isModerator(),t.isAdmin=o.isAdmin(),t.isSuperAdmin=o.isSuperAdmin(),t.userIsLoggedIn=o.isLoggedIn(),t.username=o.getUsername(),t.username&&(t.profilePageUrl=e.interpolateUrl("/profile/<username>",{username:t.username})),t.userIsLoggedIn&&n.get("/notificationshandler").then(function(e){var n=e.data;"/"!==r.location.pathname&&(t.numUnseenNotifications=n.num_unseen_notifications,t.numUnseenNotifications>0&&(r.document.title="("+t.numUnseenNotifications+") "+r.document.title))})}),s.getProfileImageDataUrlAsync().then(function(e){t.profilePictureDataUrl=e});t.currentUrl=window.location.pathname.split("/")[1],t.LABEL_FOR_CLEARING_FOCUS=c,t.newStructuresEnabled=constants.ENABLE_NEW_STRUCTURE_EDITORS,t.getStaticImageUrl=e.getStaticImageUrl,t.logoutUrl=GLOBALS.logoutUrl,t.userMenuIsShown="signup"!==t.currentUrl,t.standardNavIsShown=-1===["create","explore","collection","topics_and_skills_dashboard","topic_editor","skill_editor","story_editor"].indexOf(t.currentUrl),t.onLoginButtonClicked=function(){l.registerStartLoginEvent("loginButton"),s.getLoginAndLogoutUrls().then(function(e){e.login_url&&o(function(){r.location=e.login_url},150)})},t.googleSignInIconUrl=e.getStaticImageUrl("/google_signin_buttons/google_signin.svg"),t.onLogoutButtonClicked=function(){r.localStorage.removeItem("last_uploaded_audio_lang")},t.ACTION_OPEN=u.ACTION_OPEN,t.ACTION_CLOSE=u.ACTION_CLOSE,t.KEYBOARD_EVENT_TO_KEY_CODES=u.KEYBOARD_EVENT_TO_KEY_CODES,t.openSubmenu=function(e,t){u.openSubmenu(e,t)},t.blurNavigationLinks=function(e){$("nav a").blur()},t.closeSubmenu=function(e){u.closeSubmenu(e)},t.closeSubmenuIfNotMobile=function(e){d.isMobileDevice()||t.closeSubmenu(e)},t.onMenuKeypress=function(e,n,r){u.onMenuKeypress(e,n,r),t.activeMenuName=u.activeMenuName},angular.element(document).on("click",function(e){angular.element(e.target).closest("li").length||(t.activeMenuName="",t.$apply())}),t.windowIsNarrow=p.isWindowNarrow();var g=p.getWidth();t.navElementsVisibilityStatus={};for(var _=["I18N_TOPNAV_DONATE","I18N_TOPNAV_ABOUT","I18N_CREATE_EXPLORATION_CREATE","I18N_TOPNAV_LIBRARY"],S=0;S<_.length;S++)t.navElementsVisibilityStatus[_[S]]=!0;p.registerOnResizeHook(function(){if(t.windowIsNarrow=p.isWindowNarrow(),t.$apply(),g<p.getWidth())for(var e=0;e<_.length;e++)t.navElementsVisibilityStatus[_[e]]||(t.navElementsVisibilityStatus[_[e]]=!0);a.closeSidebar(),t.sidebarIsShown=a.isSidebarShown(),g=p.getWidth(),E()}),t.isSidebarShown=function(){return a.isSidebarShown()?angular.element(document.body).addClass("oppia-stop-scroll"):angular.element(document.body).removeClass("oppia-stop-scroll"),a.isSidebarShown()},t.toggleSidebar=function(){a.toggleSidebar()};var m=function(){if(!p.isWindowNarrow())if(function(){for(var e=!0,t=document.querySelectorAll(".oppia-navbar-tab-content"),n=0;n<t.length;n++)if(0===t[n].innerText.length){e=!1;break}return e}()){if(document.querySelector("div.collapse.navbar-collapse").clientHeight>60)for(var e=0;e<_.length;e++)if(t.navElementsVisibilityStatus[_[e]])return t.navElementsVisibilityStatus[_[e]]=!1,t.$apply(),void o(m,50)}else o(m,100)},E=f.debounce(m,500);o(m,0),t.$on("searchBarLoaded",function(){o(m,100)})}]}}])},function(e,t){oppia.factory("SidebarStatusService",["WindowDimensionsService",function(e){var t=!1,n=!1,r=function(){e.isWindowNarrow()&&!n&&(n=!0,t=!0)},o=function(){n&&(n=!1,t=!1)};return{isSidebarShown:function(){return n},openSidebar:function(){r()},closeSidebar:function(){o()},toggleSidebar:function(){n?o():r()},onDocumentClick:function(){t?t=!1:n=!1}}}])},function(e,t){oppia.factory("UserInfoObjectFactory",[function(){var e=function(e,t,n,r,o,i,a){this._isModerator=e,this._isAdmin=t,this._isSuperAdmin=n,this._canCreateCollections=r,this._preferredSiteLanguageCode=o,this._username=i,this._isLoggedIn=a};return e.prototype.isModerator=function(){return this._isModerator},e.prototype.isAdmin=function(){return this._isAdmin},e.prototype.isSuperAdmin=function(){return this._isSuperAdmin},e.prototype.canCreateCollections=function(){return this._canCreateCollections},e.prototype.getPreferredSiteLanguageCode=function(){return this._preferredSiteLanguageCode},e.prototype.getUsername=function(){return this._username},e.prototype.isLoggedIn=function(){return this._isLoggedIn},e.createFromBackendDict=function(t){return new e(t.is_moderator,t.is_admin,t.is_super_admin,t.can_create_collections,t.preferred_site_language_code,t.username,t.user_is_logged_in)},e.createDefault=function(){return new e(!1,!1,!1,!1,null,null,!1)},e}])}]);