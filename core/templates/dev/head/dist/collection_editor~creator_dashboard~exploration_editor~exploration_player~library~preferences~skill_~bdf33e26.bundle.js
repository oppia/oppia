(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["collection_editor~creator_dashboard~exploration_editor~exploration_player~library~preferences~skill_~bdf33e26"],{

/***/ "./core/templates/dev/head/domain/utilities/AudioLanguageObjectFactory.ts":
/*!********************************************************************************!*\
  !*** ./core/templates/dev/head/domain/utilities/AudioLanguageObjectFactory.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright 2017 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
/**
 * @fileoverview Object factory for creating audio languages.
 */
oppia.factory('AudioLanguageObjectFactory', [
    function () {
        var AudioLanguage = function (id, description, relatedLanguages) {
            this.id = id;
            this.description = description;
            this.relatedLanguages = relatedLanguages;
        };
        // TODO (ankita240796) Remove the bracket notation once Angular2 gets in.
        /* eslint-disable dot-notation */
        AudioLanguage['createFromDict'] = function (audioLanguageDict) {
            /* eslint-enable dot-notation */
            return new AudioLanguage(audioLanguageDict.id, audioLanguageDict.description, audioLanguageDict.related_languages);
        };
        return AudioLanguage;
    }
]);


/***/ }),

/***/ "./core/templates/dev/head/domain/utilities/AutogeneratedAudioLanguageObjectFactory.ts":
/*!*********************************************************************************************!*\
  !*** ./core/templates/dev/head/domain/utilities/AutogeneratedAudioLanguageObjectFactory.ts ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright 2017 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
/**
 * @fileoverview Object factory for creating autogenerated audio languages.
 */
oppia.factory('AutogeneratedAudioLanguageObjectFactory', [
    function () {
        var AutogeneratedAudioLanguage = function (id, description, explorationLanguage, speechSynthesisCode, speechSynthesisCodeMobile) {
            this.id = id;
            this.description = description;
            this.explorationLanguage = explorationLanguage;
            this.speechSynthesisCode = speechSynthesisCode;
            this.speechSynthesisCodeMobile = speechSynthesisCodeMobile;
        };
        // TODO (ankita240796) Remove the bracket notation once Angular2 gets in.
        /* eslint-disable dot-notation */
        AutogeneratedAudioLanguage['createFromDict'] = (
        /* eslint-enable dot-notation */
        function (autogeneratedAudioLanguageDict) {
            return new AutogeneratedAudioLanguage(autogeneratedAudioLanguageDict.id, autogeneratedAudioLanguageDict.description, autogeneratedAudioLanguageDict.exploration_language, autogeneratedAudioLanguageDict.speech_synthesis_code, autogeneratedAudioLanguageDict.speech_synthesis_code_mobile);
        });
        return AutogeneratedAudioLanguage;
    }
]);


/***/ }),

/***/ "./core/templates/dev/head/domain/utilities/BrowserCheckerService.ts":
/*!***************************************************************************!*\
  !*** ./core/templates/dev/head/domain/utilities/BrowserCheckerService.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright 2017 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
/**
 * @fileoverview Utility service for checking web browser type.
 */
oppia.factory('BrowserCheckerService', [
    'AUTOGENERATED_AUDIO_LANGUAGES',
    function (AUTOGENERATED_AUDIO_LANGUAGES) {
        // For details on the reliability of this check, see
        // https://stackoverflow.com/questions/9847580/
        // how-to-detect-safari-chrome-ie-firefox-and-opera-browser#answer-9851769
        var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) {
            return p.toString() === '[object SafariRemoteNotification]';
        })(!window.safari ||
            (typeof window.safari !== 'undefined' && window.safari.pushNotification));
        var _supportsSpeechSynthesis = function () {
            var supportLang = false;
            if (window.hasOwnProperty('speechSynthesis')) {
                speechSynthesis.getVoices().forEach(function (voice) {
                    AUTOGENERATED_AUDIO_LANGUAGES.forEach(function (audioLanguage) {
                        if (voice.lang === audioLanguage.speech_synthesis_code ||
                            (_isMobileDevice() &&
                                voice.lang === audioLanguage.speech_synthesis_code_mobile)) {
                            supportLang = true;
                        }
                    });
                });
            }
            return supportLang;
        };
        var _isMobileDevice = function () {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            return userAgent.match(/iPhone/i) || userAgent.match(/Android/i);
        };
        return {
            supportsSpeechSynthesis: function () {
                return _supportsSpeechSynthesis();
            },
            isMobileDevice: function () {
                return _isMobileDevice();
            }
        };
    }
]);


/***/ }),

/***/ "./core/templates/dev/head/domain/utilities/LanguageUtilService.ts":
/*!*************************************************************************!*\
  !*** ./core/templates/dev/head/domain/utilities/LanguageUtilService.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Copyright 2014 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
/**
 * @fileoverview Utility service for language operations.
 */
__webpack_require__(/*! domain/utilities/AudioLanguageObjectFactory.ts */ "./core/templates/dev/head/domain/utilities/AudioLanguageObjectFactory.ts");
__webpack_require__(/*! domain/utilities/AutogeneratedAudioLanguageObjectFactory.ts */ "./core/templates/dev/head/domain/utilities/AutogeneratedAudioLanguageObjectFactory.ts");
__webpack_require__(/*! domain/utilities/BrowserCheckerService.ts */ "./core/templates/dev/head/domain/utilities/BrowserCheckerService.ts");
oppia.factory('LanguageUtilService', [
    'AudioLanguageObjectFactory', 'AutogeneratedAudioLanguageObjectFactory',
    'BrowserCheckerService', 'ALL_LANGUAGE_CODES',
    'AUTOGENERATED_AUDIO_LANGUAGES', 'SUPPORTED_AUDIO_LANGUAGES',
    function (AudioLanguageObjectFactory, AutogeneratedAudioLanguageObjectFactory, BrowserCheckerService, ALL_LANGUAGE_CODES, AUTOGENERATED_AUDIO_LANGUAGES, SUPPORTED_AUDIO_LANGUAGES) {
        var supportedAudioLanguageList = SUPPORTED_AUDIO_LANGUAGES;
        var autogeneratedAudioLanguageList = AUTOGENERATED_AUDIO_LANGUAGES;
        var supportedAudioLanguages = {};
        var autogeneratedAudioLanguagesByExplorationLanguageCode = {};
        var autogeneratedAudioLanguagesByAutogeneratedLanguageCode = {};
        var getShortLanguageDescription = function (fullLanguageDescription) {
            var ind = fullLanguageDescription.indexOf(' (');
            if (ind === -1) {
                return fullLanguageDescription;
            }
            else {
                return fullLanguageDescription.substring(0, ind);
            }
        };
        var languageIdsAndTexts = ALL_LANGUAGE_CODES.map(function (languageItem) {
            return {
                id: languageItem.code,
                text: getShortLanguageDescription(languageItem.description)
            };
        });
        var allAudioLanguageCodes = (supportedAudioLanguageList.map(function (audioLanguage) {
            return audioLanguage.id;
        }));
        supportedAudioLanguageList.forEach(function (audioLanguageDict) {
            supportedAudioLanguages[audioLanguageDict.id] =
                AudioLanguageObjectFactory.createFromDict(audioLanguageDict);
        });
        autogeneratedAudioLanguageList.forEach(function (autogeneratedAudioLanguageDict) {
            var autogeneratedAudioLanguage = AutogeneratedAudioLanguageObjectFactory.createFromDict(autogeneratedAudioLanguageDict);
            autogeneratedAudioLanguagesByExplorationLanguageCode[autogeneratedAudioLanguage.explorationLanguage] =
                autogeneratedAudioLanguage;
            autogeneratedAudioLanguagesByAutogeneratedLanguageCode[autogeneratedAudioLanguage.id] =
                autogeneratedAudioLanguage;
        });
        var audioLanguagesCount = allAudioLanguageCodes.length;
        return {
            getLanguageIdsAndTexts: function () {
                return languageIdsAndTexts;
            },
            getAudioLanguagesCount: function () {
                return audioLanguagesCount;
            },
            getAllVoiceoverLanguageCodes: function () {
                return angular.copy(allAudioLanguageCodes);
            },
            getAudioLanguageDescription: function (audioLanguageCode) {
                return supportedAudioLanguages[audioLanguageCode].description;
            },
            // Given a list of audio language codes, returns the complement list, i.e.
            // the list of audio language codes not in the input list.
            getComplementAudioLanguageCodes: function (audioLanguageCodes) {
                return allAudioLanguageCodes.filter(function (languageCode) {
                    return audioLanguageCodes.indexOf(languageCode) === -1;
                });
            },
            getLanguageCodesRelatedToAudioLanguageCode: function (audioLanguageCode) {
                return supportedAudioLanguages[audioLanguageCode].relatedLanguages;
            },
            supportsAutogeneratedAudio: function (explorationLanguageCode) {
                return (BrowserCheckerService.supportsSpeechSynthesis() &&
                    autogeneratedAudioLanguagesByExplorationLanguageCode
                        .hasOwnProperty(explorationLanguageCode));
            },
            isAutogeneratedAudioLanguage: function (audioLanguageCode) {
                return autogeneratedAudioLanguagesByAutogeneratedLanguageCode
                    .hasOwnProperty(audioLanguageCode);
            },
            getAutogeneratedAudioLanguage: function (explorationLanguageCode) {
                return autogeneratedAudioLanguagesByExplorationLanguageCode[explorationLanguageCode];
            }
        };
    }
]);


/***/ }),

/***/ "./core/templates/dev/head/filters/string-utility-filters/convert-to-plain-text.filter.ts":
/*!************************************************************************************************!*\
  !*** ./core/templates/dev/head/filters/string-utility-filters/convert-to-plain-text.filter.ts ***!
  \************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright 2019 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
/**
 * @fileoverview ConvertToPlainText filter for Oppia.
 */
angular.module('stringUtilityFiltersModule').filter('convertToPlainText', [function () {
        return function (input) {
            var strippedText = input.replace(/(<([^>]+)>)/ig, '');
            strippedText = strippedText.replace(/&nbsp;/ig, ' ');
            strippedText = strippedText.replace(/&quot;/ig, '');
            var trimmedText = strippedText.trim();
            if (trimmedText.length === 0) {
                return strippedText;
            }
            else {
                return trimmedText;
            }
        };
    }
]);


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb3JlL3RlbXBsYXRlcy9kZXYvaGVhZC9kb21haW4vdXRpbGl0aWVzL0F1ZGlvTGFuZ3VhZ2VPYmplY3RGYWN0b3J5LnRzIiwid2VicGFjazovLy8uL2NvcmUvdGVtcGxhdGVzL2Rldi9oZWFkL2RvbWFpbi91dGlsaXRpZXMvQXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2VPYmplY3RGYWN0b3J5LnRzIiwid2VicGFjazovLy8uL2NvcmUvdGVtcGxhdGVzL2Rldi9oZWFkL2RvbWFpbi91dGlsaXRpZXMvQnJvd3NlckNoZWNrZXJTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL2NvcmUvdGVtcGxhdGVzL2Rldi9oZWFkL2RvbWFpbi91dGlsaXRpZXMvTGFuZ3VhZ2VVdGlsU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9jb3JlL3RlbXBsYXRlcy9kZXYvaGVhZC9maWx0ZXJzL3N0cmluZy11dGlsaXR5LWZpbHRlcnMvY29udmVydC10by1wbGFpbi10ZXh0LmZpbHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQU8sQ0FBQyxnSUFBZ0Q7QUFDeEQsbUJBQU8sQ0FBQywwSkFBNkQ7QUFDckUsbUJBQU8sQ0FBQyxzSEFBMkM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RCx1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiY29sbGVjdGlvbl9lZGl0b3J+Y3JlYXRvcl9kYXNoYm9hcmR+ZXhwbG9yYXRpb25fZWRpdG9yfmV4cGxvcmF0aW9uX3BsYXllcn5saWJyYXJ5fnByZWZlcmVuY2VzfnNraWxsX35iZGYzM2UyNi5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNyBUaGUgT3BwaWEgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IE9iamVjdCBmYWN0b3J5IGZvciBjcmVhdGluZyBhdWRpbyBsYW5ndWFnZXMuXG4gKi9cbm9wcGlhLmZhY3RvcnkoJ0F1ZGlvTGFuZ3VhZ2VPYmplY3RGYWN0b3J5JywgW1xuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIEF1ZGlvTGFuZ3VhZ2UgPSBmdW5jdGlvbiAoaWQsIGRlc2NyaXB0aW9uLCByZWxhdGVkTGFuZ3VhZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgICAgICB0aGlzLnJlbGF0ZWRMYW5ndWFnZXMgPSByZWxhdGVkTGFuZ3VhZ2VzO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPIChhbmtpdGEyNDA3OTYpIFJlbW92ZSB0aGUgYnJhY2tldCBub3RhdGlvbiBvbmNlIEFuZ3VsYXIyIGdldHMgaW4uXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIGRvdC1ub3RhdGlvbiAqL1xuICAgICAgICBBdWRpb0xhbmd1YWdlWydjcmVhdGVGcm9tRGljdCddID0gZnVuY3Rpb24gKGF1ZGlvTGFuZ3VhZ2VEaWN0KSB7XG4gICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIGRvdC1ub3RhdGlvbiAqL1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0xhbmd1YWdlKGF1ZGlvTGFuZ3VhZ2VEaWN0LmlkLCBhdWRpb0xhbmd1YWdlRGljdC5kZXNjcmlwdGlvbiwgYXVkaW9MYW5ndWFnZURpY3QucmVsYXRlZF9sYW5ndWFnZXMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQXVkaW9MYW5ndWFnZTtcbiAgICB9XG5dKTtcbiIsIi8vIENvcHlyaWdodCAyMDE3IFRoZSBPcHBpYSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgT2JqZWN0IGZhY3RvcnkgZm9yIGNyZWF0aW5nIGF1dG9nZW5lcmF0ZWQgYXVkaW8gbGFuZ3VhZ2VzLlxuICovXG5vcHBpYS5mYWN0b3J5KCdBdXRvZ2VuZXJhdGVkQXVkaW9MYW5ndWFnZU9iamVjdEZhY3RvcnknLCBbXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgQXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2UgPSBmdW5jdGlvbiAoaWQsIGRlc2NyaXB0aW9uLCBleHBsb3JhdGlvbkxhbmd1YWdlLCBzcGVlY2hTeW50aGVzaXNDb2RlLCBzcGVlY2hTeW50aGVzaXNDb2RlTW9iaWxlKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgICAgICB0aGlzLmV4cGxvcmF0aW9uTGFuZ3VhZ2UgPSBleHBsb3JhdGlvbkxhbmd1YWdlO1xuICAgICAgICAgICAgdGhpcy5zcGVlY2hTeW50aGVzaXNDb2RlID0gc3BlZWNoU3ludGhlc2lzQ29kZTtcbiAgICAgICAgICAgIHRoaXMuc3BlZWNoU3ludGhlc2lzQ29kZU1vYmlsZSA9IHNwZWVjaFN5bnRoZXNpc0NvZGVNb2JpbGU7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE8gKGFua2l0YTI0MDc5NikgUmVtb3ZlIHRoZSBicmFja2V0IG5vdGF0aW9uIG9uY2UgQW5ndWxhcjIgZ2V0cyBpbi5cbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgZG90LW5vdGF0aW9uICovXG4gICAgICAgIEF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlWydjcmVhdGVGcm9tRGljdCddID0gKFxuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIGRvdC1ub3RhdGlvbiAqL1xuICAgICAgICBmdW5jdGlvbiAoYXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2VEaWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlKGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlRGljdC5pZCwgYXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2VEaWN0LmRlc2NyaXB0aW9uLCBhdXRvZ2VuZXJhdGVkQXVkaW9MYW5ndWFnZURpY3QuZXhwbG9yYXRpb25fbGFuZ3VhZ2UsIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlRGljdC5zcGVlY2hfc3ludGhlc2lzX2NvZGUsIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlRGljdC5zcGVlY2hfc3ludGhlc2lzX2NvZGVfbW9iaWxlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBBdXRvZ2VuZXJhdGVkQXVkaW9MYW5ndWFnZTtcbiAgICB9XG5dKTtcbiIsIi8vIENvcHlyaWdodCAyMDE3IFRoZSBPcHBpYSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgVXRpbGl0eSBzZXJ2aWNlIGZvciBjaGVja2luZyB3ZWIgYnJvd3NlciB0eXBlLlxuICovXG5vcHBpYS5mYWN0b3J5KCdCcm93c2VyQ2hlY2tlclNlcnZpY2UnLCBbXG4gICAgJ0FVVE9HRU5FUkFURURfQVVESU9fTEFOR1VBR0VTJyxcbiAgICBmdW5jdGlvbiAoQVVUT0dFTkVSQVRFRF9BVURJT19MQU5HVUFHRVMpIHtcbiAgICAgICAgLy8gRm9yIGRldGFpbHMgb24gdGhlIHJlbGlhYmlsaXR5IG9mIHRoaXMgY2hlY2ssIHNlZVxuICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy85ODQ3NTgwL1xuICAgICAgICAvLyBob3ctdG8tZGV0ZWN0LXNhZmFyaS1jaHJvbWUtaWUtZmlyZWZveC1hbmQtb3BlcmEtYnJvd3NlciNhbnN3ZXItOTg1MTc2OVxuICAgICAgICB2YXIgaXNTYWZhcmkgPSAvY29uc3RydWN0b3IvaS50ZXN0KHdpbmRvdy5IVE1MRWxlbWVudCkgfHwgKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICByZXR1cm4gcC50b1N0cmluZygpID09PSAnW29iamVjdCBTYWZhcmlSZW1vdGVOb3RpZmljYXRpb25dJztcbiAgICAgICAgfSkoIXdpbmRvdy5zYWZhcmkgfHxcbiAgICAgICAgICAgICh0eXBlb2Ygd2luZG93LnNhZmFyaSAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnNhZmFyaS5wdXNoTm90aWZpY2F0aW9uKSk7XG4gICAgICAgIHZhciBfc3VwcG9ydHNTcGVlY2hTeW50aGVzaXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3VwcG9ydExhbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaGFzT3duUHJvcGVydHkoJ3NwZWVjaFN5bnRoZXNpcycpKSB7XG4gICAgICAgICAgICAgICAgc3BlZWNoU3ludGhlc2lzLmdldFZvaWNlcygpLmZvckVhY2goZnVuY3Rpb24gKHZvaWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIEFVVE9HRU5FUkFURURfQVVESU9fTEFOR1VBR0VTLmZvckVhY2goZnVuY3Rpb24gKGF1ZGlvTGFuZ3VhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2ljZS5sYW5nID09PSBhdWRpb0xhbmd1YWdlLnNwZWVjaF9zeW50aGVzaXNfY29kZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfaXNNb2JpbGVEZXZpY2UoKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2ljZS5sYW5nID09PSBhdWRpb0xhbmd1YWdlLnNwZWVjaF9zeW50aGVzaXNfY29kZV9tb2JpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydExhbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdXBwb3J0TGFuZztcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIF9pc01vYmlsZURldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhO1xuICAgICAgICAgICAgcmV0dXJuIHVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpIHx8IHVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1cHBvcnRzU3BlZWNoU3ludGhlc2lzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBwb3J0c1NwZWVjaFN5bnRoZXNpcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzTW9iaWxlRGV2aWNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pc01vYmlsZURldmljZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbl0pO1xuIiwiLy8gQ29weXJpZ2h0IDIwMTQgVGhlIE9wcGlhIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vL1xuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbi8qKlxuICogQGZpbGVvdmVydmlldyBVdGlsaXR5IHNlcnZpY2UgZm9yIGxhbmd1YWdlIG9wZXJhdGlvbnMuXG4gKi9cbnJlcXVpcmUoJ2RvbWFpbi91dGlsaXRpZXMvQXVkaW9MYW5ndWFnZU9iamVjdEZhY3RvcnkudHMnKTtcbnJlcXVpcmUoJ2RvbWFpbi91dGlsaXRpZXMvQXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2VPYmplY3RGYWN0b3J5LnRzJyk7XG5yZXF1aXJlKCdkb21haW4vdXRpbGl0aWVzL0Jyb3dzZXJDaGVja2VyU2VydmljZS50cycpO1xub3BwaWEuZmFjdG9yeSgnTGFuZ3VhZ2VVdGlsU2VydmljZScsIFtcbiAgICAnQXVkaW9MYW5ndWFnZU9iamVjdEZhY3RvcnknLCAnQXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2VPYmplY3RGYWN0b3J5JyxcbiAgICAnQnJvd3NlckNoZWNrZXJTZXJ2aWNlJywgJ0FMTF9MQU5HVUFHRV9DT0RFUycsXG4gICAgJ0FVVE9HRU5FUkFURURfQVVESU9fTEFOR1VBR0VTJywgJ1NVUFBPUlRFRF9BVURJT19MQU5HVUFHRVMnLFxuICAgIGZ1bmN0aW9uIChBdWRpb0xhbmd1YWdlT2JqZWN0RmFjdG9yeSwgQXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2VPYmplY3RGYWN0b3J5LCBCcm93c2VyQ2hlY2tlclNlcnZpY2UsIEFMTF9MQU5HVUFHRV9DT0RFUywgQVVUT0dFTkVSQVRFRF9BVURJT19MQU5HVUFHRVMsIFNVUFBPUlRFRF9BVURJT19MQU5HVUFHRVMpIHtcbiAgICAgICAgdmFyIHN1cHBvcnRlZEF1ZGlvTGFuZ3VhZ2VMaXN0ID0gU1VQUE9SVEVEX0FVRElPX0xBTkdVQUdFUztcbiAgICAgICAgdmFyIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlTGlzdCA9IEFVVE9HRU5FUkFURURfQVVESU9fTEFOR1VBR0VTO1xuICAgICAgICB2YXIgc3VwcG9ydGVkQXVkaW9MYW5ndWFnZXMgPSB7fTtcbiAgICAgICAgdmFyIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlc0J5RXhwbG9yYXRpb25MYW5ndWFnZUNvZGUgPSB7fTtcbiAgICAgICAgdmFyIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlc0J5QXV0b2dlbmVyYXRlZExhbmd1YWdlQ29kZSA9IHt9O1xuICAgICAgICB2YXIgZ2V0U2hvcnRMYW5ndWFnZURlc2NyaXB0aW9uID0gZnVuY3Rpb24gKGZ1bGxMYW5ndWFnZURlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB2YXIgaW5kID0gZnVsbExhbmd1YWdlRGVzY3JpcHRpb24uaW5kZXhPZignICgnKTtcbiAgICAgICAgICAgIGlmIChpbmQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bGxMYW5ndWFnZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bGxMYW5ndWFnZURlc2NyaXB0aW9uLnN1YnN0cmluZygwLCBpbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgbGFuZ3VhZ2VJZHNBbmRUZXh0cyA9IEFMTF9MQU5HVUFHRV9DT0RFUy5tYXAoZnVuY3Rpb24gKGxhbmd1YWdlSXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogbGFuZ3VhZ2VJdGVtLmNvZGUsXG4gICAgICAgICAgICAgICAgdGV4dDogZ2V0U2hvcnRMYW5ndWFnZURlc2NyaXB0aW9uKGxhbmd1YWdlSXRlbS5kZXNjcmlwdGlvbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYWxsQXVkaW9MYW5ndWFnZUNvZGVzID0gKHN1cHBvcnRlZEF1ZGlvTGFuZ3VhZ2VMaXN0Lm1hcChmdW5jdGlvbiAoYXVkaW9MYW5ndWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIGF1ZGlvTGFuZ3VhZ2UuaWQ7XG4gICAgICAgIH0pKTtcbiAgICAgICAgc3VwcG9ydGVkQXVkaW9MYW5ndWFnZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoYXVkaW9MYW5ndWFnZURpY3QpIHtcbiAgICAgICAgICAgIHN1cHBvcnRlZEF1ZGlvTGFuZ3VhZ2VzW2F1ZGlvTGFuZ3VhZ2VEaWN0LmlkXSA9XG4gICAgICAgICAgICAgICAgQXVkaW9MYW5ndWFnZU9iamVjdEZhY3RvcnkuY3JlYXRlRnJvbURpY3QoYXVkaW9MYW5ndWFnZURpY3QpO1xuICAgICAgICB9KTtcbiAgICAgICAgYXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2VMaXN0LmZvckVhY2goZnVuY3Rpb24gKGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlRGljdCkge1xuICAgICAgICAgICAgdmFyIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlID0gQXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2VPYmplY3RGYWN0b3J5LmNyZWF0ZUZyb21EaWN0KGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlRGljdCk7XG4gICAgICAgICAgICBhdXRvZ2VuZXJhdGVkQXVkaW9MYW5ndWFnZXNCeUV4cGxvcmF0aW9uTGFuZ3VhZ2VDb2RlW2F1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlLmV4cGxvcmF0aW9uTGFuZ3VhZ2VdID1cbiAgICAgICAgICAgICAgICBhdXRvZ2VuZXJhdGVkQXVkaW9MYW5ndWFnZTtcbiAgICAgICAgICAgIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlc0J5QXV0b2dlbmVyYXRlZExhbmd1YWdlQ29kZVthdXRvZ2VuZXJhdGVkQXVkaW9MYW5ndWFnZS5pZF0gPVxuICAgICAgICAgICAgICAgIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGF1ZGlvTGFuZ3VhZ2VzQ291bnQgPSBhbGxBdWRpb0xhbmd1YWdlQ29kZXMubGVuZ3RoO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0TGFuZ3VhZ2VJZHNBbmRUZXh0czogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZUlkc0FuZFRleHRzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEF1ZGlvTGFuZ3VhZ2VzQ291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXVkaW9MYW5ndWFnZXNDb3VudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBbGxWb2ljZW92ZXJMYW5ndWFnZUNvZGVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuY29weShhbGxBdWRpb0xhbmd1YWdlQ29kZXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEF1ZGlvTGFuZ3VhZ2VEZXNjcmlwdGlvbjogZnVuY3Rpb24gKGF1ZGlvTGFuZ3VhZ2VDb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRlZEF1ZGlvTGFuZ3VhZ2VzW2F1ZGlvTGFuZ3VhZ2VDb2RlXS5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBHaXZlbiBhIGxpc3Qgb2YgYXVkaW8gbGFuZ3VhZ2UgY29kZXMsIHJldHVybnMgdGhlIGNvbXBsZW1lbnQgbGlzdCwgaS5lLlxuICAgICAgICAgICAgLy8gdGhlIGxpc3Qgb2YgYXVkaW8gbGFuZ3VhZ2UgY29kZXMgbm90IGluIHRoZSBpbnB1dCBsaXN0LlxuICAgICAgICAgICAgZ2V0Q29tcGxlbWVudEF1ZGlvTGFuZ3VhZ2VDb2RlczogZnVuY3Rpb24gKGF1ZGlvTGFuZ3VhZ2VDb2Rlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhbGxBdWRpb0xhbmd1YWdlQ29kZXMuZmlsdGVyKGZ1bmN0aW9uIChsYW5ndWFnZUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1ZGlvTGFuZ3VhZ2VDb2Rlcy5pbmRleE9mKGxhbmd1YWdlQ29kZSkgPT09IC0xO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldExhbmd1YWdlQ29kZXNSZWxhdGVkVG9BdWRpb0xhbmd1YWdlQ29kZTogZnVuY3Rpb24gKGF1ZGlvTGFuZ3VhZ2VDb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRlZEF1ZGlvTGFuZ3VhZ2VzW2F1ZGlvTGFuZ3VhZ2VDb2RlXS5yZWxhdGVkTGFuZ3VhZ2VzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzQXV0b2dlbmVyYXRlZEF1ZGlvOiBmdW5jdGlvbiAoZXhwbG9yYXRpb25MYW5ndWFnZUNvZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKEJyb3dzZXJDaGVja2VyU2VydmljZS5zdXBwb3J0c1NwZWVjaFN5bnRoZXNpcygpICYmXG4gICAgICAgICAgICAgICAgICAgIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlc0J5RXhwbG9yYXRpb25MYW5ndWFnZUNvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oYXNPd25Qcm9wZXJ0eShleHBsb3JhdGlvbkxhbmd1YWdlQ29kZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzQXV0b2dlbmVyYXRlZEF1ZGlvTGFuZ3VhZ2U6IGZ1bmN0aW9uIChhdWRpb0xhbmd1YWdlQ29kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdXRvZ2VuZXJhdGVkQXVkaW9MYW5ndWFnZXNCeUF1dG9nZW5lcmF0ZWRMYW5ndWFnZUNvZGVcbiAgICAgICAgICAgICAgICAgICAgLmhhc093blByb3BlcnR5KGF1ZGlvTGFuZ3VhZ2VDb2RlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBdXRvZ2VuZXJhdGVkQXVkaW9MYW5ndWFnZTogZnVuY3Rpb24gKGV4cGxvcmF0aW9uTGFuZ3VhZ2VDb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF1dG9nZW5lcmF0ZWRBdWRpb0xhbmd1YWdlc0J5RXhwbG9yYXRpb25MYW5ndWFnZUNvZGVbZXhwbG9yYXRpb25MYW5ndWFnZUNvZGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbl0pO1xuIiwiLy8gQ29weXJpZ2h0IDIwMTkgVGhlIE9wcGlhIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vL1xuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbi8qKlxuICogQGZpbGVvdmVydmlldyBDb252ZXJ0VG9QbGFpblRleHQgZmlsdGVyIGZvciBPcHBpYS5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ3N0cmluZ1V0aWxpdHlGaWx0ZXJzTW9kdWxlJykuZmlsdGVyKCdjb252ZXJ0VG9QbGFpblRleHQnLCBbZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgc3RyaXBwZWRUZXh0ID0gaW5wdXQucmVwbGFjZSgvKDwoW14+XSspPikvaWcsICcnKTtcbiAgICAgICAgICAgIHN0cmlwcGVkVGV4dCA9IHN0cmlwcGVkVGV4dC5yZXBsYWNlKC8mbmJzcDsvaWcsICcgJyk7XG4gICAgICAgICAgICBzdHJpcHBlZFRleHQgPSBzdHJpcHBlZFRleHQucmVwbGFjZSgvJnF1b3Q7L2lnLCAnJyk7XG4gICAgICAgICAgICB2YXIgdHJpbW1lZFRleHQgPSBzdHJpcHBlZFRleHQudHJpbSgpO1xuICAgICAgICAgICAgaWYgKHRyaW1tZWRUZXh0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpcHBlZFRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJpbW1lZFRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXSk7XG4iXSwic291cmNlUm9vdCI6IiJ9