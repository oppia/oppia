<style>
  outcome-editor .oppia-confusing-outcome-warning-text {
    color: rgb(200, 0, 0);
    font-style: italic;
  }
</style>
<div ng-if="!outcomeEditorCtrl.feedbackEditorIsOpen && outcomeEditorCtrl.displayFeedback"
     title="<[outcomeEditorCtrl.isEditable() ? 'Edit feedback' : '']>"
     style="height: 100%;">
  <div class="oppia-readonly-rule-tile protractor-test-edit-outcome-feedback-button"
       ng-class="{'oppia-editable-section': outcomeEditorCtrl.isEditable()}">
    <div class="oppia-rule-preview oppia-transition-200">
      <div class="oppia-click-to-start-editing protractor-test-open-outcome-feedback-editor"
           ng-if="outcomeEditorCtrl.isEditable()" ng-click="outcomeEditorCtrl.openFeedbackEditor()">
        <i ng-if="outcomeEditorCtrl.isEditable()" class="material-icons oppia-editor-edit-icon pull-right"
           title="Edit Feedback">&#xE254;
        </i>
      </div>

      <strong>Oppia tells the learner...</strong>
      <div style="position: relative;">
        <span ng-if="outcomeEditorCtrl.isSelfLoopWithNoFeedback(outcomeEditorCtrl.outcome) && !outcomeEditorCtrl.areWarningsSuppressed()">
          <span class="oppia-confusing-outcome-warning-text">
            <i class="material-icons">&#xE002;</i>
            Please give Oppia something useful to say here.
          </span>
        </span>
        <span ng-if="(!outcomeEditorCtrl.isSelfLoopWithNoFeedback(outcomeEditorCtrl.outcome) && !outcomeEditorCtrl.outcome.hasNonemptyFeedback()) || (outcomeEditorCtrl.isSelfLoopWithNoFeedback(outcomeEditorCtrl.outcome) && outcomeEditorCtrl.areWarningsSuppressed())"
              style="color: #888">
          <em>Nothing</em>
        </span>
        <span ng-if="outcomeEditorCtrl.outcome.hasNonemptyFeedback()" style="word-wrap: break-word;">
          <angular-html-bind class="oppia-rte-editor" html-data="outcomeEditorCtrl.outcome.feedback.getHtml()">
          </angular-html-bind>
        </span>
      </div>
    </div>
    <!-- This is a dummy div created to mask the contents when hovored above outcome editor contents -->
    <div class="oppia-rule-preview-section-mask"></div>
  </div>
</div>

<div ng-if="outcomeEditorCtrl.isEditable() && outcomeEditorCtrl.feedbackEditorIsOpen">
  <form role="form"
        class="form-inline protractor-test-edit-outcome-feedback"
        name="outcomeEditorCtrl.editOutcomeForm.editFeedbackForm">
    <outcome-feedback-editor outcome="outcomeEditorCtrl.outcome">
    </outcome-feedback-editor>
  </form>

  <div class="oppia-rule-save-cancel-buttons">
    <div class="pull-right">
      <button type="button"
              class="btn btn-default"
              ng-click="outcomeEditorCtrl.cancelThisFeedbackEdit()">
        Cancel
      </button>
      <button type="button"
              class="btn btn-success protractor-test-save-outcome-feedback"
              ng-disabled="outcomeEditorCtrl.invalidStateAfterFeedbackSave() || outcomeEditorCtrl.editOutcomeForm.editFeedbackForm.$invalid"
              ng-click="outcomeEditorCtrl.saveThisFeedback(true)">
        Save Feedback
      </button>
    </div>

    <div style="clear: both;"></div>
  </div>
</div>

<br ng-if="outcomeEditorCtrl.displayFeedback">

<div ng-if="!outcomeEditorCtrl.destinationEditorIsOpen && !outcomeEditorCtrl.isInQuestionMode()"
     style="height: 100%;"
     title="<[outcomeEditorCtrl.isEditable() ? 'Change the destination card' : '']>">
  <div class="oppia-readonly-rule-tile protractor-test-edit-outcome-dest-button"
       ng-class="{'oppia-editable-section': outcomeEditorCtrl.isEditable()}">
    <div class="oppia-rule-preview oppia-transition-200">
      <div class="oppia-click-to-start-editing protractor-test-open-outcome-dest-editor"
           ng-if="outcomeEditorCtrl.isEditable()" ng-click="outcomeEditorCtrl.openDestinationEditor()">
        <i ng-if="outcomeEditorCtrl.isEditable()" class="material-icons oppia-editor-edit-icon pull-right"
           title="Edit Destination">&#xE254;
        </i>
      </div>

      <div ng-if="outcomeEditorCtrl.outcome.dest !== outcomeEditorCtrl.getActiveStateName()">
        <strong ng-if="outcomeEditorCtrl.displayFeedback">And afterwards, directs the learner
        to...</strong>
        <strong ng-if="!outcomeEditorCtrl.displayFeedback">Oppia directs the learner to...</strong>
        <span ng-if="!outcomeEditorCtrl.isSelfLoop(outcomeEditorCtrl.outcome)" style="position: relative;">
          <[outcome.dest]>
        </span>
        <span ng-if="outcomeEditorCtrl.isSelfLoop(outcomeEditorCtrl.outcome)" style="position: relative;">
          <span ng-if="!outcomeEditorCtrl.outcome.refresherExplorationId">(try again)</span>
          <span ng-if="outcomeEditorCtrl.outcome.refresherExplorationId">
            (try again, with refresher exploration "<[outcomeEditorCtrl.outcome.refresherExplorationId]>")
          </span>
        </span>
        <div style="margin-top: 1em;" ng-if="outcomeEditorCtrl.outcome.missingPrerequisiteSkillId && outcomeEditorCtrl.canAddPrerequisiteSkill">
          <strong> Attached prerequisite skill for the current state: </strong>
          <[outcomeEditorCtrl.outcome.missingPrerequisiteSkillId]>
        </div>
      </div>
    </div>
  </div>
</div>

<div ng-if="outcomeEditorCtrl.isEditable() && outcomeEditorCtrl.destinationEditorIsOpen && !outcomeEditorCtrl.isInQuestionMode()">
  <form role="form"
        class="form-inline protractor-test-edit-outcome-dest"
        name="outcomeEditorCtrl.editOutcomeForm.editDestForm"
        ng-submit="outcomeEditorCtrl.saveThisDestination()">
    <outcome-destination-editor outcome="outcomeEditorCtrl.outcome"
                                outcome-has-feedback="outcomeEditorCtrl.displayFeedback"
                                add-state="outcomeEditorCtrl.addState">
    </outcome-destination-editor>
  </form>

  <div class="oppia-rule-save-cancel-buttons">
    <div class="pull-right">
      <button type="button"
              class="btn btn-default protractor-test-cancel-outcome-dest"
              ng-click="outcomeEditorCtrl.cancelThisDestinationEdit()">
        Cancel
      </button>
      <button type="button"
              class="btn btn-success protractor-test-save-outcome-dest"
              ng-disabled="outcomeEditorCtrl.invalidStateAfterDestinationSave() || outcomeEditorCtrl.editOutcomeForm.editDestForm.$invalid"
              ng-click="outcomeEditorCtrl.saveThisDestination()">
        Save Destination
      </button>
    </div>

    <div style="clear: both;"></div>
  </div>
</div>


<div class="oppia-correctness-label-editor" ng-if="outcomeEditorCtrl.isCorrectnessFeedbackEnabled() && !outcomeEditorCtrl.isCurrentInteractionLinear()">
  <div ng-if="!outcomeEditorCtrl.isEditable()"
       title="<[outcomeEditorCtrl.isEditable() ? 'Edit correctness setting' : '']>"
       style="height: 100%;">
    <div class="oppia-readonly-rule-tile"
         ng-class="{'oppia-editable-section': outcomeEditorCtrl.isEditable()}">
      <div class="oppia-rule-details-header">
        <div class="oppia-click-to-start-editing"
             ng-if="outcomeEditorCtrl.isEditable()" ng-click="outcomeEditorCtrl.openCorrectnessLabelEditor()">
          <i ng-if="outcomeEditorCtrl.isEditable()" class="material-icons oppia-editor-edit-icon pull-right"
             title="Edit Correctness setting">&#xE254;
          </i>
        </div>

        <strong>The answers falling under this group are
          <span ng-if="outcomeEditorCtrl.outcome.labelledAsCorrect" style="color: rgb(20, 180, 15)">
            correct
          </span>
          <span ng-if="!outcomeEditorCtrl.outcome.labelledAsCorrect" style="color: rgb(243, 13, 13)">
            incorrect
          </span>
        </strong>
      </div>
    </div>
  </div>

  <div ng-if="outcomeEditorCtrl.isEditable()">
    <strong>The answers in this group are correct</strong>
    <input class="protractor-test-editor-correctness-toggle" type="checkbox" ng-model="outcomeEditorCtrl.outcome.labelledAsCorrect" ng-change="outcomeEditorCtrl.onChangeCorrectnessLabel()">
  </div>
</div>
