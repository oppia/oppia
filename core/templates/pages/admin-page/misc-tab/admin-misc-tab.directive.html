<md-card class="oppia-page-card oppia-long-text oppia-long-text-card">
  <h3>Topic Similarities</h3>
  <div class="oppia-topic-similarities-container">
    Upload a csv file:<br>
    The first line of data should be a list of topic names. The next lines should be a symmetric adjacency matrix of similarities, which are values between 0 and 1.<br>
    <input type="file" id="topicSimilaritiesFile">
    <button ng-click="$ctrl.uploadTopicSimilaritiesFile()">Upload</button>
    <button ng-click="$ctrl.downloadTopicSimilaritiesFile()">Download current topic similarities</button>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Search Index</h3>
  <button ng-click="$ctrl.clearSearchIndex()">Clear Search Index</button>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Extract Data</h3>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.submitQuery()">
      <div class="form-group row">
        <label>Exploration ID:</label> <input type="text" ng-model="$ctrl.expId" required="true">
      </div>
      <div class="form-group row">
        <label>Exploration version:</label> <input type="number" min="0" ng-model="$ctrl.expVersion" required="true">
      </div>
      <div class="form-group row">
        <label>State name:</label> <input type="text" ng-model="$ctrl.stateName" required="true">
      </div>
      <div class="form-group row">
        <label>Number of answers:</label> <input type="number" min="0" ng-model="$ctrl.numAnswers" required="true">
      </div>
      <div class="form-group row">
        <input type="submit" value="submit query">
        <input type="reset" value="reset">
      </div>
    </form>
    <p> (To get all answers set number of answers to 0) </p>
    <p ng-if="$ctrl.showDataExtractionQueryStatus">Status: <[$ctrl.dataExtractionQueryStatusMessage]></p>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Regenerate contribution opportunities for a topic:</h3>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.regenerateOpportunitiesRelatedToTopic()">
      <div class="form-group row">
        <label>Topic ID:</label> <input type="text" ng-model="$ctrl.topicIdForRegeneratingOpportunities" required="true">
      </div>
      <div class="form-group row">
        <input type="submit" value="Regenerate">
        <input type="reset" value="reset">
      </div>
    </form>
    <p ng-if="$ctrl.regenerationMessage"><[$ctrl.regenerationMessage]></p>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Send a Test Mail to Admin</h3>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.sendDummyMailToAdmin()">
      <div class="form-group row">
        <input type="submit" value="Send">
      </div>
    </form>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Update username</h3>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.updateUsername()">
      <div class="form-group row">
        <label>Old username:</label>
        <input type="text" ng-model="$ctrl.oldUsername" required="true">
      </div>
      <div class="form-group row">
        <label>New username:</label>
        <input type="text" ng-model="$ctrl.newUsername" required="true" maxlength="<[$ctrl.MAX_USERNAME_LENGTH]>">
      </div>
      <div class="form-group row">
        <input type="submit" value="Update">
      </div>
    </form>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Number of pending deletion requests</h3>
  <div class="oppia-query-form">
    <form class="form"
          ng-submit="$ctrl.getNumberOfPendingDeletionRequestModels()">
      <div class="form-group row">
        <input type="submit"
               value="Get number of users whose deletion is currently in-progress">
      </div>
    </form>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Get models related to a user</h3>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.getModelsRelatedToUser()">
      <div class="form-group row">
        <label>User ID:</label>
        <input type="text" ng-model="$ctrl.userIdToGet" required="true">
      </div>
      <div class="form-group row">
        <input type="submit" value="Get">
      </div>
    </form>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Delete user</h3>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.deleteUser()">
      <div class="form-group row">
        <label>User ID:</label>
        <input type="text" ng-model="$ctrl.userIdToDelete" required="true">
      </div>
      <div class="form-group row">
        <label>Username:</label>
        <input type="text" ng-model="$ctrl.usernameToDelete" required="true">
      </div>
      <div class="form-group row">
        <input type="submit" value="Delete">
      </div>
    </form>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Regenerate missing exploration stats:</h3>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.regenerateMissingExplorationStats()">
      <div class="form-group row">
        <label class="w-100">Comma separated exploration IDs:</label>
        <textarea type="text" ng-model="$ctrl.explorationIdsForRegeneratingMissingStats" cols="40" rows="5" required="true"></textarea>
      </div>
      <div class="form-group row">
        <input type="submit" value="Regenerate">
        <a ng-if="$ctrl.csvUri" href="<[$ctrl.csvUri]>" download="<[$ctrl.csvFilename]>"><input type="button" value="Download CSV output"></a>
        <input ng-if="$ctrl.csvUri" type="button" ng-click="$ctrl.resetExplorationStatsRegenerationUtilityCsvRows()" value="Reset CSV data">
      </div>
    </form>
    <pre ng-if="$ctrl.missingExplorationStatsRegenerationMessage"><[$ctrl.missingExplorationStatsRegenerationMessage]></pre>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Grant super admin privileges to Firebase account</h3>
  <p>The chosen user will be forcibly logged out.</p>
  <p>This operation is idempotent.</p>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.grantSuperAdminPrivileges()">
      <div class="form-group row">
        <label>Username:</label>
        <input type="text" ng-model="$ctrl.usernameToGrant" required="true">
      </div>
      <div class="form-group row">
        <input type="submit" value="Grant">
      </div>
    </form>
  </div>
</md-card>

<md-card class="oppia-admin-page-card oppia-page-card oppia-long-text">
  <h3>Revoke super admin privileges from Firebase account</h3>
  <p>The chosen user will be forcibly logged out.</p>
  <p>This operation is idempotent.</p>
  <div class="oppia-query-form">
    <form class="form" ng-submit="$ctrl.revokeSuperAdminPrivileges()">
      <div class="form-group row">
        <label>Username:</label>
        <input type="text" ng-model="$ctrl.usernameToRevoke" required="true">
      </div>
      <div class="form-group row">
        <input type="submit" value="Revoke">
      </div>
    </form>
  </div>
</md-card>

<style>
  admin-misc-tab .oppia-admin-page-card {
    max-width: 700px
  }
  admin-misc-tab .oppia-admin-page-card > button {
    max-width: 30%;
  }
  admin-misc-tab .oppia-admin-page-card.oppia-long-text p {
    margin: 0 0 1em 0;
  }
  admin-misc-tab .oppia-admin-page-card .oppia-query-form .form-group {
    margin-left: 0;
  }
  admin-misc-tab .oppia-admin-page-card .oppia-query-form label {
    font-weight: normal;
    width: 30%;
  }
  admin-misc-tab .oppia-topic-similarities-container > input,
  admin-misc-tab .oppia-topic-similarities-container > button {
    display: block;
    margin: 5px 0 5px 0;
  }
  admin-misc-tab .oppia-long-text-card {
    max-width: 700px;
  }
</style>
