{% extends 'pages/base.html' %}

{% block maintitle %}
  {% if title %}
    {{ title }} - Oppia Editor
  {% else %}
    Untitled Collection - Oppia Editor
  {% endif %}
{% endblock maintitle %}

{% block header_js %}
  {{ super() }}
  <script type="text/javascript">
    GLOBALS.collectionId = JSON.parse('{{collection_id|js_string}}');
    GLOBALS.TAG_REGEX = JSON.parse('{{TAG_REGEX|js_string}}');
  </script>
{% endblock header_js %}

{% block navbar_breadcrumb %}
  <collection-editor-navbar-breadcrumb>
  </collection-editor-navbar-breadcrumb>
{% endblock navbar_breadcrumb %}

{% block local_top_nav_options %}
  <collection-editor-navbar>
  </collection-editor-navbar>
{% endblock local_top_nav_options %}

{% block content %}
  <div ng-controller="CollectionEditor">
    <div ng-if="getActiveTabName() === 'main'">
      <collection-editor-tab></collection-editor-tab>
    </div>

    <div ng-show="getActiveTabName() === 'settings'">
      <collection-settings-tab></collection-settings-tab>
    </div>

    <div ng-show="getActiveTabName() === 'history'">
      <collection-history-tab></collection-history-tab>
    </div>

    <div ng-show="getActiveTabName() === 'stats'">
      <collection-statistics-tab></collection-statistics-tab>
    </div>
  </div>

{% endblock content %}

{% block footer_js %}
  {{ super() }}
  <script src="/templates/filters/CamelCaseToHyphensFilter.js"></script>
  <script src="/templates/filters/ConvertToPlainTextFilter.js"></script>
  <script src="/templates/filters/NormalizeWhitespaceFilter.js"></script>
  <script src="/templates/filters/NormalizeWhitespacePunctuationAndCaseFilter.js"></script>
  <script src="/templates/filters/TruncateAtFirstLineFilter.js"></script>
  <script src="/templates/filters/UnderscoresToCamelCaseFilter.js"></script>

  <script src="/templates/expressions/ExpressionSyntaxTreeService.js"></script>
  <script src="/templates/expressions/ExpressionEvaluatorService.js"></script>
  <script src="/templates/expressions/ExpressionParserService.js"></script>
  <script src="/templates/expressions/ExpressionInterpolationService.js"></script>

  <script src="/templates/pages/collection_editor/CollectionEditor.js"></script>
  <script src="/templates/pages/collection_editor/CollectionEditorNavbarBreadcrumbDirective.js"></script>
  <script src="/templates/pages/collection_editor/CollectionEditorNavbarDirective.js"></script>
  <script src="/templates/pages/collection_editor/CollectionEditorStateService.js"></script>
  <script src="/templates/pages/collection_editor/editor_tab/CollectionEditorTabDirective.js"></script>
  <script src="/templates/pages/collection_editor/editor_tab/CollectionLinearizerService.js"></script>
  <script src="/templates/pages/collection_editor/editor_tab/CollectionNodeCreatorDirective.js"></script>
  <script src="/templates/pages/collection_editor/editor_tab/CollectionNodeEditorDirective.js"></script>
  <script src="/templates/pages/collection_editor/history_tab/CollectionHistoryTabDirective.js"></script>
  <script src="/templates/pages/collection_editor/settings_tab/CollectionDetailsEditorDirective.js"></script>
  <script src="/templates/pages/collection_editor/settings_tab/CollectionPermissionsCardDirective.js"></script>
  <script src="/templates/pages/collection_editor/settings_tab/CollectionSettingsTabDirective.js"></script>
  <script src="/templates/pages/collection_editor/statistics_tab/CollectionStatisticsTabDirective.js"></script>

  <script src="/templates/domain/collection/CollectionNodeObjectFactory.js"></script>
  <script src="/templates/domain/collection/CollectionObjectFactory.js"></script>
  <script src="/templates/domain/collection/CollectionRightsBackendApiService.js"></script>
  <script src="/templates/domain/collection/CollectionRightsObjectFactory.js"></script>
  <script src="/templates/domain/collection/CollectionUpdateService.js"></script>
  <script src="/templates/domain/collection/CollectionValidationService.js"></script>
  <script src="/templates/domain/collection/EditableCollectionBackendApiService.js"></script>
  <script src="/templates/domain/collection/ReadOnlyCollectionBackendApiService.js"></script>
  <script src="/templates/domain/collection/SearchExplorationsBackendApiService.js"></script>
  <script src="/templates/domain/editor/undo_redo/ChangeObjectFactory.js"></script>
  <script src="/templates/domain/editor/undo_redo/UndoRedoService.js"></script>
  <script src="/templates/domain/editor/undo_redo/QuestionUndoRedoService.js"></script>
  <script src="/templates/domain/editor/undo_redo/BaseUndoRedoService.js"></script>
  <script src="/templates/domain/exploration/AudioTranslationObjectFactory.js"></script>
  <script src="/templates/domain/state/StateObjectFactory.js"></script>
  <script src="/templates/domain/exploration/InteractionObjectFactory.js"></script>
  <script src="/templates/domain/objects/FractionObjectFactory.js"></script>
  <script src="/templates/domain/objects/NumberWithUnitsObjectFactory.js"></script>
  <script src="/templates/domain/objects/UnitsObjectFactory.js"></script>
  <script src="/templates/domain/exploration/AnswerGroupObjectFactory.js"></script>
  <script src="/templates/domain/exploration/ContentIdsToAudioTranslationsObjectFactory.js"></script>
  <script src="/templates/domain/exploration/WrittenTranslationObjectFactory.js"></script>
  <script src="/templates/domain/exploration/WrittenTranslationsObjectFactory.js"></script>
  <script src="/templates/domain/exploration/SubtitledHtmlObjectFactory.js"></script>
  <script src="/templates/domain/exploration/EditableExplorationBackendApiService.js"></script>
  <script src="/templates/domain/exploration/ReadOnlyExplorationBackendApiService.js"></script>
  <script src="/templates/domain/exploration/RuleObjectFactory.js"></script>
  <script src="/templates/domain/exploration/HintObjectFactory.js"></script>
  <script src="/templates/domain/exploration/SolutionObjectFactory.js"></script>
  <script src="/templates/domain/exploration/StatesObjectFactory.js"></script>
  <script src="/templates/domain/exploration/OutcomeObjectFactory.js"></script>
  <script src="/templates/domain/exploration/ParamChangeObjectFactory.js"></script>
  <script src="/templates/domain/exploration/ParamChangesObjectFactory.js"></script>
  <script src="/templates/domain/exploration/ParamSpecObjectFactory.js"></script>
  <script src="/templates/domain/exploration/ParamSpecsObjectFactory.js"></script>
  <script src="/templates/domain/exploration/ParamTypeObjectFactory.js"></script>
  <script src="/templates/domain/exploration/ExplorationDraftObjectFactory.js"></script>
  <script src="/templates/domain/summary/ExplorationSummaryBackendApiService.js"></script>
  <script src="/templates/domain/utilities/BrowserCheckerService.js"></script>

  <script src="/templates/pages/exploration_player/AnswerClassificationService.js"></script>
  <script src="/templates/pages/exploration_player/LearnerParamsService.js"></script>

  <script src="/templates/domain/utilities/LanguageUtilService.js"></script>
  <script src="/templates/domain/utilities/AudioLanguageObjectFactory.js"></script>
  <script src="/templates/domain/utilities/AutogeneratedAudioLanguageObjectFactory.js"></script>

  <script src="/templates/components/loading/LoadingDotsDirective.js"></script>

  <script src="/templates/components/forms/ConvertUnicodeWithParamsToHtmlFilter.js"></script>
  <script src="/templates/components/forms/ConvertHtmlToUnicodeFilter.js"></script>
  <script src="/templates/components/forms/ConvertUnicodeToHtmlFilter.js"></script>
  <script src="/templates/components/forms/validators/IsAtLeastFilter.js"></script>
  <script src="/templates/components/forms/validators/IsAtMostFilter.js"></script>
  <script src="/templates/components/forms/validators/IsFloatFilter.js"></script>
  <script src="/templates/components/forms/validators/IsIntegerFilter.js"></script>
  <script src="/templates/components/forms/validators/IsNonemptyFilter.js"></script>
  <script src="/templates/components/forms/ApplyValidationDirective.js"></script>
  <script src="/templates/components/forms/RequireIsFloatDirective.js"></script>
  <script src="/templates/components/forms/Select2DropdownDirective.js"></script>

  {# TODO(bhenning): Remove these once RouterServices is decoupled from the exploration editor #}
  <script src="/templates/pages/exploration_editor/ExplorationPropertyService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationAutomaticTextToSpeechService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationCategoryService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationCorrectnessFeedbackService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationInitStateNameService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationLanguageCodeService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationObjectiveService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationParamChangesService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationParamSpecsService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationStatesService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationTagsService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationTitleService.js"></script>
  <script src="/templates/pages/exploration_editor/ChangeListService.js"></script>
  <script src="/templates/pages/exploration_editor/AutosaveInfoModalsService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationDataService.js"></script>
  <script src="/templates/pages/exploration_editor/AngularNameService.js"></script>
  <script src="/templates/pages/exploration_editor/ExplorationEditor.js"></script>
  <script src="/templates/pages/exploration_editor/RouterService.js"></script>
  <script src="/templates/pages/exploration_editor/ChangesInHumanReadableFormService.js"></script>

  <script src="/templates/services/ExplorationFeaturesService.js"></script>
  <script src="/templates/services/ExplorationHtmlFormatterService.js"></script>
  <script src="/templates/services/ExtensionTagAssemblerService.js"></script>
  <script src="/templates/services/GenerateContentIdService.js"></script>
  <script src="/templates/services/HtmlEscaperService.js"></script>
  <script src="/templates/services/IdGenerationService.js"></script>
  <script src="/templates/services/LocalStorageService.js"></script>
  <script src="/templates/services/SiteAnalyticsService.js"></script>
  <script src="/templates/services/ValidatorsService.js"></script>

  <script src="/templates/pages/state_editor/state_properties/StateEditorService.js"></script>

  <script src="/templates/pages/exploration_editor/editor_tab/SolutionVerificationService.js"></script>
  <script src="/templates/pages/exploration_editor/editor_tab/SolutionValidityService.js"></script>
  <script src="/templates/domain/classifier/AnswerClassificationResultObjectFactory.js"></script>
  <script src="/templates/domain/classifier/ClassifierObjectFactory.js"></script>
  <script src="/templates/pages/exploration_player/PredictionAlgorithmRegistryService.js"></script>
  <script src="/templates/pages/exploration_player/StateClassifierMappingService.js"></script>
{% endblock footer_js %}
