<mat-card>
  <h3>Voiceovers</h3>
  <div *ngIf="pageIsLoaded">
    <mat-form-field class="oppia-language-accent-dropdown-selector language-accent-selector"
                    *ngIf="availableLanguageAccentCodesLength > 0">
      <mat-label>Select Accent: </mat-label>
      <mat-select (selectionChange)="getVoiceovers($event.value)"
                  [ngModel]="languageAccentCode">
        <mat-option *ngFor="let languageAccentCodeToDescription of availableLanguageAccentCodesToDescriptions | keyvalue"
                    [value]="languageAccentCodeToDescription.key">
          <span>
            {{languageAccentCodeToDescription.value}}
          </span>
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div *ngIf="availableLanguageAccentCodesLength === 0">
      No accent available for the selected voiceover.
    </div>
  </div>
  <div *ngIf="pageIsLoaded && !voiceoversAreLoaded && availableLanguageAccentCodesLength > 0">
    <p>Please select an accent to get voiceovers!</p>
  </div>

  <div *ngIf="pageIsLoaded && voiceoversAreLoaded">
    <div class="manual-voiceovers">
      <div class="voiceovers-component" *ngIf="manualVoiceover">
        <button class="btn btn-secondary audio-button" (click)="playAndPauseVoiceover(manualVoiceover.filename)">
          <mat-icon *ngIf="!audioPlayerService.isPlaying()" [ngbTooltip]="'Play'">play_arrow</mat-icon>
          <mat-icon *ngIf="audioPlayerService.isPlaying()" [ngbTooltip]="'Pause'">pause_arrow</mat-icon>
        </button>
        <mat-progress-bar mode="determinate"
                          [value]="voiceoverProgress"
                          class="voiceover-progress">
        </mat-progress-bar>
        <span class="voiceover-timer">
          {{currentVoiceoverDuration | formatTime}} / {{manualVoiceoverDuration | formatTime}}
        </span>
        <button (click)="deleteManualVoiceover()"
                mat-icon-button
                mat-button>
          <mat-icon [ngbTooltip]="'Delete voiceover'">close</mat-icon>
        </button>
        <button (click)="toggleAudioNeedsUpdate()"
                mat-icon-button
                mat-button>
          <mat-icon [ngbTooltip]="'Audio needs update'" *ngIf="manualVoiceover.needsUpdate">warning</mat-icon>
          <mat-icon [ngbTooltip]="'Audio does not needs update'" *ngIf="!manualVoiceover.needsUpdate">warning</mat-icon>
        </button>
      </div>
      <div *ngIf="manualVoiceover">
        <i *ngIf="manualVoiceover.needsUpdate">The current voiceover is stale.</i>
      </div>
      <div class="add-new-manual-voiceovers" *ngIf="!manualVoiceover">
        <button (click)="addManualVoiceover()" class="add-manual-voiceover-button">ADD MANUAL VOICEOVER</button>
      </div>
    </div>
  </div>
</mat-card>

<style>
  .language-accent-selector {
    width: 350px;
  }
  .voiceover-timer {
    margin: 10px;
  }
  .audio-button {
    border-radius: 20px;
    margin: 10px;
  }
  .voiceover-progress {
    margin: 10px;
    width: 50%;
  }
  .voiceovers-component {
    display: flex;
    align-items: center;
    justify-content: space-evenly
  }
  .add-new-manual-voiceovers {
    text-align: center;
  }
  .add-manual-voiceover-button {
    border-style: dashed;
    color: #009688;
    height: 40px;
    width: 100%;
  }
</style>
