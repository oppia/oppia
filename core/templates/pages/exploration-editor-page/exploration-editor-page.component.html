<div class="navbar-helper">
  <div class="navbar-tabs">
    <div class="navbar-text">
      <[$ctrl.getNavbarText()]>
      <span class="protractor-autosave-indicator autosave-indicator" ng-if="$ctrl.autosaveIsInProgress">
        &emsp;Auto Saving ...
      </span>
    </div>
    <div class="navbar-icons">
      <li ng-class="{'navbar-tab-active': $ctrl.getActiveTabName() === 'main', 'uib-dropdown': $ctrl.countWarnings()}" ng-click="$ctrl.selectMainTab()"
          class="nav-item icon nav-list-item position-relative">
        <a href="#" class="nav-link navbar-tab protractor-test-main-tab" uib-tooltip="Editor" tooltip-placement="<[$ctrl.countWarnings() ? 'left' : 'bottom']>">
          <i class="material-icons navbar-tab-icon" ng-class="{'navbar-tab-active-icon': $ctrl.getActiveTabName() === 'main'}">&#xE254;</i>
        </a>
        <div ng-show="$ctrl.countWarnings()" class="oppia-editor-warnings-indicator"
             ng-mouseover="$ctrl.warningsAreShown=true"
             ng-mouseleave="$ctrl.warningsAreShown=false"
             ng-class="{'oppia-editor-warnings-critical-color': hasCriticalWarnings(), 'oppia-editor-warnings-error-color': !hasCriticalWarnings()}">
          <span class="oppia-editor-warnings-count">
            <[$ctrl.countWarnings()]>
          </span>
          <ul uib-dropdown-menu class="uib-dropdown-menu oppia-editor-warnings-box dropdown-menu exploration-editor-warning-box" ng-if="$ctrl.warningsAreShown">
            <span class="oppia-editor-warnings-header">Warnings</span>
            <li class="oppia-editor-warnings-text" ng-repeat="warning in $ctrl.getWarnings() track by $index">
              <hr class="oppia-editor-warnings-separator">
              <span ng-if="warning.type === 'critical'">
                <strong><[warning.message]></strong>
              </span>
              <span ng-if="warning.type !== 'critical'">
                <[warning.message]>
              </span>
            </li>
          </ul>
        </div>
      </li>

      <li ng-class="{'navbar-tab-active': $ctrl.getActiveTabName() === 'translation'}" id="tutorialTranslationTab" class="nav-item icon nav-list-item protractor-test-translation-tab" ng-click="$ctrl.selectTranslationTab()">
        <a class="nav-link navbar-tab" uib-tooltip="Translations" tooltip-placement="bottom" tabindex="0">
          <i class="material-icons navbar-tab-icon" ng-class="{'navbar-tab-active-icon': $ctrl.getActiveTabName() === 'translation'}">&#xE029;</i>
        </a>
      </li>

      <li ng-class="{'navbar-tab-active': $ctrl.getActiveTabName() === 'preview'}" id="tutorialPreviewTab" class="nav-item icon nav-list-item protractor-test-preview-tab" ng-click="$ctrl.selectPreviewTab()">
        <a class="nav-link  navbar-tab" uib-tooltip="Preview" tooltip-placement="bottom" tabindex="0">
          <i class="material-icons navbar-tab-icon" ng-class="{'navbar-tab-active-icon': $ctrl.getActiveTabName() === 'preview'}">&#xE037;</i>
        </a>
      </li>

      <li ng-class="{'navbar-tab-active': $ctrl.getActiveTabName() === 'settings'}" class="nav-item icon nav-list-item protractor-test-settings-tab" ng-click="$ctrl.selectSettingsTab()">
        <a class="nav-link  navbar-tab" uib-tooltip="Settings" tooltip-placement="bottom" tabindex="0">
          <i class="material-icons navbar-tab-icon" ng-class="{'navbar-tab-active-icon': $ctrl.getActiveTabName() === 'settings'}">&#xE8B8;</i>
        </a>
      </li>

      <li ng-class="{'navbar-tab-active': $ctrl.getActiveTabName() === 'stats'}" class="nav-item icon nav-list-item protractor-test-stats-tab" ng-click="$ctrl.selectStatsTab()">
        <a class="nav-link  navbar-tab" uib-tooltip="Statistics" tooltip-placement="bottom" tabindex="0">
          <i class="material-icons navbar-tab-icon" ng-class="{'navbar-tab-active-icon': $ctrl.getActiveTabName() === 'stats'}">&#xE24B;</i>
        </a>
      </li>

      <li  ng-if="$ctrl.isImprovementsTabEnabled() && $ctrl.screenIsLarge" ng-class="{'navbar-tab-active': $ctrl.getActiveTabName() === 'improvements'}" class="nav-item icon nav-list-item protractor-test-improvements-tab" ng-click="$ctrl.selectImprovementsTab()">
        <a class="nav-link  navbar-tab" uib-tooltip="Improvements" tooltip-placement="bottom" tabindex="0">
          <i class="material-icons navbar-tab-icon" ng-class="{'navbar-tab-active-icon': $ctrl.getActiveTabName() === 'improvements'}">trending_up</i>
        </a>
      </li>

      <li ng-class="{'navbar-tab-active': $ctrl.getActiveTabName() === 'history'}" class="nav-item icon nav-list-item protractor-test-history-tab" ng-click="$ctrl.selectHistoryTab()">
        <a class="nav-link  navbar-tab" uib-tooltip="History" tooltip-placement="bottom" tabindex="0">
          <i class="material-icons navbar-tab-icon" ng-class="{'navbar-tab-active-icon': $ctrl.getActiveTabName() === 'history'}">&#xE192;</i>
        </a>
      </li>

      <li ng-class="{'navbar-tab-active': $ctrl.getActiveTabName() === 'feedback'}" class="nav-item icon nav-list-item protractor-test-feedback-tab" ng-click="$ctrl.selectFeedbackTab()">
        <a class="nav-link  navbar-tab" uib-tooltip="Feedback" tooltip-placement="bottom" tabindex="0">
          <i class="material-icons navbar-tab-icon" ng-class="{'navbar-tab-active-icon': $ctrl.getActiveTabName() === 'feedback'}">&#xE87F;</i>
        </a>
        <div ng-show="$ctrl.getOpenThreadsCount()" class="oppia-exploration-open-threads-indicator oppia-exploration-open-threads-color">
          <span class="oppia-exploration-open-threads-count">
              <[$ctrl.getOpenThreadsCount()]>
          </span>
        </div>
      </li>

      <li class="nav-item icon nav-list-item" ng-click="$ctrl.showUserHelpModal()">
        <a href="#"
           uib-tooltip="Help"
           tooltip-placement="bottom"
           class="nav-link oppia-editor-navbar-tab-anchor">
          <i class="material-icons navbar-tab-icon">&#xE887;</i>
        </a>
      </li>
    </div>
  </div>
</div>
<div class="exploration-editor-content" ng-cloak>
  <div class="container-fluid oppia-editor-page-container">
    <div class="row" ng-if="$ctrl.ExplorationRightsService.isCloned()">
      <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="oppia-align-center uib-alert alert-warning oppia-alert-warning">
          <strong>Note:</strong> This is a private, unpublishable copy of a
          <a ng-href="<[$ctrl.getExplorationUrl($ctrl.ExplorationRightsService.clonedFrom())]>" target="_blank" rel="noopener">public exploration</a>.
        </div>
      </div>
    </div>

    <exploration-editor-tab ng-show="$ctrl.getActiveTabName() === 'main'">
    </exploration-editor-tab>

    <translation-tab ng-if="$ctrl.getActiveTabName() === 'translation'">
    </translation-tab>
    <!-- This is an ng-if, so that the preview loads the latest version of the exploration each time the tab is accessed. -->
    <preview-tab ng-if="$ctrl.getActiveTabName() === 'preview'" class="protractor-test-preview-tab">
    </preview-tab>

    <statistics-tab ng-show="$ctrl.getActiveTabName() === 'stats'">
    </statistics-tab>

    <improvements-tab ng-if="$ctrl.isImprovementsTabEnabled()" ng-show="$ctrl.getActiveTabName() === 'improvements'">
    </improvements-tab>

    <settings-tab ng-show="$ctrl.getActiveTabName() === 'settings'" current-user-is-admin="$ctrl.currentUserIsAdmin" current-user-is-moderator="$ctrl.currentUserIsModerator">
    </settings-tab>

    <history-tab ng-show="$ctrl.getActiveTabName() === 'history'">
    </history-tab>

    <feedback-tab ng-show="$ctrl.getActiveTabName() === 'feedback'">
    </feedback-tab>
  </div>
</div>

<oppia-on-screen-keyboard></oppia-on-screen-keyboard>

<!-- These definitions must be included exactly once on the page for the graph SVGs to work in Firefox. -->
<svg width="0" height="0">
  <defs>
    <marker id="arrowhead" viewBox="0 0 18 18" refX="10" refY="3"
            markerWidth="10" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 4 L 0 8 z" fill="grey"></path>
    </marker>
    <marker id="arrowhead-green" viewBox="0 0 18 18" refX="10" refY="3"
            markerWidth="10" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 4 L 0 8 z" fill="#1F7D1F"></path>
    </marker>
    <marker id="arrowhead-red" viewBox="0 0 18 18" refX="10" refY="3"
            markerWidth="10" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 4 L 0 8 z" fill="#B22222"></path>
    </marker>
    <linearGradient id="nodegradient" x1="0%" x2="100%" y1="0%" y2="0%">
      <stop offset="0%" class="oppia-stop"></stop>
      <stop offset="100%" class="oppia-stop"></stop>
    </linearGradient>
  </defs>
</svg>

<style>
  exploration-editor-page .autosave-indicator {
    font-size: 75%;
  }

  exploration-editor-page .exploration-editor-content {
    margin-top: 95px;
  }
  exploration-editor-page .navbar-helper {
    background-color: #00609C;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.14), 0 2px 4px rgba(0, 0, 0, 0.23);
    height: 70px;
    margin-bottom: 20px;
    position: fixed;
    text-align: center;
    top: 56px;
    width: 100%;
    z-index: 990;
  }
  exploration-editor-page .navbar-tabs {
    display: flex;
    flex-wrap: wrap;
    height: 100%;
    justify-content: space-between;
    text-align: center;
  }
  exploration-editor-page .navbar-tab-icon {
    color: #FFF;
    display: block;
    font-size: 30px;
    width: 100%;
  }
  exploration-editor-page .navbar-tab span {
    color: #FFF;
    font-size: 12px;
  }
  exploration-editor-page .oppia-editor-warnings-box {
    cursor: default;
    max-width: none;
  }
  exploration-editor-page .navbar-tab-active {
    background-color: #e6e6e6;
    box-shadow: 0 3px 2px 0 #e6e6e6;
  }
  exploration-editor-page .navbar-tab-active-icon {
    color: #00609C;
  }
  exploration-editor-page .exploration-editor-warning-box {
    display: block;
  }

  exploration-editor-page .oppia-exploration-open-threads-indicator {
    border-radius: 50%;
    bottom: 5px;
    height: 15px;
    position: absolute;
    right: 3px;
    text-align: center;
  }
  exploration-editor-page .oppia-exploration-open-threads-color {
    background-color: #4078C0;
  }
  exploration-editor-page .oppia-exploration-open-threads-count {
    background-color: #4078C0;
    border: 1px solid;
    border-radius: 10px;
    bottom: 8px;
    color: white;
    font-size: 12px;
    height: 16px;
    line-height: 16px;
    padding: 0 5px;
    position: relative;
    text-shadow: 0 1px rgba(0, 0, 0, 0.25);
  }
  @media screen and (max-width: 768px) {
    .navbar-helper {
      display: none;
    }
  }
  exploration-editor-page .navbar-text {
    align-items: center;
    color: #FFF;
    display: flex;
    font-family: Capriola, Roboto, Arial, sans-serif;
    font-size: 20px;
    margin-left: 3%;
  }
  exploration-editor-page .navbar-icons {
    display: flex;
    margin-right: 5%;
  }
  exploration-editor-page .nav-list-item {
    align-items: center;
    cursor: pointer;
    display: flex;
    justify-content: center;
    width: 90px;
  }
  exploration-editor-page .navbar-icons .nav-list-item:hover {
    background-color: #4eb0c0;
  }
  exploration-editor-page .oppia-alert-warning {
    padding: 2px;
    width: 90%;
  }
  exploration-editor-page .oppia-stop {
    stop-color: #8fbc8f;
    stop-opacity: 1;
  }

  @media screen and (max-width: 1000px) {
    exploration-editor-page .navbar-text {
      display: none;
    }
    exploration-editor-page .navbar-icons {
      margin: 0 auto;
    }
  }
  @media screen and (max-width: 800px) {
    exploration-editor-page .navbar-helper {
      position: inherit;
    }
    exploration-editor-page .navbar-tabs {
      justify-content: center;
    }
    exploration-editor-page .exploration-editor-content {
      margin-top: 0;
    }
  }
</style>
